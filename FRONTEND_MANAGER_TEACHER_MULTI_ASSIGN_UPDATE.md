# دليل تعديل الفرونت: ربط المشرفين والمعلمين (متعدد)

تم تحديث Endpoint تعديل المستخدم `PUT /api/User/Update` بحيث يدعم ربط متعدد بين المشرف والمعلم في الاتجاهين.

## ما الذي تغير في الباك؟

## 1) عند تعديل **المشرف**
- الحقل `TeacherIds` أصبح هو الحقل الأساسي لربط المشرف بأكثر من معلم.
- يرسل الفرونت مصفوفة من معرفات المعلمين.
- الباك يقوم بـ:
  - إضافة الروابط الجديدة.
  - حذف أي روابط قديمة غير موجودة في القائمة الجديدة.

## 2) عند تعديل **المعلم**
- تمت إضافة حقل جديد: `ManagerIds`.
- يمكن الآن ربط المعلم بأكثر من مشرف في نفس الطلب.
- الباك يقوم بنفس سلوك التزامن:
  - إضافة الروابط الجديدة.
  - حذف الروابط القديمة غير الموجودة في `ManagerIds`.

---

## شكل الطلب الجديد (Request Body)

> نفس Endpoint الحالي، فقط أضف/استخدم الحقول التالية حسب نوع المستخدم.

```json
{
  "id": 123,
  "fullName": "...",
  "mobile": "...",
  "teacherIds": [11, 15, 20],
  "managerIds": [3, 7],
  "studentIds": [1001, 1002],
  "circleIds": [5, 8]
}
```

## ملاحظات مهمة للفرونت
- عند تعديل **مشرف**:
  - اعتمد على `teacherIds` (Multi Select).
- عند تعديل **معلم**:
  - اعتمد على `managerIds` (Multi Select) بدلاً من اختيار مشرف واحد.
- أرسل فقط IDs صحيحة (> 0).
- عند إرسال قائمة فارغة (`[]`) فهذا يعني فك جميع الروابط الحالية لهذا النوع.

---

## توصية UI
- في شاشة تعديل المعلم:
  - استبدل حقل "المشرف" المفرد بـ Multi Select باسم "المشرفون".
- في شاشة تعديل المشرف:
  - تأكد أن اختيار "المعلمين" يدعم تعدد الاختيار ويرسل `teacherIds`.

---

## توافق خلفي (Backward Compatibility)
- الحقل القديم `ManagerId` ما زال موجوداً في DTO، لكن الربط المتعدد الآن يعتمد على `ManagerIds`.
- يفضّل تحديث الفرونت فوراً لاستخدام الحقل الجديد `ManagerIds` في شاشة تعديل المعلم.
