# تعليمات للواجهة بعد تحديثي خصائص المعلم والباقات

> الوثيقة التالية تجمع ما يجب على الواجهة الالتزام به بعد آخر تحديثين في الـ API.

## 1. ملخص التحديث السابق (الإقامة + تصنيف أنواع الاشتراك)
- أصبح لكل مستخدم حقل `residentId` إلزامي في نماذج (إضافة/تعديل) المستخدم، والقيمة تأتي من نفس قائمة `/LookUp/GetAllNationality`.
- تم الاعتماد على الحقل `group` في نوع الاشتراك (`CreateSubscribeTypeDto` و `SubscribeTypeReDto`) لتحديد الفئة (Foreign, Arab, Egyptian) بدلًا من إرسال `subscribeFor` عند إنشاء الباقة.
- تؤثر قيمة `group` على القوائم التي تُرجعها `/LookUp/GetAllSubscribesByTypeId` بحيث يتم ترشيح الباقات المناسبة تلقائيًا حسب جنسية الطالب.

**إجراءات مطلوبة للواجهة:**
1. استمرار إظهار وتجميع حقلي الجنسية ومحل الإقامة في نماذج المستخدم وإرسالهما في الطلبات (`/User/Add`, `/User/Update`, `/User/UpdateProfile`).
2. التأكد من أن نماذج إدارة أنواع الاشتراك تعرض اختيار `group` (Foreign/Arab/Egyptian) وترسله بالقيمة الرقمية الصحيحة.
3. عدم محاولة إرسال أي قيمة `subscribeFor` مع إنشاء الباقات لأن الـ API يستنتجها الآن.

## 2. التحديث الحالي (إلغاء `foreignTeacher` وتوحيد سعر الساعة)
### ما الذي تغيّر في الـ API؟
- تمت إزالة الحقل `foreignTeacher` من جدول المستخدمين وجميع الـ DTOs؛ أي قيمة بنفس الاسم سيتم تجاهلها من الـ API.
- أصبحت أنواع الاشتراك تحتوي على حقل واحد فقط للسعر وهو `hourPrice`. تم حذف الحقول `forignPricePerHour`, `arabPricePerHour`, `egyptPricePerHour` من نماذج الإدخال والإخراج.
- يتم احتساب راتب المعلم في تقارير الحلقات (`CircleReport`) اعتمادًا على قيمة `hourPrice` الخاصة بخطة الطالب فقط.

### ماذا يجب على الواجهة فعله؟
1. إزالة أي مفاتيح أو حقول واجهة باسم `foreignTeacher` من شاشات المستخدمين والقوائم، وعدم إرساله في طلبات الإضافة أو التعديل.
2. في شاشة إدارة أنواع الاشتراك:
   - استبدل الحقول الثلاثة الخاصة بالأسعار بحقل واحد `hourPrice` (قيمة عشرية).
   - عند عرض التفاصيل أو القوائم استخدم `hourPrice` فقط ولا تتوقع وجود أسعار بعملات متعددة.
3. في الصفحات التي تظهر رواتب المعلمين أو الأجور المترتبة على الحصص، اعتمد على القيم التي يعيدها الـ API مباشرةً لأن منطق الاحتساب أصبح موحدًا ولا يعتمد على تصنيف المعلم.
4. تأكد من أن أي استدعاء قديم أو بيانات مخزنة مؤقتًا لا تزال تحتوي على الحقول المحذوفة يتم تحديثه أو تنظيفه قبل نشر النسخة الجديدة.

العمل بهذين التحديثين معًا يضمن عدم حدوث أخطاء تسلسلية بين الواجهة والخلفية عند معالجة الاشتراكات ورواتب المعلمين.
