"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[1850],{41850:(J,T,a)=>{a.d(T,{i9:()=>W,Qs:()=>$});var V=a(10467),h=a(48728);const y={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},E=new h.nKC("config",{providedIn:"root",factory:()=>({modules:y})});var o=a(73664),r=a(17705),w=a(60177),x=a(345),b=a(89079),L=a(71985),Q=a(59030),M=a(27468),q=a(7673),z=a(74402),p=a(33726),B=a(18359),R=a(44668),F=a(96354),N=a(88141),H=a(31397),S=a(70152),O=a(89417);const k=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],D=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function j(n,m){1&n&&o.nrm(0,"div",0)}function P(n,m){1&n&&o.nrm(0,"div",0)}const C=(n,m)=>n||m||"html";let I=(()=>{class n{constructor(){var e=this;this.config=(0,h.WQX)(E)||{modules:y},this.quill$=(0,Q.v)((0,V.A)(function*(){if(!e.Quill){const t=document.addEventListener;document.addEventListener=document.__zone_symbol__addEventListener||document.addEventListener;const{Quill:i}=yield a.e(5296).then(a.bind(a,85296));document.addEventListener=t,e.Quill=i}return e.config.customOptions?.forEach(t=>{const i=e.Quill.import(t.import);i.whitelist=t.whitelist,e.Quill.register(i,!0,e.config.suppressGlobalRegisterWarning)}),new Promise(t=>{e.registerCustomModules(e.Quill,e.config.customModules,e.config.suppressGlobalRegisterWarning).subscribe(t)})})).pipe((0,R.t)({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(e,t,i=this.config.beforeRender){const s=[this.registerCustomModules(e,t)];return i&&s.push(i()),(0,M.p)(s).pipe((0,F.T)(()=>e))}registerCustomModules(e,t,i){if(!Array.isArray(t))return(0,q.of)(e);const s=[];for(const l of t){const{path:d,implementation:u}=l;this.registeredModules.has(d)||(this.registeredModules.add(d),(0,z.A)(u)?s.push(u.pipe((0,N.M)(f=>{e.register(d,f,i)}))):e.register(d,u,i))}return s.length>0?(0,M.p)(s).pipe((0,F.T)(()=>e)):(0,q.of)(e)}static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G=(()=>{class n{constructor(){this.format=(0,r.hFB)(void 0),this.theme=(0,r.hFB)(void 0),this.modules=(0,r.hFB)(void 0),this.debug=(0,r.hFB)(!1),this.readOnly=(0,r.hFB)(!1),this.placeholder=(0,r.hFB)(void 0),this.maxLength=(0,r.hFB)(void 0),this.minLength=(0,r.hFB)(void 0),this.required=(0,r.hFB)(!1),this.formats=(0,r.hFB)(void 0),this.customToolbarPosition=(0,r.hFB)("top"),this.sanitize=(0,r.hFB)(void 0),this.beforeRender=(0,r.hFB)(void 0),this.styles=(0,r.hFB)(null),this.registry=(0,r.hFB)(void 0),this.bounds=(0,r.hFB)(void 0),this.customOptions=(0,r.hFB)([]),this.customModules=(0,r.hFB)([]),this.trackChanges=(0,r.hFB)(void 0),this.classes=(0,r.hFB)(void 0),this.trimOnValidation=(0,r.hFB)(!1),this.linkPlaceholder=(0,r.hFB)(void 0),this.compareValues=(0,r.hFB)(!1),this.filterNull=(0,r.hFB)(!1),this.debounceTime=(0,r.hFB)(void 0),this.defaultEmptyValue=(0,r.hFB)(null),this.onEditorCreated=new o.bkB,this.onEditorChanged=new o.bkB,this.onContentChanged=new o.bkB,this.onSelectionChanged=new o.bkB,this.onFocus=new o.bkB,this.onBlur=new o.bkB,this.onNativeFocus=new o.bkB,this.onNativeBlur=new o.bkB,this.disabled=!1,this.toolbarPosition=(0,h.vPA)("top"),this.eventsSubscription=null,this.quillSubscription=null,this.elementRef=(0,h.WQX)(o.aKT),this.cd=(0,h.WQX)(r.gRc),this.domSanitizer=(0,h.WQX)(x.up),this.platformId=(0,h.WQX)(o.Agw),this.renderer=(0,h.WQX)(o.sFG),this.zone=(0,h.WQX)(o.SKi),this.service=(0,h.WQX)(I),this.destroyRef=(0,h.WQX)(h.abz),this.valueGetter=(0,r.hFB)(e=>{let t=e.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let i=t;const s=C(this.format(),this.service.config.format);if("text"===s)i=e.getText();else if("object"===s)i=e.getContents();else if("json"===s)try{i=JSON.stringify(e.getContents())}catch{i=e.getText()}return i}),this.valueSetter=(0,r.hFB)((e,t)=>{const i=C(this.format(),this.service.config.format);if("html"===i)return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(o.WPN.HTML,t)),e.clipboard.convert({html:t});if("json"===i)try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(e,t,i)=>{const s=this.trackChanges()||this.service.config.trackChanges,l=!e&&!!this.onModelTouched&&("user"===i||s&&"all"===s);!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!l||this.zone.run(()=>{null===e?this.onBlur.emit({editor:this.quillEditor,source:i}):null===t&&this.onFocus.emit({editor:this.quillEditor,source:i}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:i}),l&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,i)=>{const s=this.quillEditor.getText(),l=this.quillEditor.getContents();let d=this.quillEditor.getSemanticHTML();this.isEmptyValue(d)&&(d=this.defaultEmptyValue());const u=this.trackChanges()||this.service.config.trackChanges,f=("user"===i||u&&"all"===u)&&!!this.onModelChange;!this.onContentChanged.observed&&!f||this.zone.run(()=>{if(f){const v=this.valueGetter();this.onModelChange(v(this.quillEditor))}this.onContentChanged.emit({content:l,delta:e,editor:this.quillEditor,html:d,oldDelta:t,source:i,text:s}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,i,s)=>{if(this.onEditorChanged.observed)if("text-change"===e){const l=this.quillEditor.getText(),d=this.quillEditor.getContents();let u=this.quillEditor.getSemanticHTML();this.isEmptyValue(u)&&(u=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:d,delta:t,editor:this.quillEditor,event:e,html:u,oldDelta:i,source:s,text:l}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:i,range:t,source:s}),this.cd.markForCheck()})},this.destroyRef.onDestroy(()=>{this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null})}static normalizeClassNames(e){return e.trim().split(" ").reduce((i,s)=>{const l=s.trim();return l&&i.push(l),i},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){(0,w.Vy)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,H.Z)(e=>this.service.beforeRender(e,this.customModules(),this.beforeRender()))).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),i=Object.assign({},this.modules()||this.service.config.modules);t?i.toolbar=t:void 0===i.toolbar&&(i.toolbar=y.toolbar);let s=void 0!==this.placeholder()?this.placeholder():this.service.config.placeholder;void 0===s&&(s="Insert text here ...");const l=this.styles();l&&Object.keys(l).forEach(c=>{this.renderer.setStyle(this.editorElem,c,l[c])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(c=>{const g=e.import(c.import);g.whitelist=c.whitelist,e.register(g,!0)});let d=this.bounds()&&"self"===this.bounds()?this.editorElem:this.bounds();d||(d=this.service.config.bounds?this.service.config.bounds:document.body);let u=this.debug();!u&&!1!==u&&this.service.config.debug&&(u=this.service.config.debug);let f=this.readOnly();!f&&!1!==this.readOnly()&&(f=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let v=this.formats();if(!v&&void 0===v&&(v=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:d,debug:u,formats:v,modules:i,placeholder:s,readOnly:f,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){(0,p.R)(this.quillEditor.scroll.domNode,"blur").pipe((0,b.pQ)(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));const c=this.quillEditor.getModule("toolbar");c.container&&(0,p.R)(c.container,"mousedown").pipe((0,b.pQ)(this.destroyRef)).subscribe(g=>g.preventDefault())}if(this.onNativeFocus.observed&&(0,p.R)(this.quillEditor.scroll.domNode,"focus").pipe((0,b.pQ)(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){const g=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");g?.dataset&&(g.dataset.link=this.linkPlaceholder())}}),this.content){if("text"===C(this.format(),this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const X=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(X,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&new L.c(n=>{const m=requestAnimationFrame(()=>{n.next(),n.complete()});return()=>cancelAnimationFrame(m)}).pipe((0,b.pQ)(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.styles){const t=e.styles.currentValue,i=e.styles.previousValue;i&&Object.keys(i).forEach(s=>{this.renderer.removeStyle(this.editorElem,s)}),t&&Object.keys(t).forEach(s=>{this.renderer.setStyle(this.editorElem,s,this.styles()[s])})}if(e.classes){const t=e.classes.currentValue,i=e.classes.previousValue;i&&this.removeClasses(i),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){n.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){n.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull()&&null===e||(this.content=e,!this.quillEditor))return;const t=C(this.format(),this.service.config.format),s=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){const l=this.quillEditor.getContents();if(JSON.stringify(l)===JSON.stringify(s))return}e?"text"===t?this.quillEditor.setText(e):this.quillEditor.setContents(s):this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;const e={};let t=!0;const i=this.quillEditor.getText(),s=this.trimOnValidation()?i.trim().length:1===i.length&&0===i.trim().length?0:i.length-1,l=this.quillEditor.getContents().ops,d=!!l&&1===l.length&&["\n",""].includes(l[0].insert?.toString());return this.minLength()&&s&&s<this.minLength()&&(e.minLengthError={given:s,minLength:this.minLength()},t=!1),this.maxLength()&&s>this.maxLength()&&(e.maxLengthError={given:s,maxLength:this.maxLength()},t=!1),this.required()&&!s&&d&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.eventsSubscription=new B.yU,this.eventsSubscription.add((0,p.R)(this.quillEditor,"selection-change").subscribe(([i,s,l])=>{this.selectionChangeHandler(i,s,l)}));let e=(0,p.R)(this.quillEditor,"text-change"),t=(0,p.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime()&&(e=e.pipe((0,S.B)(this.debounceTime())),t=t.pipe((0,S.B)(this.debounceTime()))),this.eventsSubscription.add(e.subscribe(([i,s,l])=>{this.textChangeHandler(i,s,l)})),this.eventsSubscription.add(t.subscribe(([i,s,l,d])=>{this.editorChangeHandler(i,s,l,d)}))})}dispose(){this.eventsSubscription?.unsubscribe(),this.eventsSubscription=null}isEmptyValue(e){return"<p></p>"===e||"<div></div>"===e||"<p><br></p>"===e||"<div><br></div>"===e}static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275dir=o.FsC({type:n,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[o.OA$]})}return n})(),W=(()=>{class n extends G{static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=o.xGo(n)))(i||n)}})();static#t=this.\u0275cmp=o.VBU({type:n,selectors:[["quill-editor"]],features:[o.Jv_([{multi:!0,provide:O.kq,useExisting:(0,h.Rfq)(()=>n)},{multi:!0,provide:O.cz,useExisting:(0,h.Rfq)(()=>n)}]),o.Vt3],ngContentSelectors:D,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,i){1&t&&(o.NAR(k),o.nVh(0,j,1,0,"div",0),o.SdG(1),o.SdG(2,1),o.SdG(3,2),o.nVh(4,P,1,0,"div",0)),2&t&&(o.vxM("top"!==i.toolbarPosition()?0:-1),o.R7$(4),o.vxM("top"===i.toolbarPosition()?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}return n})(),$=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:E,useValue:e}]}}static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=o.$C({type:n});static#i=this.\u0275inj=h.G2t({})}return n})()}}]);