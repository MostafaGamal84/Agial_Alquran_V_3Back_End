"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[3061],{63061:(mw,mi,ae)=>{ae.r(mi),ae.d(mi,{ColumnFilter:()=>pw});var Nt=ae(48728),wn=ae(23597),xn=ae(29330),Ci=ae(75231),Fn=ae(56147),Mn=ae(39928),Tn=ae(76045),An=ae(52688),o=ae(43913),Ze=ae(10467),Pn=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let s=e[0],i=e[1],r=e[2],a=e[3];s=this.ff(s,i,r,a,t[0],7,-680876936),a=this.ff(a,s,i,r,t[1],12,-389564586),r=this.ff(r,a,s,i,t[2],17,606105819),i=this.ff(i,r,a,s,t[3],22,-1044525330),s=this.ff(s,i,r,a,t[4],7,-176418897),a=this.ff(a,s,i,r,t[5],12,1200080426),r=this.ff(r,a,s,i,t[6],17,-1473231341),i=this.ff(i,r,a,s,t[7],22,-45705983),s=this.ff(s,i,r,a,t[8],7,1770035416),a=this.ff(a,s,i,r,t[9],12,-1958414417),r=this.ff(r,a,s,i,t[10],17,-42063),i=this.ff(i,r,a,s,t[11],22,-1990404162),s=this.ff(s,i,r,a,t[12],7,1804603682),a=this.ff(a,s,i,r,t[13],12,-40341101),r=this.ff(r,a,s,i,t[14],17,-1502002290),i=this.ff(i,r,a,s,t[15],22,1236535329),s=this.gg(s,i,r,a,t[1],5,-165796510),a=this.gg(a,s,i,r,t[6],9,-1069501632),r=this.gg(r,a,s,i,t[11],14,643717713),i=this.gg(i,r,a,s,t[0],20,-373897302),s=this.gg(s,i,r,a,t[5],5,-701558691),a=this.gg(a,s,i,r,t[10],9,38016083),r=this.gg(r,a,s,i,t[15],14,-660478335),i=this.gg(i,r,a,s,t[4],20,-405537848),s=this.gg(s,i,r,a,t[9],5,568446438),a=this.gg(a,s,i,r,t[14],9,-1019803690),r=this.gg(r,a,s,i,t[3],14,-187363961),i=this.gg(i,r,a,s,t[8],20,1163531501),s=this.gg(s,i,r,a,t[13],5,-1444681467),a=this.gg(a,s,i,r,t[2],9,-51403784),r=this.gg(r,a,s,i,t[7],14,1735328473),i=this.gg(i,r,a,s,t[12],20,-1926607734),s=this.hh(s,i,r,a,t[5],4,-378558),a=this.hh(a,s,i,r,t[8],11,-2022574463),r=this.hh(r,a,s,i,t[11],16,1839030562),i=this.hh(i,r,a,s,t[14],23,-35309556),s=this.hh(s,i,r,a,t[1],4,-1530992060),a=this.hh(a,s,i,r,t[4],11,1272893353),r=this.hh(r,a,s,i,t[7],16,-155497632),i=this.hh(i,r,a,s,t[10],23,-1094730640),s=this.hh(s,i,r,a,t[13],4,681279174),a=this.hh(a,s,i,r,t[0],11,-358537222),r=this.hh(r,a,s,i,t[3],16,-722521979),i=this.hh(i,r,a,s,t[6],23,76029189),s=this.hh(s,i,r,a,t[9],4,-640364487),a=this.hh(a,s,i,r,t[12],11,-421815835),r=this.hh(r,a,s,i,t[15],16,530742520),i=this.hh(i,r,a,s,t[2],23,-995338651),s=this.ii(s,i,r,a,t[0],6,-198630844),a=this.ii(a,s,i,r,t[7],10,1126891415),r=this.ii(r,a,s,i,t[14],15,-1416354905),i=this.ii(i,r,a,s,t[5],21,-57434055),s=this.ii(s,i,r,a,t[12],6,1700485571),a=this.ii(a,s,i,r,t[3],10,-1894986606),r=this.ii(r,a,s,i,t[10],15,-1051523),i=this.ii(i,r,a,s,t[1],21,-2054922799),s=this.ii(s,i,r,a,t[8],6,1873313359),a=this.ii(a,s,i,r,t[15],10,-30611744),r=this.ii(r,a,s,i,t[6],15,-1560198380),i=this.ii(i,r,a,s,t[13],21,1309151649),s=this.ii(s,i,r,a,t[4],6,-145523070),a=this.ii(a,s,i,r,t[11],10,-1120210379),r=this.ii(r,a,s,i,t[2],15,718787259),i=this.ii(i,r,a,s,t[9],21,-343485551),e[0]=this.add32(s,e[0]),e[1]=this.add32(i,e[1]),e[2]=this.add32(r,e[2]),e[3]=this.add32(a,e[3])}cmn(e,t,s,i,r,a){return t=this.add32(this.add32(t,e),this.add32(i,a)),this.add32(t<<r|t>>>32-r,s)}ff(e,t,s,i,r,a,n){return this.cmn(t&s|~t&i,e,t,r,a,n)}gg(e,t,s,i,r,a,n){return this.cmn(t&i|s&~i,e,t,r,a,n)}hh(e,t,s,i,r,a,n){return this.cmn(t^s^i,e,t,r,a,n)}ii(e,t,s,i,r,a,n){return this.cmn(s^(t|~i),e,t,r,a,n)}md51(e){const t=e.length,s=[1732584193,-271733879,-1732584194,271733878];let i;for(i=64;i<=e.length;i+=64)this.md5cycle(s,this.md5blk(e.substring(i-64,i)));e=e.substring(i-64);const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)r[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(s,r),i=0;i<16;i++)r[i]=0;return r[14]=8*t,this.md5cycle(s,r),s}md5blk(e){const t=[];for(let s=0;s<64;s+=4)t[s>>2]=e.charCodeAt(s)+(e.charCodeAt(s+1)<<8)+(e.charCodeAt(s+2)<<16)+(e.charCodeAt(s+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let s="",i=0;for(;i<4;i++)s+=t[e>>8*i+4&15]+t[e>>8*i&15];return s}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}},Bt={"01":"GRID","02":"CHARTS","0102":"BOTH"},vi="https://www.ag-grid.com/licensing/",ut=(()=>{let e=class de{constructor(s){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=s,this.md5=new Pn,this.md5.init()}validateLicense(){const s=this.getLicenseDetails(de.licenseKey),i=`AG Grid ${"BOTH"===s.currentLicenseType?"and AG Charts ":""}Enterprise`,r=void 0===s.suppliedLicenseType?"":`AG ${"BOTH"===s.suppliedLicenseType?"Grid and AG Charts":"GRID"===s.suppliedLicenseType?"Grid":"Charts"} Enterprise`;if(s.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(s.expired){const a=de.getGridReleaseDate(),n=de.formatDate(a);this.outputExpiredKey(s.expiry,n,i,r)}else s.valid?s.isTrial&&s.trialExpired&&this.outputExpiredTrialKey(s.expiry,i,r):this.outputInvalidLicenseKey(!!s.incorrectLicenseType,i,r)}static extractExpiry(s){const i=s.substring(s.lastIndexOf("_")+1,s.length);return new Date(parseInt(de.decode(i),10))}static extractLicenseComponents(s){let i=s.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),s.length<=32)return{md5:null,license:s,version:null,isTrial:null};const r=i.length-32,a=i.substring(r),n=i.substring(0,r),[l,c,d]=de.extractBracketedInformation(i);return{md5:a,license:n,version:l,isTrial:c,type:d}}getLicenseDetails(s){const i=de.chartsLicenseManager?"BOTH":"GRID";if(!s?.length)return{licenseKey:s,valid:!1,missing:!0,currentLicenseType:i};const r=de.getGridReleaseDate(),{md5:a,license:n,version:l,isTrial:c,type:d}=de.extractLicenseComponents(s);let u,p,m,h=a===this.md5.md5(n)&&-1===s.indexOf("For_Trialing_ag-Grid_Only"),g=null,f=!1;function C(){u=g<new Date,p=void 0}if(h&&(g=de.extractExpiry(n),h=!isNaN(g.getTime()),h))switch(p=r>g,l){case"legacy":case"2":c&&C();break;case"3":d?.length?(m=d,d!==Bt["01"]&&d!==Bt["0102"]||"BOTH"===i&&"BOTH"!==m?(h=!1,f=!0):c&&C()):h=!1}return h?{licenseKey:s,valid:h,expiry:de.formatDate(g),expired:p,version:l,isTrial:c,trialExpired:u,incorrectLicenseType:f,currentLicenseType:i,suppliedLicenseType:m}:{licenseKey:s,valid:h,incorrectLicenseType:f,currentLicenseType:i,suppliedLicenseType:m}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!!this.watermarkMessage?.length}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const i=(this.document.defaultView||window).location,{hostname:r=""}=i;return r}isForceWatermark(){const i=(this.document.defaultView||window).location,{pathname:r}=i;return!!r&&-1!==r.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(s){const r=s.getDate(),a=s.getMonth(),n=s.getFullYear();return r+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+n}static getGridReleaseDate(){return new Date(parseInt(de.decode(de.RELEASE_INFORMATION),10))}static decode(s){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let a,n,l,c,d,h,u,r="",p=0;const g=s.replace(/[^A-Za-z0-9+/=]/g,"");for(;p<g.length;)c=i.indexOf(g.charAt(p++)),d=i.indexOf(g.charAt(p++)),h=i.indexOf(g.charAt(p++)),u=i.indexOf(g.charAt(p++)),a=c<<2|d>>4,n=(15&d)<<4|h>>2,l=(3&h)<<6|u,r+=String.fromCharCode(a),64!=h&&(r+=String.fromCharCode(n)),64!=u&&(r+=String.fromCharCode(l));return r=de.utf8_decode(r),r}static utf8_decode(s){s=s.replace(/rn/g,"n");let i="";for(let r=0;r<s.length;r++){const a=s.charCodeAt(r);a<128?i+=String.fromCharCode(a):a>127&&a<2048?(i+=String.fromCharCode(a>>6|192),i+=String.fromCharCode(63&a|128)):(i+=String.fromCharCode(a>>12|224),i+=String.fromCharCode(a>>6&63|128),i+=String.fromCharCode(63&a|128))}return i}static setChartsLicenseManager(s){this.chartsLicenseManager=s,this.chartsLicenseManager?.setLicenseKey(this.licenseKey,!0)}static setLicenseKey(s){this.licenseKey=s,this.chartsLicenseManager?.setLicenseKey(s,!0)}static extractBracketedInformation(s){if(!s.includes("["))return["legacy",!1,void 0];const i=s.match(/\[(.*?)\]/g).map(c=>c.replace("[","").replace("]",""));if(!i||0===i.length)return["legacy",!1,void 0];const r=1===i.filter(c=>"TRIAL"===c).length,a=i.filter(c=>0===c.indexOf("v"))[0];return[a?a.replace("v",""):"legacy",r,Bt[i.filter(c=>Bt[c])[0]]]}centerPadAndOutput(s){console.error(s.padStart((this.totalMessageLength-s.length)/2+s.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(s,i="*",r=""){console.error(s.padEnd(this.totalMessageLength-r.length,i)+r)}outputInvalidLicenseKey(s,i,r){s?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${r} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${vi}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${vi}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(s,i,r){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${r} expired on ${s}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(s){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${s} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(s,i,r,a){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${r} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${a} released before ${s}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};return e.RELEASE_INFORMATION="MTc1MDY2MDA2NjA0Ng==",e})(),En={tag:"div",cls:"ag-watermark",children:[{tag:"div",ref:"eLicenseTextRef",cls:"ag-watermark-text"}]},Ln={selector:"AG-WATERMARK",component:class extends o.uAl{constructor(){super(En),this.eLicenseTextRef=o.dRA,this.registerCSS('.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5QjlCOUIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOUI5QjlCIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}')}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.textContent=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCss("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}},R="34.0.0",B={moduleName:"EnterpriseCore",version:R,beans:[class extends o.XQb{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new ut((0,o.BxM)(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new ut(null).getLicenseDetails(e)}getWatermarkSelector(){return Ln}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){ut.setLicenseKey(e)}static setChartsLicenseManager(e){ut.setChartsLicenseManager(e)}}],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]},Wi=class extends o.uAl{constructor(e){super(function wd(e){const t=e.cssIdentifier||"default";return{tag:"div",cls:`ag-panel ag-${t}-panel`,attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eTitleBar",cls:`ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable`,children:[{tag:"span",ref:"eTitle",cls:`ag-panel-title-bar-title ag-${t}-panel-title-bar-title`},{tag:"div",ref:"eTitleBarButtons",cls:`ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons`}]},{tag:"div",ref:"eContentWrapper",cls:`ag-panel-content-wrapper ag-${t}-panel-content-wrapper`}]}}(e)),this.config=e,this.closable=!0,this.eContentWrapper=o.dRA,this.eTitleBar=o.dRA,this.eTitleBarButtons=o.dRA,this.eTitle=o.dRA,this.registerCSS(".ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-panel-title-bar-text-color);cursor:default;display:flex;flex:none;font-weight:var(--ag-panel-title-bar-font-weight);height:var(--ag-header-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-panel-title-bar-button{color:var(--ag-panel-title-bar-icon-color);cursor:pointer}:where(.ag-ltr) .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{flex:1 1 auto}.ag-panel-title-bar-buttons{display:flex}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}:where(.ag-dragging-fill-handle) .ag-dialog,:where(.ag-dragging-range-handle) .ag-dialog{opacity:.7;pointer-events:none}")}postConstruct(){const{component:e,closable:t,hideTitleBar:s,title:i,minWidth:r=250,width:a,minHeight:n=250,height:l,centered:c,popup:d,x:h,y:u}=this.config;this.positionableFeature=new o.qyQ(this.getGui(),{minWidth:r,width:a,minHeight:n,height:l,centered:c,x:h,y:u,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const p=this.getGui();e&&this.setBodyComponent(e),s?(0,o.nl0)(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(t??this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:g=>{if(p.contains(g.relatedTarget)||p.contains((0,o.UlD)(this.beans))||this.eTitleBarButtons.contains(g.target))return void g.preventDefault();const f=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");f&&f.focus()}}),(!d||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const t=this.closeButtonComp=new o.uAl({tag:"div",cls:"ag-button"});this.createBean(t);const s=t.getGui(),i=(0,o.asF)("close",this.beans);i.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(i),this.addTitleBarButton(t),t.addManagedElementListeners(s,{click:this.onBtClose.bind(this)})}else if(this.closeButtonComp){const t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const s=this.eTitleBarButtons,i=s.children,r=i.length;null==t&&(t=r),t=Math.max(0,Math.min(t,r)),e.addCss("ag-panel-title-bar-button");const a=e.getGui();0===t?s.insertAdjacentElement("afterbegin",a):t===r?s.insertAdjacentElement("beforeend",a):i[t-1].insertAdjacentElement("afterend",a),e.setParentComponent(this)}getBodyHeight(){return(0,o.NUe)(this.eContentWrapper)}getBodyWidth(){return(0,o.Wd2)(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&(0,o.K05)(e)&&this.close(),super.destroy()}},bt=class extends Wi{constructor(e){super({...e,popup:!0}),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){const e=this.getGui(),{movable:t,resizable:s,maximizable:i,modal:r,postProcessPopupParams:a}=this.config;if(this.addCss("ag-dialog"),super.postConstruct(),a){const{type:n,eventSource:l,column:c,mouseEvent:d,rowNode:h}=a;this.popupSvc?.callPostProcessPopup(n,e,l,d,c,h)}if(this.tabGuardFeature=this.createManagedBean(new o.bVm(this)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{this.popupSvc?.bringPopupToFront(e)},onTabKeyDown:n=>{if(r)return;const l=n.shiftKey,c=(0,o.ey2)(this.beans,e,!1,l);(!c||this.tabGuardFeature.getTabGuardCtrl().isTabGuard(c))&&(0,o.hHe)(this.beans,l)&&n.preventDefault()}}),t&&this.setMovable(t),i&&this.setMaximizable(i),s&&this.setResizable(s),!this.config.modal){const n=this.beans.ctrlsSvc.get("gridCtrl");n.addFocusableContainer(this),this.addDestroyFunc(()=>n.removeFocusableContainer(this))}}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:s,title:i,afterGuiAttached:r}=this.config,a=this.getLocaleTextFunc(),n=this.popupSvc?.addPopup({modal:s,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:i||a("ariaLabelDialog","Dialog"),afterGuiAttached:r});n&&(this.close=n.hideFunc)}onClosed(e){this.destroy(),this.config.closedCallback?.(e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:s,width:i,height:r}=this.lastPosition;this.setWidth(i),this.setHeight(r),this.positionableFeature.offsetElement(t,s)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){(0,o.nl0)(this.maximizeIcon,!this.isMaximized),(0,o.nl0)(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const s=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),s.addManagedElementListeners(s.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(s,0),this.maximizeListeners.push(...this.addManagedElementListeners(t,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new o.uAl({tag:"div",cls:"ag-dialog-button"})),t=e.getGui();return this.maximizeIcon=(0,o.asF)("maximize",this.beans),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=(0,o.asF)("minimize",this.beans),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}},it=class extends o.aJZ{constructor(e){super(function Fd(e){return{tag:"div",cls:`ag-virtual-list-viewport ag-${e}-virtual-list-viewport`,role:"presentation",children:[{tag:"div",ref:"eContainer",cls:`ag-virtual-list-container ag-${e}-virtual-list-container`}]}}(e?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=o.dRA,this.awaitStableCallbacks=[];const{cssIdentifier:t="default",ariaRole:s="listbox",listName:i,moveItemCallback:r}=e||{};this.cssIdentifier=t,this.ariaRole=s,this.listName=i,this.moveItemCallback=r}wireBeans(e){this.environment=e.environment}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.refreshAriaProperties(),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanged.bind(this)})}onGridStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}refreshAriaProperties(){const t=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),s=this.eContainer;(0,o.lXX)(s,this.model?.getRowCount()>0?this.ariaRole:"presentation"),(0,o.PIC)(s,t)}addResizeObserver(){const t=(0,o.QSI)(this.beans,this.getGui(),()=>(0,o.Arb)(this.beans,()=>this.drawVirtualRows()));this.addDestroyFunc(t)}focusInnerElement(e){return this.focusRow(e?this.model.getRowCount()-1:0),!0}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=(0,o.AH5)(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){const{key:t,shiftKey:s}=e;switch(t){case o.DDm.UP:case o.DDm.DOWN:{const i=t===o.DDm.UP;e.preventDefault(),s?this.moveItem(i):this.navigate(i)}break;case o.DDm.PAGE_HOME:case o.DDm.PAGE_END:case o.DDm.PAGE_UP:case o.DDm.PAGE_DOWN:null!==this.navigateToPage(t)&&e.preventDefault()}}onTabKeyDown(e){(0,o.rYD)(e),this.forceFocusOutOfContainer(e.shiftKey)}getNextRow(e){if(null==this.lastFocusedRowIndex)return;const t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?void 0:t}moveItem(e){if(!this.moveItemCallback)return;const t=this.getComponentAt(this.lastFocusedRowIndex);t&&this.moveItemCallback(t,e)}navigate(e){const t=this.getNextRow(e);void 0!==t&&this.focusRow(t)}navigateToPage(e,t="focused"){let s=!1;"focused"===t&&(t=this.getLastFocusedRow(),s=!0);const i=this.model.getRowCount()-1;let r=-1;return e===o.DDm.PAGE_HOME?r=0:e===o.DDm.PAGE_END?r=i:e===o.DDm.PAGE_DOWN?r=Math.min(t+this.pageSize,i):e===o.DDm.PAGE_UP&&(r=Math.max(t-this.pageSize,0)),-1===r?null:(s?this.focusRow(r):this.ensureIndexVisible(r),r)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),(0,o.Arb)(this.beans,()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()}))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,s)=>e(t.rowComponent,s))}getItemHeight(){return this.isHeightFromTheme?this.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e,t=!0){const s=this.model.getRowCount();if("number"!=typeof e||e<0||e>=s)return(0,o.ujB)(229,{index:e}),!1;const i=e*this.rowHeight,r=i+this.rowHeight,a=this.getGui(),n=a.scrollTop,l=a.offsetHeight,d=t?0:this.rowHeight,u=n+l<r-d;return n>i+d?(a.scrollTop=i,!0):!!u&&(a.scrollTop=r-l,!0)}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height=t*this.rowHeight+"px",this.refreshAriaProperties(),this.awaitStable(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;const t=this.model.getRowCount();(0,o.XfX)(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{if(!this.isAlive())return;const s=this.awaitStableCallbacks;this.awaitStableCallbacks=[],s.forEach(i=>i())})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"==typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),s=t.scrollTop,i=s+t.offsetHeight;if(s===i)this.clearVirtualRows();else{const r=Math.floor(s/this.rowHeight),a=Math.floor(i/this.rowHeight);this.pageSize=Math.floor((i-s)/this.rowHeight),this.ensureRowsRendered(r,a,e)}}ensureRowsRendered(e,t,s){this.renderedRows.forEach((i,r)=>{(r<e||r>t)&&r!==this.lastFocusedRowIndex&&this.removeRow(r)}),s&&this.refreshRows();for(let i=e;i<=t;i++)this.renderedRows.has(i)||i<this.model.getRowCount()&&this.insertRow(i)}insertRow(e){const t=this.model.getRow(e),i=(0,o.UCw)({tag:"div",cls:`ag-virtual-list-item ag-${this.cssIdentifier}-virtual-list-item`,role:"tree"===this.ariaRole?"treeitem":"option",attrs:{tabindex:"-1"}});(0,o.awo)(i,this.model.getRowCount()),(0,o.c7o)(i,e+1),i.style.height=`${this.rowHeight}px`,i.style.top=this.rowHeight*e+"px";const r=this.componentCreator(t,i);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:r,eDiv:i,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,s)=>{if(s>=e)this.removeRow(s);else{const i=this.model.getRow(s);this.model.areRowsEqual?.(t.value,i)?this.componentUpdater(i,t.rowComponent):this.removeRow(s)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}},Rs="ag-list-item-hovered",ji=class extends o.XQb{constructor(e,t,s){super(),this.comp=e,this.virtualList=t,this.params=s,this.currentDragValue=null,this.lastHoveredListItem=null}wireBeans(e){this.dragAndDrop=e.dragAndDrop}postConstruct(){this.addManagedListeners(this.params.eventSource,{[this.params.listItemDragStartEvent]:this.listItemDragStart.bind(this),[this.params.listItemDragEndEvent]:this.listItemDragEnd.bind(this)}),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const e={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave(),onDragCancel:()=>this.onDragCancel()};this.dragAndDrop?.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new o.MSA({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),s=this.virtualList.getComponentAt(t.rowIndex);if(!s)return;const i=s.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,(0,o.eUX)(i,Rs),(0,o.eUX)(i,`ag-item-highlight-${t.position}`))}getListDragItem(e){const t=this.virtualList.getGui(),s=parseFloat(window.getComputedStyle(t).paddingTop),i=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),a=Math.max(0,(e.y-s+r)/i),n=this.params.getNumRows(this.comp)-1,l=0|Math.min(n,a);return{rowIndex:l,position:Math.round(a)>a||a>n?"bottom":"top",component:this.virtualList.getComponentAt(l)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearDragProperties())}onDragCancel(){this.clearDragProperties()}onDragLeave(){this.clearDragProperties()}clearDragProperties(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${Rs}`).forEach(t=>{[Rs,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(s=>{t.classList.remove(s)})}),this.lastHoveredListItem=null}};function Is(e,t){if(!t)return null;const s=(0,o.YE1)(e),i=s.indexOf(t);if(-1===i)return null;let r=-1;for(let a=i-1;a>=0;a--)if(s[a].classList.contains(o.pA9.TAB_GUARD_TOP)){r=a;break}return r<=0?null:s[r-1]}var Nh={tag:"div"},tr=class extends o.uAl{constructor(){super(Nh)}init(e){this.params=e,this.cssClassPrefix=this.params.cssClassPrefix??"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){const{checked:e,subMenu:t}=this.params,s=this.getGui();e&&(0,o.cPC)(s,e),t&&(0,o.oAJ)(s,!1)}addIcon(){if(this.params.isCompact)return;const e=(0,o.UCw)({tag:"span",ref:"eIcon",cls:`${this.getClassName("part")} ${this.getClassName("icon")}`,role:"presentation"}),{checked:t,icon:s}=this.params;t?e.appendChild((0,o.asF)("check",this.beans)):s&&((0,o.X17)(s)?e.appendChild(s):"string"==typeof s?e.innerHTML=s:(0,o.ujB)(227)),this.getGui().appendChild(e)}addName(){const e=(0,o.UCw)({tag:"span",ref:"eName",cls:`${this.getClassName("part")} ${this.getClassName("text")}`,children:this.params.name||""});this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=(0,o.UCw)({tag:"span",ref:"eShortcut",cls:`${this.getClassName("part")} ${this.getClassName("shortcut")}`,children:this.params.shortcut||""});this.getGui().appendChild(e)}addSubMenu(){const e=(0,o.UCw)({tag:"span",ref:"ePopupPointer",cls:`${this.getClassName("part")} ${this.getClassName("popup-pointer")}`}),t=this.getGui();if(this.params.subMenu){const s=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild((0,o.asF)(s,this.beans))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}},Qt={moduleName:"MenuItem",version:R,userComponents:{agMenuItem:tr},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:['.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:solid var(--ag-border-width) var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}']},zh={tag:"div",cls:"ag-column-select-header",role:"presentation",children:[{tag:"div",ref:"eExpand",cls:"ag-column-select-header-icon"},{tag:"ag-checkbox",ref:"eSelect",cls:"ag-column-select-header-checkbox"},{tag:"ag-input-text-field",ref:"eFilterTextField",cls:"ag-column-select-header-filter-wrapper"}]},Wh={selector:"AG-PRIMARY-COLS-HEADER",component:class extends o.uAl{constructor(){super(zh,[o.DXf,o.n1z]),this.eExpand=o.dRA,this.eSelect=o.dRA,this.eFilterTextField=o.dRA}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:t=>{t.key===o.DDm.SPACE&&(t.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});const e=this.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle All Columns Visibility")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.toggleCss("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.toggleCss("ag-column-select-column-readonly",t),this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){const e=this.beans;this.eExpand.appendChild(this.eExpandChecked=(0,o.asF)("columnSelectOpen",e)),this.eExpand.appendChild(this.eExpandUnchecked=(0,o.asF)("columnSelectClosed",e)),this.eExpand.appendChild(this.eExpandIndeterminate=(0,o.asF)("columnSelectIndeterminate",e)),this.setExpandState(0)}showOrHideOptions(){const e=this.params,t=!e.suppressColumnFilter,s=!e.suppressColumnSelectAll,i=!e.suppressColumnExpandAll,r=!!this.beans.colModel.colDefCols?.treeDepth,a=this.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),(0,o.nl0)(this.eFilterTextField.getGui(),t),(0,o.nl0)(this.eSelect.getGui(),s),(0,o.nl0)(this.eExpand,i&&r)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=(0,o.pkA)(this,()=>{const e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})},300)),this.onFilterTextChangedDebounced()}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:0===this.expandState?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,(0,o.nl0)(this.eExpandChecked,0===e),(0,o.nl0)(this.eExpandUnchecked,1===e),(0,o.nl0)(this.eExpandIndeterminate,2===e)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}}};function rt(e){return!!e&&typeof e.children<"u"}function Re(e){return rt(e)?e.groupId:e.colId}function sr(e,t,s){if(!rt(e))return!0;const r=e,a=s;if(((n,l)=>{const d=n.children.map(Re).includes(Re(l)),h=(0,o.GXs)(n.children),u=h&&Re(h)!==Re(l);return d&&u})(r,a)||r.groupId===t&&!r.children.map(Re).includes(Re(a)))return r.children.push(a),!0;for(let n=r.children.length-1;n>=0&&!sr(r.children[n],t,s);n--);return!1}function _h(e){const t=(r,a)=>rt(r)&&rt(a)&&Re(r)===Re(a),s=(r,a)=>{if(!rt(a))return r;const n=r,l=a;return l.children&&l.groupId&&sr(n,l.groupId,l.children[0])||l.children.forEach(c=>s(n,c)),n},i=[];for(let r=1;r<=e.length;r++){const a=e[r-1],n=e[r];t(a,n)?e[r]=s(a,n):i.push(a)}return i}var ar=class{constructor(e,t,s,i=!1,r){this.displayName=e,this.depth=s,this.group=i,this.localEventService=new o.$UK,i?(this.columnGroup=t,this._expanded=r,this.children=[]):this.column=t}get expanded(){return!!this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};function nr(e,t,s,i){const r=function Kh(e){const t=[],s=i=>{i.forEach(r=>{r.passesFilter&&(r.group?s(r.children):t.push(r.column))})};return s(e),t}(t);or(e,r,s,i)}function or(e,t,s,i){e.colModel.isPivotMode()?function Yh(e,t,s,i){!function Xh(e,t,s,i){const r=[];t.forEach(s?c=>{if(!c.isAnyFunctionActive())if(c.isAllowValue()){const d="string"==typeof c.getAggFunc()?c.getAggFunc():e.aggFuncSvc?.getDefaultAggFunc(c);r.push({colId:c.getId(),aggFunc:d})}else c.isAllowRowGroup()?r.push({colId:c.getId(),rowGroup:!0}):c.isAllowPivot()&&r.push({colId:c.getId(),pivot:!0})}:c=>{(c.isPivotActive()||c.isRowGroupActive()||c.isValueActive())&&r.push({colId:c.getId(),pivot:!1,rowGroup:!1,aggFunc:null})}),r.length>0&&(0,o.l8G)(e,{state:r},i)}(e,t,s,i)}(e,t,s,i):function $h(e,t,s,i){const r=[];t.forEach(a=>{a.getColDef().lockVisible||a.isVisible()!=s&&r.push({colId:a.getId(),hide:!s})}),r.length>0&&(0,o.l8G)(e,{state:r},i)}(e,t,s,i)}function lr(e,t){const{columns:s,visibleState:i,pivotState:r,eventType:a}=t,n=s.map(l=>{const c=l.getColId();if(e.colModel.isPivotMode()){const d=r?.[c];return{colId:c,pivot:d?.pivot,rowGroup:d?.rowGroup,aggFunc:d?.aggFunc}}return{colId:c,hide:!i?.[c]}});(0,o.l8G)(e,{state:n},a)}function cr(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}function St(e,t){const{gos:s,rowGroupColsSvc:i}=t;if(!i||!e)return!1;const r=s.get("groupLockGroupColumns");return!(!e.isRowGroupActive()||0===r)&&(-1===r||r>i.columns.findIndex(n=>n.getColId()===e.getColId()))}var Qh=class extends o.aJZ{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===o.DDm.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}},Jh={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},Zh={tag:"div",cls:"ag-menu",role:"presentation"},ks=class extends o.XQb{constructor(){super(...arguments),this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory,this.registry=e.registry}init(e){const{menuItemDef:t,isAnotherSubMenuOpen:s,level:i,childComponent:r,contextParams:a}=e;return this.params=e.menuItemDef,this.level=i,this.isAnotherSubMenuOpen=s,this.childComponent=r,this.contextParams=a,this.cssClassPrefix=this.params.menuItemParams?.cssClassPrefix??"ag-menu-option",function qh(e,t,s){return e.getCompDetails(t,Jh,"agMenuItem",s,!0)}(this.userCompFactory,this.params,(0,o.AuN)(this.gos,{...t,level:i,isAnotherSubMenuOpen:s,openSubMenu:l=>this.openSubMenu(l),closeSubMenu:()=>this.closeSubMenu(),closeMenu:l=>this.closeMenu(l),updateTooltip:(l,c)=>this.refreshTooltip(l,c),onItemActivated:()=>this.onItemActivated()}))?.newAgStackInstance().then(l=>{this.menuItemComp=l;const c=l.configureDefaults?.();c&&this.configureDefaults(!0===c?void 0:c)})??o.oY$.resolve()}addListeners(e,t){t?.suppressClick||this.addManagedElementListeners(e,{click:s=>this.onItemSelected(s)}),t?.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:s=>{(s.key===o.DDm.ENTER||s.key===o.DDm.SPACE)&&(s.preventDefault(),this.onItemSelected(s))}}),t?.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:s=>{s.stopPropagation(),s.preventDefault()}}),t?.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1,t){if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const s=(0,o.UCw)(Zh);this.eSubMenuGui=s;let i,r=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const d=this.createBean(new Qh(this.childComponent));d.setParentComponent(this);const h=d.getGui(),u="mouseenter",p=()=>this.cancelDeactivate();h.addEventListener(u,p),i=()=>{h.removeEventListener(u,p),this.destroyBean(d)},s.appendChild(h),this.childComponent.afterGuiAttached&&(r=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const d=this.createBean(new wt(this.level+1,this.contextParams));d.setParentComponent(this),d.addMenuItems(this.params.subMenu),s.appendChild(d.getGui()),this.addManagedListeners(d,{closeMenu:h=>this.dispatchLocalEvent(h)}),d.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),i=()=>this.destroyBean(d),e&&(r=()=>{d.activateFirstItem(),this.subMenuIsOpening=!1})}const{popupSvc:a}=this,l=this.getLocaleTextFunc(),c=a?.addPopup({modal:!0,eChild:s,positionCallback:()=>{const d=this.eGui,{column:h,node:u}=this.contextParams;a?.positionPopupForMenu({eventSource:d,ePopup:s,event:t instanceof MouseEvent?t:void 0,column:h,node:u})},anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:r});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{c&&c.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),i(),this.menuItemComp.setExpanded?.(!1),this.eSubMenuGui=void 0},this.menuItemComp.setExpanded?.(!0)}setAriaExpanded(e){this.suppressAria||(0,o.oAJ)(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e,t){this.cancelActivate(),(!this.params.disabled||t)&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),this.menuItemComp.setActive?.(!0),this.suppressFocus||(0,o.H9T)(this.beans,()=>this.eGui.focus({preventScroll:!t})),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),this.menuItemComp.setActive?.(!1),this.isActive=!1,this.subMenuIsOpen&&this.closeSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){this.menuItemComp.select?.(),this.params.action?this.beans.frameworkOverrides.wrapOutgoing(()=>this.params.action((0,o.AuN)(this.gos,{...this.contextParams}))):this.openSubMenu(e&&"keydown"===e.type,e),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){const t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){this.dispatchLocalEvent({type:"menuItemActivated",menuItem:this})}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),this.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){if(!this.menuItemComp)return void setTimeout(()=>this.configureDefaults(e));let t=this.menuItemComp.getGui();const{suppressRootStyles:s,suppressTooltip:i,suppressAria:r,suppressTabIndex:a,suppressFocus:n}=e||{},l=this.menuItemComp.getRootElement?.();l&&(s||t.classList.add("ag-menu-option-custom"),t=l),this.eGui=t,this.suppressRootStyles=!!s,this.suppressRootStyles||(t.classList.add(this.cssClassPrefix),this.params.cssClasses?.forEach(c=>t.classList.add(c)),this.params.disabled&&t.classList.add(`${this.cssClassPrefix}-disabled`)),i||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!r,this.suppressAria||((0,o.lXX)(t,"menuitem"),this.params.subMenu&&(0,o.HD3)(t,this.params.subMenuRole??"menu"),this.params.disabled&&(0,o.TGw)(t,!0)),a||t.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(t,e),this.suppressFocus=!!n}refreshTooltip(e,t){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;const s=this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t});s&&(this.tooltipFeature=this.createBean(s))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),this.menuItemComp?.destroy?.(),super.destroy()}},wt=class extends o.aJZ{constructor(e=0,t){super({tag:"div",cls:"ag-menu-list",role:"menu"}),this.level=e,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>(0,o.H9T)(this.beans,()=>this.handleKeyDown(e)),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){this.getParentComponent()?.getGui()?.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case o.DDm.UP:case o.DDm.RIGHT:case o.DDm.DOWN:case o.DDm.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case o.DDm.ESCAPE:this.closeIfIsChild()&&(0,o.rYD)(e)}}handleFocusIn(e){const t=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(t)&&(this.getGui().contains(t)||this.activeMenuItem?.getSubMenuGui()?.contains(t))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){const t=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(t)||this.activeMenuItem.getSubMenuGui()?.contains(t)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&o.oY$.all(e.map(t=>"separator"===t?o.oY$.resolve({eGui:this.createSeparator()}):"string"==typeof t?((0,o.ujB)(228,{menuItemOrString:t}),o.oY$.resolve({eGui:null})):this.addItem(t))).then(t=>{(t??[]).forEach(s=>{s?.eGui&&(this.appendChild(s.eGui),s.comp&&this.menuItems.push(s.comp))})})}addItem(e){const t=this.createManagedBean(new ks);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(s=>s.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:s=>{this.dispatchLocalEvent(s)},menuItemActivated:s=>{this.activeMenuItem&&this.activeMenuItem!==s.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=s.menuItem}}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}createSeparator(){const e={tag:"div",cls:"ag-menu-separator-part"};return(0,o.UCw)({tag:"div",cls:"ag-menu-separator",attrs:{"aria-hidden":"true"},children:[e,e,e,e]})}handleNavKey(e){switch(e){case o.DDm.UP:case o.DDm.DOWN:{const s=this.findNextItem(e===o.DDm.UP);return void(s&&s!==this.activeMenuItem&&s.activate(!1,!0))}}e===(this.gos.get("enableRtl")?o.DDm.RIGHT:o.DDm.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof ks)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=[...this.menuItems];if(!t.length)return;if(!this.activeMenuItem)return e?(0,o.GXs)(t):t[0];e&&t.reverse();let s,i=!1;for(const r of t){if(i){s=r;break}r===this.activeMenuItem&&(i=!0)}return i&&!s?t[0]:s||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},ur=class extends o.uAl{constructor(e,t,s){super({tag:"div",cls:"ag-menu"}),this.column=e,this.mouseEvent=t,this.parentEl=s,this.displayName=null}postConstruct(){const{column:e,beans:{colNames:t}}=this;let s;if(this.initializeProperties(e),s=(0,o.R39)(e)?t.getDisplayNameForColumn(e,"columnToolPanel"):t.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),this.displayName=s,this.buildMenuItemMap(),this.isActive()){this.mouseEvent.preventDefault();const i=this.getMappedMenuItems();if(0===i.length)return;this.displayContextMenu(i)}}initializeProperties(e){let t;t=(0,o.b6I)(e)?e.getLeafColumns():[e],this.columns=t;const s=this.beans.colModel.isPivotMode();this.allowScrollIntoView=!s&&t.some(this.isColumnValidForScrollIntoView),this.allowGrouping=t.some(i=>i.isPrimary()&&i.isAllowRowGroup()),this.allowValues=t.some(i=>i.isPrimary()&&i.isAllowValue()),this.allowPivoting=s&&t.some(i=>i.isPrimary()&&i.isAllowPivot())}buildMenuItemMap(){const e=this.getLocaleTextFunc(),{beans:t,displayName:s}=this,{rowGroupColsSvc:i,valueColsSvc:r,pivotColsSvc:a,colModel:n}=t,l=new Map;this.menuItemMap=l;const c=n.isPivotMode();l.set("scrollIntoView",{allowedFunction:d=>!d.isPinned()&&!c&&this.isColumnValidForScrollIntoView(d),activeFunction:()=>!1,activateLabel:()=>e("scrollColumnIntoView",`Scroll ${s} into View`,[s]),activateFunction:()=>{const d=this.columns.find(this.isColumnValidForScrollIntoView);d&&this.beans.ctrlsSvc.getScrollFeature().ensureColumnVisible(d)},deActivateFunction:()=>{},addIcon:"ensureColumnVisible"}),l.set("rowGroup",{allowedFunction:d=>d.isPrimary()&&d.isAllowRowGroup()&&!St(d,t),activeFunction:d=>d.isRowGroupActive(),activateLabel:()=>`${e("groupBy","Group by")} ${s}`,deactivateLabel:()=>`${e("ungroupBy","Un-Group by")} ${s}`,activateFunction:()=>i?.setColumns(this.addColumnsToList(i.columns),"toolPanelUi"),deActivateFunction:()=>i?.setColumns(this.removeColumnsFromList(i.columns),"toolPanelUi"),addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),l.set("value",{allowedFunction:d=>d.isPrimary()&&d.isAllowValue(),activeFunction:d=>d.isValueActive(),activateLabel:()=>e("addToValues",`Add ${s} to values`,[s]),deactivateLabel:()=>e("removeFromValues",`Remove ${s} from values`,[s]),activateFunction:()=>r?.setColumns(this.addColumnsToList(r.columns),"toolPanelUi"),deActivateFunction:()=>r?.setColumns(this.removeColumnsFromList(r.columns),"toolPanelUi"),addIcon:"valuePanel",removeIcon:"valuePanel"}),l.set("pivot",{allowedFunction:d=>c&&d.isPrimary()&&d.isAllowPivot(),activeFunction:d=>d.isPivotActive(),activateLabel:()=>e("addToLabels",`Add ${s} to labels`,[s]),deactivateLabel:()=>e("removeFromLabels",`Remove ${s} from labels`,[s]),activateFunction:()=>a?.setColumns(this.addColumnsToList(a.columns),"toolPanelUi"),deActivateFunction:()=>a?.setColumns(this.removeColumnsFromList(a.columns),"toolPanelUi"),addIcon:"pivotPanel",removeIcon:"pivotPanel"})}isColumnValidForScrollIntoView(e){if(!e.isVisible())return!1;const s=e.getParent();return!s||-1!==s.getDisplayedChildren()?.indexOf(e)}addColumnsToList(e){return[...e].concat(this.columns.filter(t=>-1===e.indexOf(t)))}removeColumnsFromList(e){return e.filter(t=>-1===this.columns.indexOf(t))}displayContextMenu(e){const t=this.getGui(),s=this.createBean(new wt),i=this.getLocaleTextFunc();let r=()=>{};t.appendChild(s.getGui()),s.addMenuItems(e),s.addManagedListeners(s,{closeMenu:()=>{this.parentEl.focus(),r()}});const a=this.beans.popupSvc,n=a.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>(0,o.YtT)(s.getGui()),ariaLabel:i("ariaLabelContextMenu","Context Menu"),closedCallback:l=>{l instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(s)}});n&&(r=n.hideFunc),a.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})}isActive(){return this.allowScrollIntoView||this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[],{menuItemMap:t,columns:s,displayName:i,beans:r}=this;for(const a of t.values()){const n=s.some(c=>a.allowedFunction(c)&&!a.activeFunction(c)),l=s.some(c=>a.allowedFunction(c)&&a.activeFunction(c));n&&e.push({name:a.activateLabel(i),icon:(0,o.asF)(a.addIcon,r,null),action:()=>a.activateFunction()}),l&&a.removeIcon&&a.deactivateLabel&&e.push({name:a.deactivateLabel(i),icon:(0,o.asF)(a.removeIcon,r,null),action:()=>a.deActivateFunction?.()})}return e}},eu={tag:"div",cls:"ag-column-select-column-group",children:[{tag:"span",ref:"eColumnGroupIcons",cls:"ag-column-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-column-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-column-group-opened-icon"}]},{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},pr=class extends o.uAl{constructor(e,t,s,i){super(),this.modelItem=e,this.allowDragging=t,this.eventType=s,this.focusWrapper=i,this.cbSelect=o.dRA,this.eLabel=o.dRA,this.eGroupOpenedIcon=o.dRA,this.eGroupClosedIcon=o.dRA,this.eColumnGroupIcons=o.dRA,this.processingColumnStateChange=!1;const{columnGroup:r,depth:a,displayName:n}=e;this.columnGroup=r,this.columnDepth=a,this.displayName=n}postConstruct(){this.setTemplate(eu,[o.DXf]);const{beans:e,cbSelect:t,eLabel:s,displayName:i,columnDepth:r,modelItem:a,focusWrapper:n,columnGroup:l}=this,{registry:c,gos:d}=e,h=(0,o.asF)("columnDrag",e);this.eDragHandle=h,h.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const u=t.getGui(),p=t.getInputElement();u.insertAdjacentElement("afterend",h),p.setAttribute("tabindex","-1"),s.textContent=i??"",this.setupExpandContract(),this.addCss("ag-column-select-indent-"+r),this.getGui().style.setProperty("--ag-indentation-level",String(r)),this.tooltipFeature=this.createOptionalManagedBean(c.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumnGroup",shouldDisplayTooltip:(0,o.qmn)(d,()=>s)})),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(s,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(a,{expandedChanged:this.onExpandChanged.bind(this)}),this.addManagedListeners(n,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),(0,o.Xq0)(l.getColGroupDef(),d,null,l).forEach(f=>this.toggleCss(f,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=()=>this.tooltipFeature?.setTooltipAndRefresh(e.headerTooltip);t(),this.addManagedEventListeners({newColumnsLoaded:t})}handleKeyDown(e){switch(e.key){case o.DDm.LEFT:e.preventDefault(),this.modelItem.expanded=!1;break;case o.DDm.RIGHT:e.preventDefault(),this.modelItem.expanded=!0;break;case o.DDm.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}}onContextMenu(e){const{columnGroup:t,gos:s}=this;if(s.get("functionsReadOnly"))return;const i=this.createBean(new ur(t,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}addVisibilityListenersToAllChildren(){const e=this.onColumnStateChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{this.addManagedListeners(t,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})})}setupDragging(){if(!this.allowDragging)return void(0,o.nl0)(this.eDragHandle,!1);const e=this.beans,{gos:t,eventSvc:s,dragAndDrop:i}=e;let r=!t.get("suppressDragLeaveHidesColumns");const a={type:o.qRA.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>r?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{r=!t.get("suppressDragLeaveHidesColumns"),s.dispatchEvent({type:"columnPanelItemDragStart",column:this.columnGroup})},onDragStopped:()=>{s.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:n=>{r&&lr(e,{columns:this.columnGroup.getLeafColumns(),visibleState:n?.visibleState,pivotState:n?.pivotState,eventType:this.eventType})},onGridExit:()=>{r&&this.onChangeCommon(!1)}};i.addDragSource(a,!0),this.addDestroyFunc(()=>i.removeDragSource(a))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},s={};return e.forEach(i=>{const r=i.getId();t[r]=i.isVisible(),s[r]=cr(i)}),{columns:e,visibleState:t,pivotState:s}}setupExpandContract(){const{beans:e,eGroupClosedIcon:t,eGroupOpenedIcon:s,eColumnGroupIcons:i}=this;t.appendChild((0,o.fyk)("columnSelectClosed",e,null)),s.appendChild((0,o.fyk)("columnSelectOpen",e,null));const r=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(t,{click:r}),this.addManagedElementListeners(s,{click:r});const a=new o.MVO(i,!0);this.addManagedListeners(a,{tap:r}),this.addDestroyFunc(a.destroy.bind(a))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=s=>{s.forEach(i=>{i.passesFilter&&(i.group?t(i.children):e.push(i.column))})};return t(this.modelItem.children),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&nr(this.beans,this.modelItem.children,e,this.eventType)}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:s}=this,i=this.getLocaleTextFunc(),r=i("ariaColumnGroup","Column Group"),a=e.getValue(),n=void 0===a?i("ariaIndeterminate","indeterminate"):a?i("ariaVisible","visible"):i("ariaHidden","hidden"),l=i("ariaToggleVisibility","Press SPACE to toggle visibility");(0,o.PIC)(t,`${s} ${r}`),e.setInputAriaLabel(`${l} (${n})`),(0,o.TMe)(t,e.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0;const s=this.cbSelect;s.setValue(e),s.setReadOnly(t),this.toggleCss("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.beans.colModel.isPivotMode(),t=this.getVisibleLeafColumns();let s=0,i=0;if(t.forEach(r=>{!e&&r.getColDef().lockVisible||(this.isColumnChecked(r,e)?s++:i++)}),!(s>0&&i>0))return s>0}workOutReadOnlyValue(){const e=this.beans.colModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach(s=>{e?s.isAnyFunctionAllowed()&&t++:s.getColDef().lockVisible||t++}),0===t}isColumnChecked(e,t){if(t){const s=e.isPivotActive(),i=e.isRowGroupActive(),r=e.isValueActive();return s||i||r}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem;e.expanded=!e.expanded}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.expanded;(0,o.nl0)(this.eGroupClosedIcon,!e),(0,o.nl0)(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){(0,o.oAJ)(this.focusWrapper,this.modelItem.expanded)}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect,s=t.getValue();!t.isReadOnly()&&(e&&!s||!e&&s)&&t.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},Gs=e=>(0,o.b6I)(e)?e.getLeafColumns():e?[e]:[],gr=(e,t,s)=>!(!e.get("suppressMovableColumns")&&!t.colModel.isPivotMode()&&!s.find(({colDef:a})=>!!a.suppressMovable||!!a.lockPosition)),fr=(e,t,s)=>{if(!s)return;const{component:i}=s;let r=null,a="top"===s.position;if(i instanceof pr?(r=i.getColumns()[0],a=!0):i&&(r=i.column),!r)return;const n=((e,t,s,i)=>{if(!s||!t)return null;const r=e.colModel.getCols(),a=r.indexOf(s),n=i?a:a+1;return n-((e,t,s)=>{if(!t)return 0;const r=t.length;return e.indexOf(t[0])<s?r:0})(r,t,n)})(e,t,r,a);null!=n&&e.colMoves?.moveColumns(t,n,"toolPanelUi")},ru={tag:"div",cls:"ag-column-select-column",children:[{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},au=class extends o.uAl{constructor(e,t,s,i){super(),this.modelItem=e,this.allowDragging=t,this.groupsExist=s,this.focusWrapper=i,this.eLabel=o.dRA,this.cbSelect=o.dRA,this.processingColumnStateChange=!1;const{column:r,depth:a,displayName:n}=e;this.column=r,this.columnDepth=a,this.displayName=n}postConstruct(){this.setTemplate(ru,[o.DXf]);const{beans:e,cbSelect:t,displayName:s,eLabel:i,columnDepth:r,groupsExist:a,column:n,gos:l,focusWrapper:c}=this,d=(0,o.asF)("columnDrag",e);this.eDragHandle=d,d.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const h=t.getGui(),u=t.getInputElement();h.insertAdjacentElement("afterend",d),u.setAttribute("tabindex","-1"),i.textContent=s,a&&this.addCss("ag-column-select-add-group-indent"),this.addCss(`ag-column-select-indent-${r}`),this.getGui().style.setProperty("--ag-indentation-level",String(r)),this.tooltipFeature=this.createOptionalManagedBean(e.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"columnToolPanelColumn",getColDef:()=>n.getColDef(),shouldDisplayTooltip:(0,o.qmn)(l,()=>i)})),this.setupDragging();const p=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:p}),this.addManagedListeners(n,{columnValueChanged:p,columnPivotChanged:p,columnRowGroupChanged:p,visibleChanged:p}),this.addManagedListeners(c,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(i,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),(0,o.Xq0)(n.getColDef(),l,n,null).forEach(f=>this.toggleCss(f,!0))}getColumn(){return this.column}setupTooltip(){const e=()=>this.tooltipFeature?.setTooltipAndRefresh(this.column.getColDef().headerTooltip);e(),this.addManagedEventListeners({newColumnsLoaded:e})}onContextMenu(e){const{column:t,gos:s}=this;if(s.get("functionsReadOnly"))return;const i=this.createBean(new ur(t,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}handleKeyDown(e){e.key===o.DDm.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&or(this.beans,[this.column],e,"toolPanelUi"))}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:s}=this,i=this.getLocaleTextFunc(),r=i("ariaColumn","Column"),a=e.getValue()?i("ariaVisible","visible"):i("ariaHidden","hidden"),n=i("ariaToggleVisibility","Press SPACE to toggle visibility");(0,o.PIC)(t,`${s} ${r}`),this.cbSelect.setInputAriaLabel(`${n} (${a})`),(0,o.TMe)(t,e.getInputElement().id)}setupDragging(){const e=this.eDragHandle;if(!this.allowDragging)return void(0,o.nl0)(e,!1);const t=this.beans,{gos:s,eventSvc:i,dragAndDrop:r}=t;let a=!s.get("suppressDragLeaveHidesColumns");const n={type:o.qRA.ToolPanel,eElement:e,dragItemName:this.displayName,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{a=!s.get("suppressDragLeaveHidesColumns"),i.dispatchEvent({type:"columnPanelItemDragStart",column:this.column})},onDragStopped:()=>{i.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:l=>{a&&lr(t,{columns:[this.column],visibleState:l?.visibleState,pivotState:l?.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{a&&this.onChangeCommon(!1)}};r.addDragSource(n,!0),this.addDestroyFunc(()=>r.removeDragSource(n))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},s={[e]:cr(this.column)};return{columns:[this.column],visibleState:t,pivotState:s}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.beans.colModel.isPivotMode();if(e){const i=this.column.isAnyFunctionActive();this.cbSelect.setValue(i)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,s=!0;if(e){const i=this.gos.get("functionsReadOnly"),r=!this.column.isAnyFunctionAllowed();t=!i&&!r,s=t}else{const{enableRowGroup:i,enableValue:r,lockPosition:a,suppressMovable:n,lockVisible:l}=this.column.getColDef();t=!l,s=!!i||!!r||!(a||n)}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!s),this.toggleCss("ag-column-select-column-readonly",!s&&!t),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect;e!==t.getValue()&&(t.isReadOnly()||t.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){(0,o.ujB)(158)}},nu=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},cu={selector:"AG-PRIMARY-COLS-LIST",component:class extends o.uAl{constructor(){super({tag:"div",cls:"ag-column-select-list",role:"presentation"}),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1,this.skipRefocus=!1}wireBeans(e){this.colModel=e.colModel}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,t,s){this.params=e;const{suppressSyncLayoutWithGrid:i,contractColumnSelection:r,suppressColumnMove:a}=e;this.allowDragging=t,this.eventType=s,i||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});const n=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:n,columnPivotModeChanged:n,columnRowGroupChanged:n,columnValueChanged:n,columnVisible:n,newColumnsLoaded:n}),this.expandGroupsByDefault=!r;const l=a||i,c=this.createManagedBean(new it({cssIdentifier:"column-select",ariaRole:"tree",moveItemCallback:(d,h)=>{l||this.moveItems(d,h)}}));this.virtualList=c,this.appendChild(c.getGui()),c.setComponentCreator((d,h)=>((0,o.v8T)(h,d.depth+1),this.createComponentFromItem(d,h))),this.colModel.ready&&this.onColumnsChanged(),!l&&this.createItemDragFeature()}createItemDragFeature(){const{gos:e,beans:t,eventSvc:s,virtualList:i}=this;this.createManagedBean(new ji(this,i,{dragSourceType:o.qRA.ToolPanel,listItemDragStartEvent:"columnPanelItemDragStart",listItemDragEndEvent:"columnPanelItemDragEnd",eventSource:s,getCurrentDragValue:r=>(e=>e.column)(r),isMoveBlocked:r=>gr(e,t,Gs(r)),getNumRows:r=>r.getDisplayedColsList().length,moveItem:(r,a)=>fr(t,Gs(r),a)}))}moveItems(e,t){const{gos:s,beans:i}=this,{modelItem:r}=e,{group:a,columnGroup:n,column:l,expanded:c}=r,d=Gs(a?n:l);if(gr(s,i,d))return;const h=this.displayedColsList.indexOf(r),u=t?-1:1;let p=0;if(t){const f=e.columnDepth>0&&l.getParent()?.getChildren();f&&f.length&&l===f[0]&&(p=-1)}else a&&(p=c?r.children.length:0);const g=Math.min(Math.max(h+p+u,0),this.displayedColsList.length-1);this.skipRefocus=!0,fr(i,d,{rowIndex:g,position:t?"top":"bottom",component:this.virtualList.getComponentAt(g)}),this.focusRowIfAlive(g-p).then(()=>{this.skipRefocus=!1})}createComponentFromItem(e,t){const s=this.allowDragging;if(e.group){const r=new pr(e,s,this.eventType,t);return this.createBean(r),r}const i=new au(e,s,this.groupsExist,t);return this.createBean(i),i}onColumnsChanged(){const e=this.params;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!e.initialState);const t=this.getExpandedStates(),s=this.colModel.isPivotMode();e.suppressSyncLayoutWithGrid||s?this.buildTreeFromProvidedColumnDefs():this.buildTreeFromWhatGridIsDisplaying(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;return t.forEach(s=>{e[s]=!0}),e}return this.allColsTree?(this.forEachItem(t=>{if(!t.group)return;const s=t.columnGroup;s&&(e[s.getId()]=t.expanded)}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem(s=>{if(!s.group)return;const i=s.columnGroup;if(i){const r=e[i.getId()];(null!=r||t)&&(s.expanded=!!r)}})}buildTreeFromWhatGridIsDisplaying(){!function rr(e,t){const s=function jh(e){const t=(r,a)=>{let n;if((0,o.b6I)(r))if(r.isPadding())n=a;else{const c=Object.assign({},r.getColGroupDef());c.groupId=r.getGroupId(),c.children=[a],n=c}else{const c=Object.assign({},r.getColDef());c.colId=r.getColId(),n=c}const l=r.getOriginalParent();return l?t(l,n):n};return e.getCols().filter(r=>{const a=r.getColDef();return r.isPrimary()&&!a.showRowGroup}).map(r=>t(r,r.getColDef()))}(e);t(_h(s))}(this.colModel,this.setColumnLayout.bind(this))}setColumnLayout(e){const t=function ir(e,t){const s=[],i=(a,n)=>{if(rt(a)){const l=a,d=new o.PuA(l,typeof l.groupId<"u"?l.groupId:l.headerName,!1,n),h=[];return l.children.forEach(u=>{const p=i(u,n+1);p&&h.push(p)}),d.setChildren(h),d}{const l=a,d=e.getColDefCol(l.colId?l.colId:l.field);return d||s.push(l),d}},r=[];return t.forEach(a=>{const n=i(a,0);n&&r.push(n)}),s.length>0&&(0,o.ujB)(217,{invalidColIds:s}),r}(this.colModel,e);this.buildListModel(t),this.groupsExist=e.some(s=>s&&typeof s.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){const e=this.colModel;this.buildListModel(e.getColDefColTree()),this.groupsExist=!!e.colDefCols?.treeDepth}buildListModel(e){const t=this.onColumnExpanded.bind(this),s=l=>{l.addEventListener("expandedChanged",t);const c=l.removeEventListener.bind(l,"expandedChanged",t);this.destroyColumnItemFuncs.push(c)},i=this.beans.colNames,r=(l,c,d)=>{l.forEach(h=>{(0,o.b6I)(h)?a(h,c,d):n(h,c,d)})},a=(l,c,d)=>{const h=l.getColGroupDef();if(h&&h.suppressColumnsToolPanel)return;if(l.isPadding())return void r(l.getChildren(),c,d);const p=i.getDisplayNameForProvidedColumnGroup(null,l,"columnToolPanel"),g=new ar(p,l,c,!0,this.expandGroupsByDefault);d.push(g),s(g),r(l.getChildren(),c+1,g.children)},n=(l,c,d)=>{if(l.getColDef()&&l.getColDef().suppressColumnsToolPanel)return;const u=i.getDisplayNameForColumn(l,"columnToolPanel");d.push(new ar(u,l,c))};this.destroyColumnTree(),r(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=i=>{i.passesFilter&&(this.displayedColsList.push(i),i.group&&i.expanded&&i.children.forEach(e))},t=this.virtualList;this.allColsTree.forEach(e),t.setModel(new nu(this.displayedColsList));let s=null;this.skipRefocus||(s=t.getLastFocusedRow()),t.refresh(),null!=s&&this.focusRowIfAlive(s),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),s=e("columns","Columns"),i=this.displayedColsList.length;(0,o.PIC)(this.virtualList.getAriaElement(),`${t} ${i} ${s}`)}focusRowIfAlive(e){return-1===e?Promise.resolve():new Promise(t=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),t()},0)})}forEachItem(e){const t=i=>{i.forEach(r=>{e(r),r.group&&t(r.children)})},s=this.allColsTree;s&&t(s)}doSetExpandedAll(e){this.forEachItem(t=>{t.group&&(t.expanded=e)})}setGroupsExpanded(e,t){if(!t)return void this.doSetExpandedAll(e);const s=[];this.forEachItem(r=>{if(!r.group)return;const a=r.columnGroup.getId();t.indexOf(a)>=0&&(r.expanded=e,s.push(a))});const i=t.filter(r=>!s.includes(r));i.length>0&&(0,o.ujB)(157,{unrecognisedGroupIds:i})}getExpandState(){let e=0,t=0;return this.forEachItem(s=>{s.group&&(s.expanded?e++:t++)}),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){nr(this.beans,this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const s=this.colModel.isPivotMode();if(this.forEachItem(i=>{if(i.group||!i.passesFilter)return;const r=i.column,a=r.getColDef();let n;if(s){if(!r.isAllowPivot()&&!r.isAllowRowGroup()&&!r.isAllowValue())return;n=r.isValueActive()||r.isPivotActive()||r.isRowGroupActive()}else{if(a.lockVisible)return;n=r.isVisible()}n?e++:t++}),!(e>0&&t>0))return!(0===e||t>0)}setFilterText(e){this.filterText=(0,o.Qmv)(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=s=>{if(!(0,o.Qmv)(this.filterText))return!0;const i=s.displayName;return null==i||-1!==i.toLowerCase().indexOf(this.filterText)},t=(s,i)=>{let r=!1;if(s.group){const n=e(s);s.children.forEach(l=>{const c=t(l,n||i);c&&(r=c)})}const a=!(!i&&!r)||e(s);return s.passesFilter=a,a};this.allColsTree.forEach(s=>t(s,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree&&this.forEachItem(t=>{t.group&&t.expanded&&e.push(t.columnGroup.getId())}),e}}},du={tag:"div",cls:"ag-column-select",children:[{tag:"ag-primary-cols-header",ref:"primaryColsHeaderPanel"},{tag:"ag-primary-cols-list",ref:"primaryColsListPanel"}]},mr=class extends o.uAl{constructor(){super(du,[Wh,cu]),this.primaryColsHeaderPanel=o.dRA,this.primaryColsListPanel=o.dRA,this.registerCSS(".ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{align-items:center;display:flex;flex:none;gap:var(--ag-widget-horizontal-spacing);height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding);position:relative}.ag-column-select-column,.ag-column-select-column-group{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);height:100%;position:relative;&:where(:not(:last-child)){margin-bottom:var(--ag-widget-vertical-spacing)}}:where(.ag-ltr) .ag-column-select-column,:where(.ag-ltr) .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}:where(.ag-rtl) .ag-column-select-column,:where(.ag-rtl) .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}:where(.ag-ltr) .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}:where(.ag-rtl) .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}")}init(e,t,s){const{primaryColsHeaderPanel:i,primaryColsListPanel:r}=this;i.init(t),t.suppressColumnExpandAll&&t.suppressColumnFilter&&t.suppressColumnSelectAll&&i.setDisplayed(!1),this.addManagedListeners(r,{groupExpanded:c=>{i.setExpandState(c.state),t.onStateUpdated()},selectionChanged:c=>i.setSelectionState(c.state)}),r.init(t,e,s),this.addManagedListeners(i,{expandAll:r.doSetExpandedAll.bind(r,!0),collapseAll:r.doSetExpandedAll.bind(r,!1),selectAll:r.doSetSelectedAll.bind(r,!0),unselectAll:r.doSetSelectedAll.bind(r,!1),filterChanged:c=>r.setFilterText(c.filterText)}),this.positionableFeature=this.createManagedBean(new o.qyQ(this.getGui(),{minHeight:100}))}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}},Fu=class{constructor(e,t,s){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=s}getMenuItem(){const e=this.getLocaleTextFunc(),t=(s,i,r,a,n=!1)=>({name:e(s,i+"\u200e"),action:()=>this.chartSvc.createPivotChart({chartType:r}),_key:a,_enterprise:n});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped","groupedColumn","pivotGroupedColumn"),t("stackedColumn","Stacked","stackedColumn","pivotStackedColumn"),t("normalizedColumn","100% Stacked","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped","groupedBar","pivotGroupedBar"),t("stackedBar","Stacked","stackedBar","pivotStackedBar"),t("normalizedBar","100% Stacked","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[t("pie","Pie","pie","pivotPie"),t("donut","Donut","donut","pivotDonut")]},{_key:"pivotLineChart",name:e("lineChart","Line"),subMenu:[t("lineChart","Line","line","pivotLineChart"),t("stackedLine","Stacked","stackedLine","pivotStackedLine"),t("normalizedLine","100% Stacked","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[t("areaChart","Area","area","pivotArea"),t("stackedArea","Stacked","stackedArea","pivotStackedArea"),t("normalizedArea","100% Stacked","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter","scatter","pivotScatter"),t("bubble","Bubble","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:e("statisticalChart","Statistical"),subMenu:[t("histogramChart","Histogram","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemapChart","Treemap","treemap","pivotTreemap",!0),t("sunburstChart","Sunburst","sunburst","pivotSunburst",!0)]},{_key:"pivotFunnel",name:e("funnel","Funnel"),subMenu:[t("funnel","Funnel","funnel","pivotFunnel"),t("coneFunnel","Cone Funnel","coneFunnel","pivotConeFunnel"),t("pyramid","Pyramid","pyramid","pivotPyramid")]},{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line","columnLineCombo","pivotColumnLineCombo"),t("AreaColumnCombo","Area & Column","areaColumnCombo","pivotAreaColumnCombo")]}],icon:(0,o.asF)("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},funnelGroup:{_key:"pivotFunnel",funnel:"pivotFunnel",coneFunnel:"pivotConeFunnel",pyramid:"pivotPyramid"},polarGroup:null,specializedGroup:null}}},Mu=class{constructor(e,t,s){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=s}getMenuItem(){const e=this.getLocaleTextFunc(),t=(s,i,r,a,n=!1)=>({name:e(s,i),action:()=>this.chartSvc.createChartFromCurrentRange(r),_key:a,_enterprise:n});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped","groupedColumn","rangeGroupedColumn"),t("stackedColumn","Stacked","stackedColumn","rangeStackedColumn"),t("normalizedColumn","100% Stacked","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped","groupedBar","rangeGroupedBar"),t("stackedBar","Stacked","stackedBar","rangeStackedBar"),t("normalizedBar","100% Stacked","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[t("pie","Pie","pie","rangePie"),t("donut","Donut","donut","rangeDonut")],_key:"rangePieChart"},{name:e("lineChart","Line"),subMenu:[t("lineChart","Line","line","rangeLineChart"),t("stackedLine","Stacked","stackedLine","rangeStackedLine"),t("normalizedLine","100% Stacked","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:e("areaChart","Area"),subMenu:[t("areaChart","Area","area","rangeArea"),t("stackedArea","Stacked","stackedArea","rangeStackedArea"),t("normalizedArea","100% Stacked","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter","scatter","rangeScatter"),t("bubble","Bubble","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("polarChart","Polar"),subMenu:[t("radarLine","Radar Line","radarLine","rangeRadarLine"),t("radarArea","Radar Area","radarArea","rangeRadarArea"),t("nightingale","Nightingale","nightingale","rangeNightingale"),t("radialColumn","Radial Column","radialColumn","rangeRadialColumn"),t("radialBar","Radial Bar","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:e("statisticalChart","Statistical"),subMenu:[t("boxPlot","Box Plot","boxPlot","rangeBoxPlot",!0),t("histogramChart","Histogram","histogram","rangeHistogram",!1),t("rangeBar","Range Bar","rangeBar","rangeRangeBar",!0),t("rangeArea","Range Area","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemap","Treemap","treemap","rangeTreemap"),t("sunburst","Sunburst","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:e("specializedChart","Specialized"),subMenu:[t("heatmap","Heatmap","heatmap","rangeHeatmap"),t("waterfall","Waterfall","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:e("funnel","Funnel"),subMenu:[t("funnel","Funnel","funnel","rangeFunnel"),t("coneFunnel","Cone Funnel","coneFunnel","rangeConeFunnel"),t("pyramid","Pyramid","pyramid","rangePyramid")],_key:"rangeFunnel",_enterprise:!0},{name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line","columnLineCombo","rangeColumnLineCombo"),t("AreaColumnCombo","Area & Column","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:(0,o.asF)("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},funnelGroup:{_key:"rangeFunnel",funnel:"rangeFunnel",coneFunnel:"rangeConeFunnel",pyramid:"rangePyramid"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},Au={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",pinRowSubMenu:"PinnedRow",pinBottom:"PinnedRow",pinTop:"PinnedRow",unpinRow:"PinnedRow",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"},We="separator";function wr(e,t){if(e)for(let s=e.length-2;s>=0;s--)e[s]===t&&e[s+1]===t&&e.splice(s+1,1)}function Ru(e,t,s,i){let r;if(e.isPrimary())r=e;else{const n=e.getColDef().pivotValueColumn;r=(0,o.Qmv)(n)?n:void 0}const a=[];if(r){const n=r.isValueActive(),l=t.getFuncNames(r);a.push({name:i("noAggregation","None"),action:()=>{s.removeColumns([r],"contextMenu"),s.setColumnAggFunc(r,void 0,"contextMenu")},checked:!n}),l.forEach(c=>{a.push({name:i(c,t.getDefaultFuncLabel(c)),action:()=>{s.setColumnAggFunc(r,c,"contextMenu"),s.addColumns([r],"contextMenu")},checked:n&&r.getAggFunc()===c})})}return a}var xr="ag-context-menu-open",Gu=class extends o.uAl{constructor(e,t,s,i){super({tag:"div",cls:"ag-menu",role:"presentation"}),this.menuItems=e,this.column=t,this.node=s,this.value=i,this.menuList=null,this.focusedCell=null}postConstruct(){const e=this.createManagedBean(new wt(0,{column:this.column,node:this.node,value:this.value})),t=this.beans.menuItemMapper.mapWithStockItems(this.menuItems,this.column,this.node,()=>this.getGui(),"contextMenu");e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",s=>this.dispatchLocalEvent(s))}afterGuiAttached({hidePopup:e}){e&&this.addDestroyFunc(e),this.focusedCell=this.beans.focusSvc.getFocusedCell();const t=this.menuList;t&&(0,o.H9T)(this.beans,()=>(0,o.YtT)(t.getGui()))}restoreFocusedCell(){const{beans:e,focusedCell:t}=this,s=e.focusSvc,i=s.getFocusedCell();if(i&&t&&(0,o.Bl0)(i,t)){const{rowIndex:r,rowPinned:a,column:n}=t;(0,o.sNX)(e)&&s.setFocusedCell({rowIndex:r,column:n,rowPinned:a,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!(0,o.g3$)()})}}destroy(){super.destroy(),this.restoreFocusedCell()}},Fr=class extends o.aJZ{constructor(e){super(function Ou(e){return{tag:"div",cls:`ag-tabs ${e}`,children:[{tag:"div",ref:"eHeader"},{tag:"div",ref:"eBody",role:"presentation",cls:"ag-tabs-body "+(e?`${e}-body`:"")}]}}(e.cssClass)),this.eHeader=o.dRA,this.eBody=o.dRA,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>this.activeItem?.tabbedItem?.afterDetachedCallback?.())}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,s=(i,r)=>{i.classList.add(`ag-tabs-${r}`),t&&i.classList.add(`${t}-${r}`)};e?(this.setupCloseButton(s),this.eTabHeader=(0,o.UCw)({tag:"div",role:"presentation"}),s(this.eHeader,"header-wrapper"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,(0,o.lXX)(this.eTabHeader,"tablist"),s(this.eTabHeader,"header")}setupCloseButton(e){const t=(0,o.UCw)({tag:"button"});e(t,"close-button");const s=(0,o.asF)("close",this.beans);(0,o.PIC)(t,this.params.closeButtonAriaLabel),t.appendChild(s),this.addManagedElementListeners(t,{click:()=>this.params.onCloseClicked?.()});const i=(0,o.UCw)({tag:"div",role:"presentation"});e(i,"close-button-wrapper"),i.appendChild(t),this.eHeader.appendChild(i),this.eCloseButton=t}handleKeyDown(e){switch(e.key){case o.DDm.RIGHT:case o.DDm.LEFT:{if(!this.eTabHeader.contains((0,o.UlD)(this.beans)))return;const t=e.key===o.DDm.RIGHT,s=this.gos.get("enableRtl"),i=this.items.indexOf(this.activeItem),r=t!==s?Math.min(i+1,this.items.length-1):Math.max(i-1,0);if(i===r)return;e.preventDefault();const a=this.items[r];this.showItemWrapper(a),a.eHeaderButton.focus();break}case o.DDm.UP:case o.DDm.DOWN:e.stopPropagation()}}onTabKeyDown(e){if(e.defaultPrevented)return;const{beans:t,eHeader:s,eBody:i,activeItem:r,params:a}=this,{suppressTrapFocus:n,enableCloseButton:l}=a,c=(0,o.UlD)(t),d=e.target,h=e.shiftKey;if(s.contains(c))return e.preventDefault(),void(l&&h&&!this.eCloseButton?.contains(c)?this.eCloseButton?.focus():n&&h?Is((0,o.BxM)(t).body,d)?.focus():this.focusBody(e.shiftKey));let u=null;(function Ji(e,t){if(!t)return!1;const s=e.querySelectorAll(`.${o.J1Y}`);if(!s.length)return!1;for(let i=0;i<s.length;i++)if(s[i].contains(t))return!0;return!1})(i,d)&&(h&&(u=Is(i,d)),!u&&!n&&(u=r.eHeaderButton)),u||!i.contains(c)||(u=(0,o.ey2)(t,i,!1,h),u)?u&&(e.preventDefault(),u.focus()):n&&!h?this.forceFocusOutOfContainer(h):l&&!h?(e.preventDefault(),this.eCloseButton?.focus()):(e.preventDefault(),this.focusHeader())}focusInnerElement(e){return e?this.focusBody(!0):(this.focusHeader(),!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){return(0,o.YtT)(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=(0,o.UCw)({tag:"span",cls:"ag-tab",role:"tab",attrs:{tabindex:"-1"}});t.appendChild(e.title),this.eTabHeader.appendChild(t),(0,o.PIC)(t,e.titleLabel);const s={tabbedItem:e,eHeaderButton:t};this.items.push(s),t.addEventListener("click",this.showItemWrapper.bind(this,s))}showItem(e){const t=this.items.find(s=>s.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){const{tabbedItem:t,eHeaderButton:s}=e;this.params.onItemClicked?.({item:t}),this.activeItem!==e?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),(0,o.fDi)(this.eBody),t.bodyPromise.then(i=>{this.eBody.appendChild(i);const r=!(0,o.g3$)();if(this.params.suppressFocusBodyOnOpen||(0,o.YtT)(this.eBody,!1,r),t.afterAttachedCallback&&t.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const a=t.getScrollableContainer&&t.getScrollableContainer()||i;[this.lastScrollListener]=this.addManagedElementListeners(a,{scroll:()=>{this.tabbedItemScrollMap.set(t.name,a.scrollTop)}});const n=this.tabbedItemScrollMap.get(t.name);void 0!==n&&setTimeout(()=>{a.scrollTop=n},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),this.activeItem.tabbedItem.afterDetachedCallback?.()),s.classList.add("ag-tab-selected"),this.activeItem=e):this.params.onActiveItemClicked?.()}},Ee="filterMenuTab",Ie="generalMenuTab",_e="columnsMenuTab",qt=[Ie,Ee,_e],Bu=class extends o.XQb{constructor(e,t,s,i,r){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=s,this.restrictTo=i,this.sourceElement=r,this.tabFactories={},this.includeChecks={};const{tabFactories:a,includeChecks:n}=this;a[Ie]=this.createMainPanel.bind(this),a[Ee]=this.createFilterPanel.bind(this),a[_e]=this.createColumnsPanel.bind(this),n[Ie]=()=>!0,n[Ee]=()=>!!e&&!!this.beans.filterManager?.isFilterAllowed(e),n[_e]=()=>!0}postConstruct(){const e=this.getTabsToCreate().map(s=>this.createTab(s)),t=new Fr({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.tabbedLayout=this.createBean(t),this.mainMenuList?.setParentComponent(t),this.addDestroyFunc(()=>this.destroyBean(t))}getTabsToCreate(){return this.restrictTo?this.restrictTo:(this.column?.getColDef().menuTabs??qt).filter(e=>this.isValidMenuTabItem(e)&&this.isNotSuppressed(e))}isValidMenuTabItem(e){let t=!0,s=qt;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,s=this.restrictTo),t=t&&qt.indexOf(e)>-1,t||(0,o.ujB)(175,{menuTabName:e,itemsToConsider:s}),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){const{tabItemColumns:t,tabbedLayout:s,tabItemFilter:i,tabItemGeneral:r}=this;t&&e===_e?s.showItem(t):i&&e===Ee?s.showItem(i):r&&e===Ie?s.showItem(r):s.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=_e;break;case this.tabItemFilter:t=Ee;break;case this.tabItemGeneral:t=Ie}t&&this.activateTab(t)}activateTab(e){this.dispatchLocalEvent({type:"tabSelected",key:e})}createMainPanel(){const{beans:e,column:t}=this,s=e.colMenuFactory,i=s.createMenu(this,s.getMenuItems(t),this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=i,i.addEventListener("closeMenu",this.onHidePopup.bind(this));const r={title:(0,o.asF)("legacyMenu",e,t),titleLabel:Ie.replace("MenuTab",""),bodyPromise:o.oY$.resolve(i.getGui()),name:Ie};return this.tabItemGeneral=r,r}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createBean(new o.QdF(this.column,"COLUMN_MENU")):null;return this.filterComp=e,e?.hasFilter()||(0,o.CkN)(119),this.tabItemFilter={title:(0,o.asF)("filterTab",this.beans,this.column),titleLabel:Ee.replace("MenuTab",""),bodyPromise:o.oY$.resolve(e?.getGui()),afterAttachedCallback:i=>e?.afterGuiAttached(i),afterDetachedCallback:()=>e?.afterGuiDetached(),name:Ee},this.tabItemFilter}createColumnsPanel(){const e=(0,o.UCw)({tag:"div",cls:"ag-menu-column-select-wrapper"}),{beans:t,column:s}=this,r=t.colChooserFactory.createColumnSelectPanel(this,s).getGui();r.classList.add("ag-menu-column-select"),e.appendChild(r);const a={title:(0,o.asF)("columns",t,s),titleLabel:_e.replace("MenuTab",""),bodyPromise:o.oY$.resolve(e),name:_e};return this.tabItemColumns=a,a}afterGuiAttached(e){const{container:t,hidePopup:s}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:s}),s&&(this.hidePopupFunc=s,this.addDestroyFunc(s))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},Vu=class extends o.uAl{constructor(e,t,s,i){super({tag:"div",ref:"eColumnMenu",cls:"ag-menu ag-column-menu",role:"presentation"}),this.menuItems=e,this.column=t,this.restoreFocusParams=s,this.sourceElement=i,this.eColumnMenu=o.dRA}postConstruct(){const e=this.beans.colMenuFactory.createMenu(this,this.menuItems,this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=e,e.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(e.getGui())}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached({hidePopup:e}){e&&(this.hidePopupFunc=e,this.addDestroyFunc(e)),(0,o.YtT)(this.mainMenuList.getGui())}},Mr={moduleName:"MenuCore",version:R,beans:[class extends o.XQb{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,t,s,i,r){if(!e)return[];const a=[],n=this.getLocaleTextFunc(),{beans:l,gos:c}=this,{pinnedCols:d,colAutosize:h,aggFuncSvc:u,rowGroupColsSvc:p,colNames:g,colModel:f,clipboardSvc:m,expansionSvc:C,focusSvc:v,csvCreator:y,excelCreator:b,menuSvc:S,colChooserFactory:w,sortSvc:F,chartMenuItemMapper:M,valueColsSvc:P,pinnedRowModel:A}=l;return e.forEach(L=>{let D;if(D="string"==typeof L?((L,D,O,I)=>{switch(function Pu(e,t){const s=Au[t];s&&e.assertModuleRegistered(s,`menu item '${t}'`)}(c,L),L){case"pinSubMenu":return d&&D?{name:n("pinColumn","Pin Column"),icon:(0,o.asF)("menuPin",l,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return d&&D?{name:n("pinLeft","Pin Left"),action:()=>d.setColsPinned([D],"left",I),checked:!!D&&D.isPinnedLeft()}:null;case"pinRight":return d&&D?{name:n("pinRight","Pin Right"),action:()=>d.setColsPinned([D],"right",I),checked:!!D&&D.isPinnedRight()}:null;case"clearPinned":return d&&D?{name:n("noPin","No Pin"),action:()=>d.setColsPinned([D],null,I),checked:!!D&&!D.isPinned()}:null;case"pinRowSubMenu":{const T=c.get("enableRowPinning"),k=[],U=s?.rowPinned??s?.pinnedSibling?.rowPinned;return U&&k.push("unpinRow"),T&&"bottom"!==T&&"top"!=U&&k.push("pinTop"),T&&"top"!==T&&"bottom"!=U&&k.push("pinBottom"),A?.isManual()?{name:n("pinRow","Pin Row"),icon:(0,o.asF)("rowPin",l,D),subMenu:k}:null}case"pinTop":return A?.isManual()?{name:n("pinTop","Pin to Top"),icon:(0,o.asF)("rowPinTop",l,D),action:({node:T,column:k})=>T&&A.pinRow(T,"top",k)}:null;case"pinBottom":return A?.isManual()?{name:n("pinBottom","Pin to Bottom"),icon:(0,o.asF)("rowPinBottom",l,D),action:({node:T,column:k})=>T&&A.pinRow(T,"bottom",k)}:null;case"unpinRow":return A?.isManual()?{name:n("unpinRow","Unpin Row"),icon:(0,o.asF)("rowUnpin",l,D),action:({node:T,column:k})=>T&&A.pinRow(T,null,k)}:null;case"valueAggSubMenu":return u&&P&&(D?.isPrimary()||D?.getColDef().pivotValueColumn)?{name:n("valueAggregation","Value Aggregation"),icon:(0,o.asF)("menuValue",l,null),subMenu:Ru(D,u,P,n),disabled:c.get("functionsReadOnly")}:null;case"autoSizeThis":return h?{name:n("autosizeThisColumn","Autosize This Column"),action:()=>h.autoSizeColumn(D,I,c.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return h?{name:n("autosizeAllColumns","Autosize All Columns"),action:()=>h.autoSizeAllColumns({source:I,skipHeader:c.get("skipHeaderOnAutoSize")})}:null;case"rowGroup":return p?{name:n("groupBy","Group by")+" "+g.getDisplayNameForColumn(D,"header"),disabled:c.get("functionsReadOnly")||D?.isRowGroupActive()||!D?.getColDef().enableRowGroup,action:()=>p.addColumns([D],I),icon:(0,o.asF)("menuAddRowGroup",l,null)}:null;case"rowUnGroup":if(p&&c.isModuleRegistered("SharedRowGrouping")){const T=D?.getColDef().showRowGroup,k=c.get("groupLockGroupColumns");let U,re,Q;if(!0===T)U=n("ungroupAll","Un-Group All"),re=c.get("functionsReadOnly")||-1===k||k>=(p.columns.length??0),Q=()=>p.setColumns(p.columns.slice(0,k),I);else if("string"==typeof T){const q=f.getColDefCol(T),ge=null!=q?g.getDisplayNameForColumn(q,"header"):T;U=n("ungroupBy","Un-Group by")+" "+ge,re=c.get("functionsReadOnly")||St(q,l),Q=()=>{p.removeColumns([T],I)}}else U=n("ungroupBy","Un-Group by")+" "+g.getDisplayNameForColumn(D,"header"),re=c.get("functionsReadOnly")||!D?.isRowGroupActive()||!D?.getColDef().enableRowGroup||St(D,l),Q=()=>p.removeColumns([D],I);return{name:U,disabled:re,action:Q,icon:(0,o.asF)("menuRemoveRowGroup",l,null)}}return null;case"resetColumns":return{name:n("resetColumns","Reset Columns"),action:()=>(0,o.wT9)(l,I)};case"expandAll":return C?{name:n("expandAll","Expand All Row Groups"),action:()=>C.expandAll(!0)}:null;case"contractAll":return C?{name:n("collapseAll","Collapse All Row Groups"),action:()=>C.expandAll(!1)}:null;case"copy":return m?{name:n("copy","Copy"),shortcut:n("ctrlC","Ctrl+C"),icon:(0,o.asF)("clipboardCopy",l,null),action:()=>m.copyToClipboard()}:null;case"copyWithHeaders":return m?{name:n("copyWithHeaders","Copy with Headers"),icon:(0,o.asF)("clipboardCopy",l,null),action:()=>m.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return m?{name:n("copyWithGroupHeaders","Copy with Group Headers"),icon:(0,o.asF)("clipboardCopy",l,null),action:()=>m.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(m){const T=v.getFocusedCell(),k=T?(0,o.CFh)(l,T):null,U=!!k&&T?.column.isCellEditable(k);return{name:n("cut","Cut"),shortcut:n("ctrlX","Ctrl+X"),icon:(0,o.asF)("clipboardCut",l,null),disabled:!U||c.get("suppressCutToClipboard"),action:()=>m.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":return m?{name:n("paste","Paste"),shortcut:n("ctrlV","Ctrl+V"),disabled:!0,icon:(0,o.asF)("clipboardPaste",l,null),action:()=>m.pasteFromClipboard()}:null;case"export":{const T=[];return!c.get("suppressCsvExport")&&y&&T.push("csvExport"),!c.get("suppressExcelExport")&&b&&T.push("excelExport"),T.length?{name:n("export","Export"),subMenu:T,icon:(0,o.asF)("save",l,null)}:null}case"csvExport":return y?{name:n("csvExport","CSV Export"),icon:(0,o.asF)("csvExport",l,null),action:()=>y.exportDataAsCsv()}:null;case"excelExport":return b?{name:n("excelExport","Excel Export"),icon:(0,o.asF)("excelExport",l,null),action:()=>b.exportDataAsExcel()}:null;case"separator":return L;case"pivotChart":case"chartRange":return M.getChartItems(L);case"columnFilter":return S&&D?{name:n("columnFilter","Column Filter"),icon:(0,o.asF)("filter",l,null),action:()=>S.showFilterMenu({column:D,buttonElement:O(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":{const T=v.focusedHeader;return w?{name:n("columnChooser","Choose Columns"),icon:(0,o.asF)("columns",l,null),action:()=>w.showColumnChooser({column:D,eventSource:O(),headerPosition:T})}:null}case"sortAscending":return F?{name:n("sortAscending","Sort Ascending"),icon:(0,o.asF)("sortAscending",l,null),action:()=>F.setSortForColumn(D,"asc",!1,I)}:null;case"sortDescending":return F?{name:n("sortDescending","Sort Descending"),icon:(0,o.asF)("sortDescending",l,null),action:()=>F.setSortForColumn(D,"desc",!1,I)}:null;case"sortUnSort":return F?{name:n("sortUnSort","Clear Sort"),icon:(0,o.asF)("sortUnSort",l,null),action:()=>F.setSortForColumn(D,null,!1,I)}:null;default:return(0,o.ujB)(176,{key:L}),null}})(L,t,i,r):{...L},!D)return;const O=D,{subMenu:I}=O;I&&I instanceof Array&&(O.subMenu=this.mapWithStockItems(I,t,s,i,r)),null!=D&&a.push(D)}),wr(a,We),a}},class extends o.XQb{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){const t=this.beans,s=t.chartSvc,i="pivotChart"===e;if(!s)return null;const r=this.getLocaleTextFunc.bind(this),a=i?new Fu(t,s,r):new Mu(t,s,r),n=s.isEnterprise();let l=a.getMenuItem();if(l&&l.subMenu&&!n){const d=h=>({...h,subMenu:h.subMenu?.filter(u=>!u._enterprise).map(u=>d(u))});l=d(l)}const c=this.gos.get("chartToolPanelsDef")?.settingsPanel?.chartGroupsDef;return c&&(l=this.filterAndOrderChartMenu(l,c,a.getConfigLookup())),this.cleanInternals(l)}cleanInternals(e){if(!e)return e;const t=s=>(delete s?._key,delete s?._enterprise,s?.subMenu?.forEach(i=>t(i)),s);return t(e)}buildLookup(e){const t={},s=i=>{t[i._key]=i,i.subMenu&&i.subMenu.forEach(r=>s(r))};return s(e),t}filterAndOrderChartMenu(e,t,s){const i=this.buildLookup(e),r={...e,subMenu:[]};for(const a of Object.keys(t)){const n=t[a],l=s[a];if(null===l)continue;if(null==l){(0,o.ujB)(173,{group:a});continue}const c=i[l._key];if(c)if(c.subMenu){const d=n.map(h=>{const u=l[h];if(null!=u)return i[u];(0,o.ujB)(174,{group:a,chartType:h})}).filter(h=>void 0!==h);d.length>0&&(c.subMenu=d,r.subMenu?.push(c))}else r.subMenu?.push(c)}return 0==r.subMenu?.length?null:r}},class extends o.XQb{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,t,s,i){const{eventSource:r}=e,a=s instanceof KeyboardEvent;if(!i&&!a||!r)return;const n=(0,o.UlD)(this.beans);!t.contains(n)&&!(0,o.sNX)(this.beans)||this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,s){let i;s&&s.keyboardEvent&&(i=s.keyboardEvent),e(i&&{keyboardEvent:i});const r=this.beans,a=r.focusSvc,n=a.getFocusedCell();if((0,o.sNX)(r))if(n){const{rowIndex:l,rowPinned:c,column:d}=n;a.setFocusedCell({rowIndex:l,column:d,rowPinned:c,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e){const{mouseEvent:t,touchEvent:s,showMenuCallback:i,source:r}=e;if(!(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey)||(t&&this.blockMiddleClickScrollsIfNeeded(t),"ui"===r&&this.gos.get("suppressContextMenu")))&&i(t??s.touches[0])){const n=t??s;n&&n.cancelable&&n.preventDefault()}}focusHeaderCell(e){var t=this;return(0,Ze.A)(function*(){const{column:s,columnIndex:i,headerPosition:r,eventSource:a}=e,{visibleCols:n,headerNavigation:l,focusSvc:c}=t.beans,d=yield n.allCols.some(h=>h===s);if(t.isAlive())if(s?.isAlive()&&d&&a&&(0,o.K05)(a)){const h=(0,o.I_I)(a);h&&(l?.scrollToColumn(s),h.focus())}else if(r&&-1!==i){const h=n.allCols,u=h[i]||(0,o.GXs)(h);u&&c.focusHeaderPosition({headerPosition:{headerRowIndex:r.headerRowIndex,column:u}})}})()}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&2===e.which&&e.preventDefault()}}],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"},dependsOn:[B,o.gFd,o.QhZ,Qt]},Ns={moduleName:"ColumnMenu",version:R,beans:[class extends o.XQb{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,s,i,r){const{column:a,columnGroup:n}=this.splitColumnOrGroup(e),l=r?"filterMenuTab":void 0;this.showMenu(a,n,c=>{const d=c.getGui();this.beans.popupSvc.positionPopupUnderMouseEvent({type:s,column:a,mouseEvent:t,ePopup:d}),l&&c.showTab?.(l),this.dispatchVisibleChangedEvent(!0,!1,a,n,l)},s,l,void 0,t.target,i)}splitColumnOrGroup(e){const t=e&&(0,o.R39)(e);return{column:t?e:void 0,columnGroup:t?void 0:e}}showMenuAfterButtonClick(e,t,s,i,r){let a=-1,n="left";this.gos.get("enableRtl")&&(a=1,n="right");const l=r?"filterMenuTab":void 0,c=l?[l]:void 0,d=(0,o.Dwf)(this.gos),h=(d?9:4)*a,u=d?-23:4,{column:p,columnGroup:g}=this.splitColumnOrGroup(e);this.showMenu(p,g,f=>{const m=f.getGui();this.beans.popupSvc.positionPopupByComponent({type:s,column:p,eventSource:t,ePopup:m,alignSide:n,nudgeX:h,nudgeY:u,position:"under",keepWithinBounds:!0}),l&&f.showTab?.(l),this.dispatchVisibleChangedEvent(!0,!1,p,g,l)},s,l,c,t,i)}showMenu(e,t,s,i,r,a,n,l){const c=this.getMenuParams(e,t,a,n);if(!c)return;const{menu:d,eMenuGui:h,anchorToElement:u,restoreFocusParams:p}=c,g=[],{menuUtils:f,popupSvc:m}=this.beans;g.push(v=>{const y=d.getGui();this.destroyBean(d),e&&((0,o.R7i)(e,!1,"contextMenu"),f.restoreFocusOnClose(p,y,v)),l?.()});const C=this.getLocaleTextFunc();if(m.addPopup({modal:!0,eChild:h,closeOnEsc:!0,closedCallback:v=>{g.forEach(y=>y(v)),this.dispatchVisibleChangedEvent(!1,!1,e,t,r)},afterGuiAttached:v=>d.afterGuiAttached(Object.assign({},{container:i},v)),positionCallback:r?()=>s(d):void 0,ariaLabel:C("ariaLabelColumnMenu","Column Menu")}),r||(d.showTabBasedOnPreviousSelection?.(),s(d)),(0,o.xbs)(this.gos)){const v=m.setPopupPositionRelatedToElement(h,u);v&&e&&this.addStopAnchoring(v,e,g)}d.addEventListener("tabSelected",v=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=v.key,this.dispatchVisibleChangedEvent(!0,!0,e)}),e&&(0,o.R7i)(e,!0,"contextMenu"),this.activeMenu=d,d.addEventListener("destroyed",()=>{this.activeMenu===d&&(this.activeMenu=null)})}addStopAnchoring(e,t,s){e.then(i=>{t.__addEventListener("leftChanged",i),t.__addEventListener("visibleChanged",i),s.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("visibleChanged",i)})})}getMenuParams(e,t,s,i){const{focusSvc:r,visibleCols:a,ctrlsSvc:n}=this.beans,l={column:e,headerPosition:r.focusedHeader,columnIndex:a.allCols.indexOf(e),eventSource:i},c=this.createMenu(e,t,l,s,i);return c?{menu:c,eMenuGui:c.getGui(),anchorToElement:i||n.getGridBodyCtrl().eGridBody,restoreFocusParams:l}:void 0}createMenu(e,t,s,i,r){if((0,o.Dwf)(this.gos))return this.createBean(new Bu(e,s,this.lastSelectedTab,i,r));{const a=this.beans.colMenuFactory.getMenuItems(e,t);return a.length?this.createBean(new Vu(a,e,s,r)):void 0}}dispatchVisibleChangedEvent(e,t,s,i,r){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:t,key:this.lastSelectedTab??r??((0,o.Dwf)(this.gos)?Ie:"columnMenu"),column:s??null,columnGroup:i??null})}isMenuEnabled(e){if(!(0,o.Dwf)(this.gos))return!0;const t=!this.beans.filterManager?.isFilterAllowed(e),s=e.getColDef().menuTabs??qt;return(t&&s.includes(Ee)?s.length-1:s.length)>0}showMenuAfterContextMenuEvent(e,t,s){this.beans.menuUtils.onContextMenu({mouseEvent:t,touchEvent:s,source:"ui",showMenuCallback:i=>(this.showMenuAfterMouseEvent(e,i,"columnMenu"),!0)})}},class extends o.XQb{constructor(){super(...arguments),this.beanName="colMenuFactory"}createMenu(e,t,s,i){const r=e.createManagedBean(new wt(0,{column:s??null,node:null,value:null})),a=this.beans.menuItemMapper.mapWithStockItems(t,s??null,null,i,"columnMenu");return r.addMenuItems(a),r}getMenuItems(e=null,t=null){const s=this.getDefaultMenuOptions(e);let i;const r=(e?.getColDef()??t?.getColGroupDef())?.mainMenuItems;if(Array.isArray(r))i=r;else if("function"==typeof r)i=r((0,o.AuN)(this.gos,{column:e,columnGroup:t,defaultItems:s}));else{const a=this.gos.getCallback("getMainMenuItems");i=a?a({column:e,columnGroup:t,defaultItems:s}):s}return wr(i,We),i}getDefaultMenuOptions(e){const t=[],{beans:s,gos:i}=this,{colChooserFactory:r,rowGroupColsSvc:a,colModel:n,expansionSvc:l,sortSvc:c,menuSvc:d,pinnedCols:h,aggFuncSvc:u,colAutosize:p}=s,g=(0,o.Dwf)(i),f=()=>{!g&&r&&t.push("columnChooser"),t.push("resetColumns")};if(!e)return f(),t;const{colDef:m}=e,C=h&&!m.lockPinned,v=a?.columns.length??0,y=v>0,b=e.isPrimary(),S=u&&b&&y&&e.isAllowValue()||!b;if(c&&!g&&e.isSortable()){const w=e.getSort();"asc"!==w&&t.push("sortAscending"),"desc"!==w&&t.push("sortDescending"),w&&t.push("sortUnSort"),t.push(We)}if(d?.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(We)),C&&t.push("pinSubMenu"),S&&t.push("valueAggSubMenu"),(C||S)&&t.push(We),p&&(t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(We)),a&&i.isModuleRegistered("SharedRowGrouping")){const w=t.length;m.showRowGroup?t.push("rowUnGroup"):e.isAllowRowGroup()&&b&&(e.isRowGroupActive()?St(e,s)||t.push("rowUnGroup"):t.push("rowGroup")),t.length>w&&t.push(We)}return f(),l&&(0,o.dbY)(i)&&(i.get("treeData")||v>(n.isPivotMode()?1:0))&&(t.push("expandAll"),t.push("contractAll")),t}},class extends o.XQb{constructor(){super(...arguments),this.beanName="colChooserFactory"}createColumnSelectPanel(e,t,s,i){const r=e.createManagedBean(new mr),a=i??t?.getColDef().columnChooserParams??{},{contractColumnSelection:n,suppressColumnExpandAll:l,suppressColumnFilter:c,suppressColumnSelectAll:d,suppressSyncLayoutWithGrid:h,columnLayout:u}=a;return r.init(!!s,(0,o.AuN)(this.gos,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!n,suppressColumnExpandAll:!!l,suppressColumnFilter:!!c,suppressColumnSelectAll:!!d,suppressSyncLayoutWithGrid:!!u||!!h,onStateUpdated:()=>{}}),"columnMenu"),u&&r.setColumnLayout(u),r}showColumnChooser({column:e,chooserParams:t,eventSource:s,headerPosition:i}){this.hideActiveColumnChooser();const r=this.createColumnSelectPanel(this,e,!0,t),a=this.getLocaleTextFunc(),n=this.beans,{visibleCols:l,focusSvc:c,menuUtils:d}=n,h=l.allCols.indexOf(e),u=e?c.focusedHeader??i??null:null;this.activeColumnChooserDialog=this.createBean(new bt({title:a("chooseColumns","Choose Columns"),component:r,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{(0,o.ey2)(n,r.getGui())?.focus({preventScroll:!0}),this.dispatchVisibleChangedEvent(!0,e)},closedCallback:p=>{const g=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,e),e&&d.restoreFocusOnClose({column:e,headerPosition:u,columnIndex:h,eventSource:s},g,p,!0)},postProcessPopupParams:{type:"columnChooser",column:e,eventSource:s}})),this.activeColumnChooser=r}hideActiveColumnChooser(){this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:t??null})}}],icons:{ensureColumnVisible:"column-arrow",legacyMenu:"menu",filterTab:"filter",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},apiFunctions:{showColumnChooser:function zu(e,t){e.colChooserFactory?.showColumnChooser({chooserParams:t})},hideColumnChooser:function Uu(e){e.colChooserFactory?.hideActiveColumnChooser()}},dependsOn:[Mr,o.RPC,o.Vc]},Bs={moduleName:"ContextMenu",version:R,beans:[class extends o.XQb{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,s,i){const r=[],{clipboardSvc:a,chartSvc:n,csvCreator:l,excelCreator:c,colModel:d,rangeSvc:h,gos:u}=this.beans;if((0,o.Qmv)(e)&&a&&t&&(u.get("suppressCutToClipboard")||r.push("cut"),r.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),u.get("enableCharts")&&n&&(d.isPivotMode()&&r.push("pivotChart"),h&&!h.isEmpty()&&r.push("chartRange")),(0,o.Qmv)(e)){const m=u.get("enableRowPinning"),C=u.get("isRowPinnable");if(m){const w=e.level>-1&&e.footer,F=-1===e.level&&e.footer,M=(0,o.UcN)(u);(F&&"pinnedBottom"!==M&&"pinnedTop"!==M||!F&&!w)&&(C?.(e)??1)&&r.push("pinRowSubMenu")}const v=u.get("suppressExcelExport")||!c,y=u.get("suppressCsvExport")||!l;!(0,o.TvF)()&&(!v||!y)&&r.push("export")}const p=r.length?r:void 0,g=t?.getColDef().contextMenuItems;return Array.isArray(g)?g:"function"==typeof g?g((0,o.AuN)(u,{column:t,node:e,value:s,defaultItems:p,event:i})):u.getCallback("getContextMenuItems")?.({column:t,node:e,value:s,defaultItems:p,event:i})??r}getContextMenuPosition(e,t){const s=this.getRowCtrl(e),i=this.getCellGui(s,t);if(!i)return{x:0,y:s?.getRowYPosition()??0};const r=i.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){const t=e.rowNode??null,s=e.column??null;let{anchorToElement:i,value:r,source:a}=e;t&&s&&null==r&&(r=this.beans.valueSvc.getValueForDisplay(s,t).value),null==i&&(i=this.getContextMenuAnchorElement(t,s)),this.beans.menuUtils.onContextMenu({mouseEvent:e.mouseEvent??null,touchEvent:e.touchEvent??null,showMenuCallback:n=>this.showMenu(t,s,r,n,i),source:a})}handleContextMenuMouseEvent(e,t,s,i){const r=i?.rowNode??s?.rowNode??null,a=i?.column??s?.findFullWidthInfoForEvent(e||t)?.column??null,{valueSvc:n,ctrlsSvc:l}=this.beans,c=a?n.getValue(a,r):null,d=l.getGridBodyCtrl();this.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:a,value:c,anchorToElement:i?i.eGui:d.eGridBody,source:"ui"})}showMenu(e,t,s,i,r){const a=this.getMenuItems(e,t,s,i);if((0,o.NdC)(a)){const n=this.lastPromise+1;return this.lastPromise=n,this.destroyLoadingSpinner||this.createLoadingIcon(i),a.then(l=>{if(this.lastPromise!==n)return;const{target:c}=i;l&&l.length&&(!c||(0,o.K05)(c))&&!this.beans.overlays?.isExclusive()&&this.createContextMenu({menuItems:l,node:e,column:t,value:s,mouseEvent:i,anchorToElement:r}),this.destroyLoadingSpinner?.()}),!0}return!(void 0===a||!a?.length||(this.createContextMenu({menuItems:a,node:e,column:t,value:s,mouseEvent:i,anchorToElement:r}),0))}createLoadingIcon(e){const{beans:t}=this,s=this.getLocaleTextFunc(),i=(0,o.asF)("loadingMenuItems",t),r=(0,o.UCw)({tag:"div",cls:"ag-context-menu-loading-icon"});r.appendChild(i);const a=(0,o.gKP)(t),n=(0,o.HBH)(t);if(!n)return void(0,o.ujB)(54);n.appendChild(r),t.ariaAnnounce?.announceValue(s("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),t.environment.applyThemeClasses(r),(0,o.AOw)(r,e,t);const l=c=>{(0,o.AOw)(r,c,t)};a.addEventListener("mousemove",l),this.destroyLoadingSpinner=()=>{a.removeEventListener("mousemove",l),n.removeChild(r),this.destroyLoadingSpinner=null}}createContextMenu(e){const{menuItems:t,node:s,column:i,value:r,mouseEvent:a,anchorToElement:n}=e,{ctrlsSvc:l,focusSvc:c,popupSvc:d}=this.beans,h=l.getGridBodyCtrl().eGridBody,u=new Gu(t,i,s,r);this.createBean(u);const p=u.getGui();i||c.clearFocusedCell();const g={column:i,rowNode:s,type:"contextMenu",mouseEvent:a,ePopup:p,nudgeY:1},f=this.getLocaleTextFunc(),m=d?.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:v=>{(0,o.H9T)(this.beans,()=>{h.classList.remove(xr),this.destroyBean(u),this.dispatchVisibleChangedEvent(!1,void 0===v?"api":"ui")})},click:a,positionCallback:()=>{const v=this.gos.get("enableRtl");d?.positionPopupUnderMouseEvent({...g,nudgeX:v?-1*(p.offsetWidth+1):1})},anchorToElement:n,ariaLabel:f("ariaLabelContextMenu","Context Menu")});m&&(h.classList.add(xr),u.afterGuiAttached({container:"contextMenu",hidePopup:m.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=u,u.addEventListener("destroyed",()=>{this.activeMenu===u&&(this.activeMenu=null)}),m&&u.addEventListener("closeMenu",v=>m.hideFunc({mouseEvent:v.mouseEvent??void 0,keyboardEvent:v.keyboardEvent??void 0,forceHide:!0}));const C=a&&a instanceof MouseEvent&&"mousedown"===a.type;this.dispatchVisibleChangedEvent(!0,C?"api":"ui")}dispatchVisibleChangedEvent(e,t="ui"){this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:t})}getRowCtrl(e){const{rowIndex:t,rowPinned:s}=e||{};if(null!=t)return this.beans.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:s})||void 0}getCellGui(e,t){return e&&t&&e.getCellCtrl(t)?.eGui||void 0}getContextMenuAnchorElement(e,t){const s=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,i=this.getRowCtrl(e);return i?this.getCellGui(i,t)||(i.isFullWidth()?i.getFullWidthElement():s):s}destroy(){this.destroyLoadingSpinner?.(),super.destroy()}}],apiFunctions:{showContextMenu:function Hu(e,t){const{contextMenuSvc:s}=e;if(!s)return;const{rowNode:i,column:r,value:a,x:n,y:l}=t||{};let{x:c,y:d}=s.getContextMenuPosition(i,r);null!=n&&(c=n),null!=l&&(d=l),s.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:c,clientY:d}),rowNode:i,column:r,value:a,source:"api"})}},dependsOn:[Mr]},je="__AG_SELECT_ALL__",Ke="__AG_ADD_SELECTION_TO_FILTER__",ju=class{constructor(e,t,s,i){this.valueSvc=e,this.getValueFormatter=t,this.formatter=s,this.column=i,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(e,t,s){this.displayedKeys=Array.from(s)}updateDisplayedValuesToMatchMiniFilter(e,t,s,i,r){this.displayedKeys=[];const a=this.getValueFormatter();for(const n of s)if(null==n)r&&this.displayedKeys.push(n);else{const l=e(n),c=this.valueSvc.formatValue(this.column,null,l,a,!1);i(this.formatter(c))&&this.displayedKeys.push(n)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(e){return this.displayedKeys[e]}getSelectAllItem(){return je}getAddSelectionToFilterItem(){return Ke}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(e){this.displayedKeys.forEach(e)}someDisplayedKey(e){return this.displayedKeys.some(e)}hasGroups(){return!1}refresh(){}},Ku={tag:"div",cls:"ag-set-filter-item",attrs:{"aria-hidden":"true"},children:[{tag:"span",cls:"ag-set-filter-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-set-filter-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-set-filter-group-opened-icon"},{tag:"span",ref:"eGroupIndeterminateIcon",cls:"ag-set-filter-group-indeterminate-icon"}]},{tag:"ag-checkbox",ref:"eCheckbox",cls:"ag-set-filter-item-checkbox"}]},$u={tag:"div",cls:"ag-set-filter-item",children:[{tag:"ag-checkbox",ref:"eCheckbox",cls:"ag-set-filter-item-checkbox"}]},Yu=class extends o.uAl{constructor(e){super(e.isGroup?Ku:$u,[o.DXf]),this.eCheckbox=o.dRA,this.eGroupOpenedIcon=o.dRA,this.eGroupClosedIcon=o.dRA,this.eGroupIndeterminateIcon=o.dRA,this.formattedValue=null,this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=e.depth??0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,getLocation:()=>"setFilterValue",shouldDisplayTooltip:()=>this.shouldDisplayTooltip?.()??!0,getValueFormatted:()=>this.formattedValue,getAdditionalParams:()=>this.isTree?{level:this.depth}:{}})),this.addDestroyFunc(()=>this.destroyCellRendererComponent?.()),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&(this.addCss("ag-set-filter-indent-"+this.depth),this.getGui().style.setProperty("--ag-indentation-level",String(this.depth))),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCss("ag-set-filter-add-group-indent"),(0,o.v8T)(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),!this.params.readOnly&&this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}getFocusableElement(){return this.focusWrapper}setupExpansion(){const{eGroupClosedIcon:e,eGroupOpenedIcon:t,eGroupIndeterminateIcon:s,hasIndeterminateExpandState:i,beans:r}=this;e.appendChild((0,o.fyk)("setFilterGroupClosed",r,null)),t.appendChild((0,o.fyk)("setFilterGroupOpen",r,null));const a=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(e,{click:a}),this.addManagedElementListeners(t,{click:a}),i&&(s.appendChild((0,o.fyk)("setFilterGroupIndeterminate",r,null)),this.addManagedElementListeners(s,{click:a})),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,t){this.isGroup&&e!==this.isExpanded&&(this.isExpanded=e,t||this.dispatchLocalEvent({type:"expandedChanged",isExpanded:!!e,item:this.item}),this.setExpandedIcons(),this.refreshAriaExpanded())}setExpandedIcons(){const{isExpanded:e,hasIndeterminateExpandState:t,eGroupClosedIcon:s,eGroupOpenedIcon:i,eGroupIndeterminateIcon:r}=this;(0,o.nl0)(s,t?!1===e:!e),(0,o.nl0)(i,!0===e),t&&(0,o.nl0)(r,void 0===e)}onCheckboxChanged(e){this.isSelected=e,this.dispatchLocalEvent({type:"selectionChanged",isSelected:e,item:this.item}),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,t){this.isSelected=e,this.eCheckbox.setValue(e,t),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.getLocaleTextFunc(),t=this.eCheckbox.getValue(),s=void 0===t?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");(0,o.F4t)(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${i} (${s})`)}setupFixedAriaLabels(e){if(!this.isTree)return;const s=this.getLocaleTextFunc()("ariaFilterValue","Filter Value"),i=this.getAriaElement();(0,o.PIC)(i,`${e} ${s}`),(0,o.TMe)(i,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){const e=this.getAriaElement();(0,o.cPC)(e,this.eCheckbox.getValue())}refreshAriaExpanded(){(0,o.oAJ)(this.getAriaElement(),!!this.isExpanded)}refresh(e,t,s){this.item=e,t!==this.isSelected&&this.setSelected(t,!0),this.setExpanded(s,!0);const{cellRendererComponent:i,cellRendererParams:r,beans:a,params:n}=this;if(this.valueFunction){const l=this.valueFunction();this.setTooltipAndCellRendererParams(l,l),i||this.renderCellWithoutCellRenderer()}if(i){const l=(0,o.Jy1)(a.userCompFactory,n,r);if(!i.refresh?.(l?.params??r)){const d=i;this.renderCell(),this.destroyBean(d)}}}render(){const{params:{column:e}}=this;let{value:t}=this,s=null;"function"==typeof t?(this.valueFunction=t,s=this.valueFunction(),t=s):s=this.isTree?(0,o.qph)(t):this.getFormattedValue(e,t),this.formattedValue=s,this.setTooltipAndCellRendererParams(t,s),this.renderCell()}setTooltipAndCellRendererParams(e,t){const s=this.gos;if(this.params.showTooltips&&(!(0,o.yGc)(s)||!this.params.cellRenderer)){const i=t??(0,o.qph)(e);this.shouldDisplayTooltip=(0,o.qmn)(s,()=>this.eCheckbox.getGui().querySelector(".ag-label")),this.tooltipFeature?.setTooltipAndRefresh(i)}this.cellRendererParams=(0,o.AuN)(s,{value:e,valueFormatted:t,colDef:this.params.colDef,column:this.params.column,setTooltip:(i,r)=>{s.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=r,this.tooltipFeature?.setTooltipAndRefresh(i)}})}getFormattedValue(e,t){return this.beans.valueSvc.formatValue(e,null,t,this.valueFormatter,!1)}renderCell(){const t=(0,o.Jy1)(this.beans.userCompFactory,this.params,this.cellRendererParams)?.newAgStackInstance();null!=t?t.then(s=>{s&&(this.cellRendererComponent=s,this.eCheckbox.setLabel(s.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(s))}):this.renderCellWithoutCellRenderer()}renderCellWithoutCellRenderer(){const{valueFormatted:e,value:t}=this.cellRendererParams;let s=e??t??this.translate("blanks");"string"!=typeof s&&((0,o.ujB)(208),s=""),this.eCheckbox.setLabel(s),this.setupFixedAriaLabels(s)}getComponentHolder(){return this.params.column.getColDef()}},Xu={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches.",ariaSearchFilterValues:"Search filter values",ariaFilterList:"Filter List",filterSummaryListInactive:"is (All)",filterSummaryListSeparator:", ",filterSummaryListShort:e=>`is (${e[0]})`,filterSummaryListLong:e=>`is (${e[0]}) and ${e[1]} more`};function Vs(e,t,s){let i=e;return i?(i=i.map(r=>(0,o.qph)((0,o.X7E)(r))),!t&&s&&i.some(r=>null==r)?null==(0,o.GXs)(i)?null:i.filter(r=>null!=r):i):null}function ne(e,t,s){return(0,o.O65)(e,Xu,t,s)}var Ar=class{constructor(e,t,s,i){this.formatter=e,this.treeListPathGetter=t,this.treeListFormatter=s,this.treeDataOrGrouping=i,this.allDisplayedItemsTree=new Map,this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:je,children:this.allDisplayedItemsTree,expanded:!0,key:je,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:Ke,expanded:!0,key:Ke,parentTreeKeys:[]}}updateParams(e,t){this.treeListPathGetter=e,this.treeListFormatter=t}updateDisplayedValuesToAllAvailable(e,t,s,i){"reload"===i?this.generateItemTree(e,t,s):"otherFilter"===i?(this.updateAvailable(s),this.updateExpandAll()):"miniFilter"===i&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,t,s,i,r,a){"reload"===a?this.generateItemTree(e,t,s):"otherFilter"===a&&this.updateAvailable(s),this.updateFilter(i,r),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,t,s){const i=new Map;this.allDisplayedItemsTree=i;let r=!1;const a=this.getTreeListPathGetter(e,s);for(const n of t){const c=a(e(n))??[null],d=c.length;d>1&&(r=!0);const h=s.has(n);let p,u=i,g=[];for(let f=0;f<d;f++){const m=c[f];u||(u=new Map,p.children=u);const C=m?.toUpperCase()??null;p=u.get(C),p||(p={treeKey:m,depth:f,filterPasses:!0,expanded:!1,available:h,parentTreeKeys:g},f===c.length-1&&(p.key=n),u.set(C,p)),u=p.children,g=[...g,m]}}this.groupsExist=r,this.updateAvailable(s),this.selectAllItem.children=i,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,t){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return i=>i;let s=!1;for(const i of t){const r=e(i);if(r instanceof Date){s=!0;break}if(null!=r)break}return s?i=>(0,o.sZb)(i,!1):((0,o.ujB)(211),i=>[String(i)])}flattenItems(){this.activeDisplayedItemsFlat=[];const e=t=>{for(const s of t.values())!s.filterPasses||!s.available||(this.activeDisplayedItemsFlat.push(s),s.children&&s.expanded&&e(s.children))};e(this.allDisplayedItemsTree)}resetFilter(){const e=t=>{const s=t.children;if(s)for(const i of s.values())e(i);t.filterPasses=!0};for(const t of this.allDisplayedItemsTree.values())e(t)}updateFilter(e,t){const s=i=>!!i.available&&(null==i.treeKey?t:e(this.formatter(this.treeListFormatter?this.treeListFormatter(i.treeKey,i.depth,i.parentTreeKeys):i.treeKey)));for(const i of this.allDisplayedItemsTree.values())this.recursiveItemCheck(i,!1,s,"filterPasses")}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){const e=[];return this.forEachDisplayedKey(t=>e.push(t)),e}forEachDisplayedKey(e){const t=(s,i)=>{const r=s.children;if(r){if(!s.expanded||!i)for(const a of r.values())a.filterPasses&&t(a,!1)}else e(s.key)};this.activeDisplayedItemsFlat.forEach(s=>t(s,!0))}someDisplayedKey(e){const t=(s,i)=>{const r=s.children;if(!r)return e(s.key);if(!s.expanded||!i){for(const a of r.values())if(a.filterPasses&&t(a,!1))return!0;return!1}return!1};return this.activeDisplayedItemsFlat.some(s=>t(s,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const e=(s,i,r)=>{for(const a of s.values()){if(!a.filterPasses||!a.available||!a.children)continue;if(r=r||!a.expanded,(i=i||!!a.expanded)&&r)return;const n=e(a.children,i,r);if(void 0===n)return;n?i=!0:r=!0}return i&&r?void 0:i},t=this.getSelectAllItem();t.expanded=e(t.children,!1,!1)}recursiveItemCheck(e,t,s,i){let r=!1;const a=e.children;if(a)for(const l of a.values()){const c=this.recursiveItemCheck(l,t||s(e),s,i);r=r||c}const n=t||r||s(e);return e[i]=n,n}updateAvailable(e){const t=s=>e.has(s.key);for(const s of this.allDisplayedItemsTree.values())this.recursiveItemCheck(s,!1,t,"available")}},Pr=class extends o.Q5x{constructor(){super("setFilter","set-filter"),this.filterType="set",this.eMiniFilter=o.dRA,this.eFilterLoading=o.dRA,this.eFilterLoadingIcon=o.dRA,this.eSetFilterList=o.dRA,this.eFilterNoMatches=o.dRA,this.hardRefreshVirtualList=!1,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.selectedKeys=new Set}setParams(e){super.setParams(e);const t=this.updateHandler(e.getHandler()),{column:s,textFormatter:i,treeList:r,treeListPathGetter:a,treeListFormatter:n}=e;this.formatter=i??(l=>l??null),this.displayValueModel=r?new Ar(this.formatter,a,n,t.isTreeDataOrGrouping()):new ju(this.beans.valueSvc,()=>this.handler.valueFormatter,this.formatter,s),t.valueModel.allKeys.then(l=>{this.updateDisplayedValues("reload",l??[]),this.resetSelectionState(l??[])}),t.valueModel.isLoading()&&this.setIsLoading(!0),this.initialiseFilterBodyUi()}refresh(e){return this.params.treeList===e.treeList&&(this.updateHandler(e.getHandler()),super.refresh(e))}updateParams(e,t){super.updateParams(e,t),this.updateMiniFilter(),e.suppressSelectAll!==t.suppressSelectAll&&this.createVirtualListModel(e);const{textFormatter:s,treeListPathGetter:i,treeListFormatter:r}=e;this.formatter=s??(a=>a??null),this.displayValueModel instanceof Ar&&this.displayValueModel.updateParams(i,r),this.handler.refreshFilterValues()}updateHandler(e){return this.handler!==e&&(this.handlerDestroyFuncs?.forEach(s=>s()),this.handlerDestroyFuncs=[...this.addManagedListeners(e,{anyFilterChanged:s=>{e.valueModel.allKeys.then(i=>{this.isAlive()&&(this.updateDisplayedValues("otherFilter",i??[]),s.updated&&(this.checkAndRefreshVirtualList(),this.showOrHideResults()))})},dataChanged:({hardRefresh:s})=>{e.valueModel.allKeys.then(i=>{this.isAlive()&&(this.updateDisplayedValues("reload",i??[]),this.setSelectedModel(this.state.model?.values??null),s&&(this.hardRefreshVirtualList=!0),this.checkAndRefreshVirtualList())})}}),...this.addManagedListeners(e.valueModel,{loadingStart:()=>this.setIsLoading(!0),loadingEnd:()=>this.setIsLoading(!1)})],this.handler=e),e}updateUiVisibility(){}createBodyTemplate(){return{tag:"div",cls:"ag-set-filter",children:[{tag:"div",ref:"eFilterLoading",cls:"ag-filter-loading ag-loading ag-hidden",children:[{tag:"span",ref:"eFilterLoadingIcon",cls:"ag-loading-icon"},{tag:"span",cls:"ag-loading-text",children:ne(this,"loadingOoo")}]},{tag:"ag-input-text-field",ref:"eMiniFilter",cls:"ag-mini-filter"},{tag:"div",ref:"eFilterNoMatches",cls:"ag-filter-no-matches ag-hidden",children:ne(this,"noMatches")},{tag:"div",ref:"eSetFilterList",cls:"ag-set-filter-list",role:"presentation"}]}}getAgComponents(){return[o.n1z]}handleKeyDown(e){if(super.handleKeyDown(e),e.defaultPrevented)return;const t=()=>{if(!this.eSetFilterList.contains((0,o.UlD)(this.beans)))return;const s=this.virtualList.getLastFocusedRow();if(null==s)return;const i=this.virtualList.getComponentAt(s);if(null==i)return;e.preventDefault();const{readOnly:r}=this.params;return r?void 0:i};switch(e.key){case o.DDm.SPACE:t()?.toggleSelected();break;case o.DDm.ENTER:this.handleKeyEnter(e);break;case o.DDm.LEFT:t()?.setExpanded(!1);break;case o.DDm.RIGHT:t()?.setExpanded(!0)}}handleKeyEnter(e){e.preventDefault();const{excelMode:t,readOnly:s}=this.params;!t||s||(this.params.onAction("apply",void 0,e),"mac"===this.params.excelMode&&this.eMiniFilter.getInputElement().select())}setModelAndRefresh(e){return this.setSelectedModel(e).then(()=>{this.isAlive()&&this.checkAndRefreshVirtualList()})}setModelIntoUi(e){return this.setMiniFilter(this.params.state.state?.miniFilterValue??null),this.setModelAndRefresh(null==e?null:e.values)}getModelFromUi(){const e=this.getSelectedModel();return e?{values:e,filterType:this.filterType}:null}areNonNullModelsEqual(e,t){return(0,o.MpY)(e.values,t.values)}setIsLoading(e){(0,o.nl0)(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter(),this.initLoading()}initLoading(){const e=(0,o.asF)("setFilterLoading",this.beans,this.params.column);e&&this.eFilterLoadingIcon.appendChild(e)}initVirtualList(){const e=ne(this,"ariaFilterList"),t=!!this.params.treeList,s=this.virtualList=this.createBean(new it({cssIdentifier:"filter",ariaRole:t?"tree":"listbox",listName:e})),i=this.eSetFilterList;t&&i.classList.add("ag-set-filter-tree-list"),i.appendChild(s.getGui());const{cellHeight:r}=this.params;null!=r&&s.setRowHeight(r),s.setComponentCreator((l,c)=>this.createSetListItem(l,t,c)),s.setComponentUpdater((l,c)=>this.updateSetListItem(l,c)),this.createVirtualListModel(this.params)}createVirtualListModel(e){let t;t=e.suppressSelectAll?new Ju(this.displayValueModel):new Zu(this.displayValueModel,this.showAddCurrentSelectionToFilter.bind(this)),e.treeList&&(t=new ep(t)),this.virtualList.setModel(t)}getSelectAllLabel(){return ne(this,null!=this.miniFilterText&&this.params.excelMode?"selectAllSearchResults":"selectAll")}getAddSelectionToFilterLabel(){return ne(this,"addCurrentSelectionToFilter")}createSetListItem(e,t,s){const i=this.displayValueModel.hasGroups(),{isSelected:r,isExpanded:a}=this.isSelectedExpanded(e),{value:n,depth:l,isGroup:c,hasIndeterminateExpandState:d,selectedListener:h,expandedListener:u}=this.newSetListItemAttributes(e),g=this.createBean(new Yu({focusWrapper:s,value:n,params:this.params,translate:f=>ne(this,f),valueFormatter:this.handler.valueFormatter,item:e,isSelected:r,isTree:t,depth:l,groupsExist:i,isGroup:c,isExpanded:a,hasIndeterminateExpandState:d}));return g.addEventListener("selectionChanged",h),u&&g.addEventListener("expandedChanged",u),g}newSetTreeItemAttributes(e){const t=this.displayValueModel.hasGroups();return e.key===je?{value:()=>this.getSelectAllLabel(),isGroup:t,depth:e.depth,hasIndeterminateExpandState:!0,selectedListener:s=>this.onSelectAll(s.isSelected),expandedListener:s=>this.onExpandAll(s.item,s.isExpanded)}:e.key===Ke?{value:()=>this.getAddSelectionToFilterLabel(),depth:e.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:s=>{this.addCurrentSelectionToFilter=s.isSelected,this.refreshAfterSelection()}}:e.children?{value:this.params.treeListFormatter?.(e.treeKey,e.depth,e.parentTreeKeys)??e.treeKey,depth:e.depth,isGroup:!0,selectedListener:s=>this.onGroupItemSelected(s.item,s.isSelected),expandedListener:s=>this.onExpandedChanged(s.item,s.isExpanded)}:{value:this.params.treeListFormatter?.(e.treeKey,e.depth,e.parentTreeKeys)??e.treeKey,depth:e.depth,selectedListener:s=>this.onItemSelected(s.item.key,s.isSelected)}}newSetListItemAttributes(e){return this.isSetFilterModelTreeItem(e)?this.newSetTreeItemAttributes(e):e===je?{value:()=>this.getSelectAllLabel(),selectedListener:t=>this.onSelectAll(t.isSelected)}:e===Ke?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:t=>{this.addCurrentSelectionToFilter=t.isSelected,this.refreshAfterSelection()}}:{value:this.handler.valueModel.allValues.get(e)??null,selectedListener:t=>this.onItemSelected(t.item,t.isSelected)}}updateSetListItem(e,t){const{isSelected:s,isExpanded:i}=this.isSelectedExpanded(e);t.refresh(e,s,i)}isSelectedExpanded(e){let t,s;return this.isSetFilterModelTreeItem(e)?(s=e.expanded,t=e.key===je?this.isSelectAllSelected():e.key===Ke?this.isAddCurrentSelectionToFilterChecked():e.children?this.areAllChildrenSelected(e):this.selectedKeys.has(e.key)):t=e===je?this.isSelectAllSelected():e===Ke?this.isAddCurrentSelectionToFilterChecked():this.selectedKeys.has(e),{isSelected:t,isExpanded:s}}isSetFilterModelTreeItem(e){return void 0!==e?.treeKey}initMiniFilter(){const{eMiniFilter:e}=this;this.updateMiniFilter(),e.onValueChange(()=>this.onMiniFilterInput()),e.setInputAriaLabel(ne(this,"ariaSearchFilterValues")),this.addManagedElementListeners(e.getInputElement(),{keydown:t=>this.onMiniFilterKeyDown(t)})}updateMiniFilter(){const{eMiniFilter:e,miniFilterText:t,params:s}=this;e.setDisplayed(!s.suppressMiniFilter),e.setValue(t)}afterGuiAttached(e){super.afterGuiAttached(e),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:t}=this;t.setInputPlaceholder(ne(this,"searchOoo")),(!e||!e.suppressFocus)&&(t.isDisplayed()?t.getFocusableElement().focus():this.virtualList.awaitStable(()=>this.virtualList.focusRow(0)))}afterGuiDetached(){super.afterGuiDetached();const{column:e,excelMode:t,model:s,onStateChange:i}=this.params;this.beans.colFilter?.shouldKeepStateOnDetach(e)||(t&&this.resetMiniFilter(),(t||s!==this.state.model)&&(i({model:s,state:this.getState()}),this.showOrHideResults()))}canApply(e){return!this.params.excelMode||null==e||e.values.length>0}onNewRowsLoaded(){}setFilterValues(e){(0,o.ujB)(283),this.handler.setFilterValues(e)}resetFilterValues(){(0,o.ujB)(283),this.handler.resetFilterValues()}refreshFilterValues(){(0,o.ujB)(283),this.doRefreshFilterValues()}doRefreshFilterValues(){this.handler.refreshFilterValues()}onAnyFilterChanged(){}onMiniFilterInput(){if(!this.doSetMiniFilter(this.eMiniFilter.getValue()))return;const{applyMiniFilterWhileTyping:e,readOnly:t,excelMode:s}=this.params;this.updateUiAfterMiniFilterChange(!t&&(e||!!s),e&&!t?"debounce":void 0)}updateUiAfterMiniFilterChange(e,t){if(e){const{excelMode:s,readOnly:i,model:r}=this.params;s&&!i&&null==this.miniFilterText?this.setModelAndRefresh(r?.values??null):this.selectAllMatchingMiniFilter(!0)}this.checkAndRefreshVirtualList(),this.onUiChanged(e?t:"prevent"),this.showOrHideResults()}showOrHideResults(){const e=null!=this.miniFilterText&&this.displayValueModel.getDisplayedValueCount()<1;(0,o.nl0)(this.eFilterNoMatches,e),(0,o.nl0)(this.eSetFilterList,!e)}resetMiniFilter(){this.eMiniFilter.setValue(null,!0),this.doSetMiniFilter(null)}onMiniFilterKeyDown(e){const{excelMode:t,readOnly:s}=this.params;e.key===o.DDm.ENTER&&!t&&!s&&this.updateUiAfterMiniFilterChange(!0,"immediately")}focusRowIfAlive(e){return null==e?Promise.resolve():new Promise(t=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),t()},0)})}onSelectAll(e){e?this.selectAllMatchingMiniFilter():this.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(e,t){const s=i=>{if(!i.filterPasses)return;const r=i.children;if(r)for(const a of r.values())s(a);else this.setKeySelected(i.key,t)};s(e),this.refreshAfterSelection()}onItemSelected(e,t){this.setKeySelected(e,t),this.refreshAfterSelection()}onExpandAll(e,t){const s=i=>{if(i.filterPasses&&i.available&&i.children){for(const r of i.children.values())s(r);i.expanded=t}};s(e),this.refreshAfterExpansion()}onExpandedChanged(e,t){e.expanded=t,this.refreshAfterExpansion()}refreshAfterExpansion(){const e=this.virtualList.getLastFocusedRow();this.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(e)}refreshAfterSelection(){const e=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(e)}setMiniFilter(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()}doSetMiniFilter(e){return e=(0,o.X7E)(e),this.miniFilterText!==e&&(null===e&&(this.addCurrentSelectionToFilter=!1),this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}getUiChangeEventParams(){return{miniFilterValue:this.miniFilterText}}getState(){const e=this.miniFilterText;return e?{miniFilterValue:e}:void 0}checkAndRefreshVirtualList(){this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return(0,o.ujB)(283),this.handler.getFilterKeys()}getFilterValues(){return(0,o.ujB)(283),this.handler.getFilterValues()}refreshVirtualList(){this.params.refreshValuesOnOpen?this.doRefreshFilterValues():this.checkAndRefreshVirtualList()}isSelectAllSelected(){if(this.params.defaultToNothingSelected){if(this.hasSelections()&&this.isEverythingVisibleSelected())return!0;if(this.isNothingVisibleSelected())return!1}else{if(this.hasSelections()&&this.isNothingVisibleSelected())return!1;if(this.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(e){const t=s=>{if(s.children){let i=!1,r=!1;for(const a of s.children.values()){if(!a.filterPasses||!a.available)continue;const n=t(a);if(void 0===n||(n?i=!0:r=!0,i&&r))return}return i}return this.selectedKeys.has(s.key)};return this.params.defaultToNothingSelected?this.hasSelections()&&t(e):t(e)}resetExpansion(){if(!this.params.treeList)return;const e=this.displayValueModel.getSelectAllItem();if(this.isSetFilterModelTreeItem(e)){const t=s=>{const i=s.children;if(i){for(const r of i.values())t(r);s.expanded=!1}};t(e),this.updateDisplayedValues("expansion")}}getModelAsString(e){return this.handler.getModelAsString(e)}getPositionableElement(){return this.eSetFilterList}updateDisplayedValues(e,t){if("expansion"===e)return void this.displayValueModel.refresh();const s=this.handler,i=s.valueModel;if(null==this.miniFilterText)return void this.displayValueModel.updateDisplayedValuesToAllAvailable(l=>i.allValues.get(l)??null,t,i.availableKeys,e);const r=s.caseFormat(this.formatter(this.miniFilterText)||""),a=l=>null!=l&&s.caseFormat(l).indexOf(r)>=0,n=!!this.params.excelMode&&a(ne(this,"blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(l=>i.allValues.get(l)??null,t,i.availableKeys,a,n,e)}hasSelections(){return this.params.defaultToNothingSelected?this.selectedKeys.size>0:this.handler.valueModel.allValues.size!==this.selectedKeys.size}isInWindowsExcelMode(){return"windows"===this.params.excelMode}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&(0,o.Qmv)(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(e=!1){null==this.miniFilterText?this.selectedKeys=new Set(this.handler.valueModel.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(t=>this.selectedKeys.add(t)))}deselectAllMatchingMiniFilter(){null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.delete(e))}setKeySelected(e,t){t?this.selectedKeys.add(e):(this.params.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e))}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>!this.selectedKeys.has(e))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>this.selectedKeys.has(e))}getSelectedModel(){if(!this.hasSelections())return null;const e=this.isAddCurrentSelectionToFilterChecked()?this.params.model?.values:void 0;if(e?.length){if(this.selectedKeys){const t=new Set([...e,...this.selectedKeys]);return Array.from(t)}return Array.from(e)}return Array.from(this.selectedKeys)}setSelectedModel(e){const t=this.handler,s=t.valueModel;return s.allKeys.then(i=>{if(null==e)this.resetSelectionState(i??[]);else{this.selectedKeys.clear();const r=new Map;s.allValues.forEach((a,n)=>{r.set(t.caseFormat(n),n)}),e.forEach(a=>{const n=t.caseFormat((0,o.X7E)(a)),l=r.get(n);void 0!==l&&this.selectedKeys.add(l)})}})}resetSelectionState(e){this.params.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}destroy(){this.virtualList=this.destroyBean(this.virtualList),this.handlerDestroyFuncs?.forEach(e=>e()),this.handler=void 0,this.displayValueModel=void 0,this.selectedKeys.clear(),super.destroy()}},Ju=class{constructor(e){this.model=e}getRowCount(){return this.model.getDisplayedValueCount()}getRow(e){return this.model.getDisplayedItem(e)}areRowsEqual(e,t){return e===t}},Zu=class{constructor(e,t){this.model=e,this.showAddCurrentSelectionToFilter=t}getRowCount(){const t=this.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+t}getRow(e){if(0===e)return this.model.getSelectAllItem();const t=this.showAddCurrentSelectionToFilter(),s=t?2:1;return 1===e&&t?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(e-s)}areRowsEqual(e,t){return e===t}},ep=class{constructor(e){this.model=e}getRowCount(){return this.model.getRowCount()}getRow(e){return this.model.getRow(e)}areRowsEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.treeKey===t.treeKey&&e.depth===t.depth}},tp=class extends o.XQb{constructor(e,t,s,i,r){super(),this.createKey=e,this.caseFormat=t,this.getValue=s,this.isTreeDataOrGrouping=i,this.isTreeData=r}extractUniqueValuesAsync(e,t){return new o.oY$(s=>{if(this.beans.rowModel.isRowDataLoaded())s(this.extractUniqueValues(e,t));else{const[i]=this.addManagedEventListeners({rowCountReady:()=>{i?.(),s(this.extractUniqueValues(e,t))}})}})}extractUniqueValues(e,t){const s=new Map,i=this.extractExistingFormattedKeys(t),r=new Set,a=this.isTreeData(),n=this.isTreeDataOrGrouping(),l=this.beans.rowGroupColsSvc?.columns,c=this.gos.get("groupAllowUnbalanced"),d=(h,u)=>{const p=this.caseFormat(h);if(!r.has(p)){r.add(p);let g=h,f=(0,o.X7E)(u);const m=i?.get(p);null!=m&&(g=m,f=t.get(m)),s.set(g,f)}};return this.beans.rowModel.forEachLeafNode(h=>{if(!h.data||!e(h))return;if(n)return void this.addValueForTreeDataOrGrouping(h,a,l,d,c);const u=this.getValue(h);null!=u&&Array.isArray(u)?(u.forEach(p=>{d(this.createKey(p,h),p)}),0===u.length&&d(null,null)):d(this.createKey(u,h),u)}),s}addValueForTreeDataOrGrouping(e,t,s=[],i,r){let a;if(t){if(e.childrenAfterGroup?.length)return;a=e.getRoute()??[e.key??e.id]}else a=s.map(l=>this.beans.valueSvc.getKeyForNode(l,e)),a.push(this.getValue(e));const n=Vs(a,t,r);i(this.createKey(n),n)}extractExistingFormattedKeys(e){if(!e)return null;const t=new Map;return e.forEach((s,i)=>{t.set(this.caseFormat(i),i)}),t}},sp=class{constructor(e){this.caseFormat=e,this.keys=null}isNull(){return null==this.keys}isEmpty(){return!this.keys?.size}update(e){const t=new Set;this.keys=t;const s=e?.values;if(s){const i=this.caseFormat;for(let r=0,a=s.length;r<a;r++)t.add(i(s[r]))}}has(e){return!!this.keys?.has(this.caseFormat(e))}destroy(){this.keys=null}},Dr=(e=>(e[e.PROVIDED_LIST=0]="PROVIDED_LIST",e[e.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",e[e.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES",e))(Dr||{}),Rr=Dr,ip=class extends o.XQb{constructor(e,t,s,i,r){super(),this.clientSideValuesExtractor=e,this.caseFormat=t,this.createKey=s,this.isTreeDataOrGrouping=i,this.params=r,this.allValues=new Map,this.availableKeys=new Set,this.providedValues=null,this.initialised=!1}postConstruct(){const e=this.params,t=e.handlerParams.filterParams.values;this.updateParams(e),null==t?this.valuesType=2:(this.valuesType=Array.isArray(t)?0:1,this.providedValues=t),this.updateAllValues()}refresh(e){const t=e.handlerParams;if("colDef"!==t.source)return;const{values:s,suppressSorting:i}=t.filterParams,r=this.providedValues,a=this.params.handlerParams.filterParams.suppressSorting;this.params=e,this.updateParams(e),this.providedValues=s??null,(this.providedValues!==r||i!==a)&&(s&&0!==s.length?this.valuesType=Array.isArray(s)?0:1:(this.valuesType=2,this.providedValues=null),this.updateAllValues())}updateParams(e){const{handlerParams:{colDef:t,filterParams:{comparator:s,treeList:i,treeListPathGetter:r}},usingComplexObjects:a}=e,n=s??t.comparator,l=this.isTreeDataOrGrouping();let c;c=l&&!n?function qu(){return([e,t],[s,i])=>{if(null==t)return null==i?0:-1;if(null==i)return 1;for(let r=0;r<t.length;r++){if(r>=i.length)return 1;const a=(0,o.j0N)(t[r],i[r]);if(0!==a)return a}return 0}}():!i||r||n?([d,h],[u,p])=>n(h,p):([d,h],[u,p])=>(0,o.j0N)(h,p),this.entryComparator=c,this.keyComparator=n??o.j0N,this.compareByValue=!!(a&&n||l||i&&!r)}updateAllValues(){return this.allKeys=new o.oY$(e=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync().then(t=>e(this.processAllValues(t)));break;case 0:e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break;case 1:{this.dispatchLocalEvent({type:"loadingStart"});const t=this.providedValues,{column:s,colDef:i}=this.params.handlerParams,r=(0,o.AuN)(this.gos,{success:a=>{this.dispatchLocalEvent({type:"loadingEnd"}),e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(a))))},colDef:i,column:s});window.setTimeout(()=>t(r),0);break}}}),this.allKeys.then(e=>{this.updateAvailableKeys(e??[]),this.initialised=!0}),this.allKeys}getAvailableValues(e){return this.sortKeys(this.getValuesFromRows(e))}overrideValues(e){return this.allKeys.then(()=>{this.valuesType=0,this.providedValues=e})}refreshAvailable(){return new o.oY$(e=>{this.showAvailableOnly()?this.allKeys.then(t=>{this.updateAvailableKeys(t??[]),e(!0)}):e(!1)})}refreshAll(){return new o.oY$(e=>{this.allKeys.then(()=>{this.updateAllValues().then(()=>{e()})})})}isLoading(){return!this.initialised&&1===this.valuesType}isInitialised(){return this.initialised}getValueForFormatter(e){return this.initialised?this.allValues.get(e):e}getAvailableKeys(e){return this.initialised?e.filter(t=>this.availableKeys.has(t)):e}getParamsForValuesFromRows(e){if(this.clientSideValuesExtractor)return e&&!this.params.handlerParams.filterParams.caseSensitive?this.allValues:void 0;(0,o.CkN)(113)}getValuesFromRows(e){const t=this.getParamsForValuesFromRows(!0);return this.clientSideValuesExtractor?.extractUniqueValues(e,t)??null}getValuesFromRowsAsync(){const e=this.getParamsForValuesFromRows(!1);return this.clientSideValuesExtractor?.extractUniqueValuesAsync(()=>!0,e)??o.oY$.resolve(null)}processAllValues(e){const t=this.sortKeys(e);return this.allValues=e??new Map,t}uniqueValues(e){const t=new Map,s=new Set,{caseFormat:i,createKey:r}=this;return(e??[]).forEach(a=>{const n=(0,o.X7E)(a),l=r(n),c=i(l);s.has(c)||(s.add(c),t.set(l,n))}),t}validateProvidedValues(e){if(this.params.usingComplexObjects&&e?.length){const t=e[0];t&&"object"!=typeof t&&"function"!=typeof t&&(null==this.createKey(t)?(0,o.ujB)(209):(0,o.ujB)(210))}return e}sortKeys(e){const t=e??new Map,s=this.params.handlerParams.filterParams;if(s.suppressSorting)return Array.from(t.keys());let i;return i=this.compareByValue?Array.from(t.entries()).sort(this.entryComparator).map(([r])=>r):Array.from(t.keys()).sort(this.keyComparator),s.excelMode&&t.has(null)&&(i=i.filter(r=>null!=r),i.push(null)),i}showAvailableOnly(){return 2===this.valuesType}updateAvailableKeys(e){const t=this.showAvailableOnly()?this.getAvailableValues(s=>this.params.handlerParams.doesRowPassOtherFilter(s)):e;this.availableKeys=new Set(t),this.dispatchLocalEvent({type:"availableValuesChanged"})}},ap={tag:"div",cls:"ag-floating-filter-input ag-set-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},Er={moduleName:"SetFilter",version:R,userComponents:{agSetColumnFilter:{classImp:Pr,params:{useForm:!0},processParams:e=>(function Qu(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,(0,o.ujB)(207))}(e),e)},agSetColumnFloatingFilter:class extends o.uAl{constructor(){super(ap,[o.n1z]),this.eFloatingFilterText=o.dRA,this.listenerAdded=!1}init(e){this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(e)}setParams(e){const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0),s=this.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(`${t} ${s("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")&&this.updateFloatingFilterText(e.model)}refresh(e){this.params=e,this.setParams(e)}onParentModelChanged(e){this.updateFloatingFilterText(e)}parentSetFilterInstance(e){this.params.parentFilterInstance(t=>{t instanceof Pr?e(t):(0,o.CkN)(248)})}addAvailableValuesListener(){const e=t=>{if(null==t||!t.isAlive())return;const s=t.valueModel;this.destroyListeners=s.addManagedListeners(s,{availableValuesChanged:()=>this.updateFloatingFilterText(t.params.model),destroyed:()=>{this.listenerAdded=!1,this.destroyListeners=void 0}})};this.gos.get("enableFilterHandlers")?e(this.params.getHandler()):this.parentSetFilterInstance(t=>{e(t.handler)}),this.listenerAdded=!0}updateFloatingFilterText(e){this.listenerAdded||this.addAvailableValuesListener(),null==e?this.eFloatingFilterText.setValue(""):this.gos.get("enableFilterHandlers")?this.eFloatingFilterText.setValue(this.params.getHandler().getModelAsString?.(e)??""):this.parentSetFilterInstance(t=>{this.eFloatingFilterText.setValue(t.getModelAsString(e))})}destroy(){const e=this.destroyListeners;e&&(e.forEach(t=>t()),e.length=0),super.destroy()}}},dynamicBeans:{agSetColumnFilterHandler:class extends o.XQb{constructor(){super(...arguments),this.filterType="set",this.treeDataTreeList=!1,this.groupingTreeList=!1,this.caseSensitive=!1,this.noValueFormatterSupplied=!1}init(e){this.updateParams(e);const t=this.isTreeDataOrGrouping.bind(this),i=this.createKey,r=this.caseFormat.bind(this),{gos:a,beans:n}=this,l=(0,o.dbY)(a,n.rowModel)?this.createManagedBean(new tp(i,r,e.getValue,t,()=>this.treeDataTreeList)):void 0;this.valueModel=this.createManagedBean(new ip(l,r,i,t,{handlerParams:e,usingComplexObjects:!!(e.filterParams.keyCreator??e.colDef.keyCreator)})),this.appliedModel=new sp(this.caseFormat.bind(this)),this.appliedModel.update(e.model),this.validateModel(e),this.addEventListenersForDataChanges()}refresh(e){this.updateParams(e),this.valueModel.refresh({handlerParams:e,usingComplexObjects:!!(e.filterParams.keyCreator??e.colDef.keyCreator)}),this.appliedModel.update(e.model),this.validateModel(e)}updateParams(e){this.params=e;const{column:t,colDef:s,filterParams:{caseSensitive:i,treeList:r,keyCreator:a,valueFormatter:n}}=e;this.caseSensitive=!!i;const l=t.getId().startsWith(o.JPk);this.treeDataTreeList=this.gos.get("treeData")&&!!r&&l,this.groupingTreeList=!!this.beans.rowGroupColsSvc?.columns.length&&!!r&&l;const c=a??s.keyCreator;this.createKey=this.generateCreateKey(c,this.isTreeDataOrGrouping()),this.setValueFormatter(n,c,!!r,!!s.refData)}doesFilterPass(e){const{appliedModel:t,treeDataTreeList:s,groupingTreeList:i}=this;if(t.isNull())return!0;if(t.isEmpty())return!1;const{node:r}=e;if(s)return this.doesFilterPassForTreeData(r);if(i)return this.doesFilterPassForGrouping(r);const a=this.params.getValue(r);return null!=a&&Array.isArray(a)?0===a.length?t.has(null):a.some(n=>t.has(this.createKey(n,r))):t.has(this.createKey(a,r))}getFormattedValue(e){let t=this.valueModel.getValueForFormatter(e);return this.noValueFormatterSupplied&&this.isTreeDataOrGrouping()&&Array.isArray(t)&&(t=(0,o.GXs)(t)),this.beans.valueSvc.formatValue(this.params.column,null,t,this.valueFormatter,!1)??(0,o.qph)(t)??ne(this,"blanks")}getModelAsString(e,t){const{values:s}=e??{},i="filterToolPanel"===t;if(null==s)return i?ne(this,"filterSummaryListInactive"):"";const r=this.valueModel.getAvailableKeys(s),a=r.length,l=r.slice(0,i?3:10).map(c=>this.getFormattedValue(c));if(i){const c=l.join(ne(this,"filterSummaryListSeparator"));return a>3?ne(this,"filterSummaryListLong",[c,String(a-3)]):ne(this,"filterSummaryListShort",[c])}return`(${a}) ${l.join(",")}${a>10?",...":""}`}onAnyFilterChanged(){window.setTimeout(()=>{this.isAlive()&&this.valueModel.refreshAvailable().then(e=>{this.dispatchLocalEvent({type:"anyFilterChanged",updated:!!e})})})}onNewRowsLoaded(){this.syncAfterDataChange()}setFilterValues(e){this.valueModel.overrideValues(e).then(()=>{this.refreshFilterValues()})}resetFilterValues(){this.valueModel.valuesType=Rr.TAKEN_FROM_GRID_VALUES,this.syncAfterDataChange()}refreshFilterValues(){this.valueModel.isInitialised()&&this.valueModel.refreshAll().then(()=>{this.dispatchLocalEvent({type:"dataChanged",hardRefresh:!0}),this.validateModel(this.params,void 0,!0)})}getFilterKeys(){return Array.from(this.valueModel.allValues.keys())}getFilterValues(){return Array.from(this.valueModel.allValues.values())}isTreeDataOrGrouping(){return this.treeDataTreeList||this.groupingTreeList}caseFormat(e){return null==e||"string"!=typeof e||this.caseSensitive?e:e.toUpperCase()}addEventListenersForDataChanges(){this.addManagedPropertyListeners(["groupAllowUnbalanced"],()=>this.syncAfterDataChange());const e=(0,o.pkA)(this,this.syncAfterDataChange.bind(this),0);this.addManagedEventListeners({cellValueChanged:t=>{t.column===this.params.column&&e()}})}syncAfterDataChange(){this.isValuesTakenFromGrid()&&this.valueModel.refreshAll().then(()=>{this.dispatchLocalEvent({type:"dataChanged"}),this.validateModel(this.params,{afterDataChange:!0})})}validateModel(e,t,s){const i=this.valueModel;i.allKeys.then(()=>{const r=e.model;if(null==r)return;const a=new Map,n=u=>a.set(this.caseFormat(u),u);if(s)for(const u of i.availableKeys)n(u);else i.allValues.forEach((u,p)=>n(p));const l=[];let c=!1;for(const u of r.values){const p=this.caseFormat((0,o.X7E)(u)),g=a.get(p);void 0!==g?(l.push(g),g!==u&&(c=!0)):c=!0}const d=l.length;if(0===d&&e.filterParams.excelMode)return void e.onModelChange(null,t);const h=d===a.size;(c||!r.filterType||h)&&e.onModelChange(h?null:{filterType:this.filterType,values:l},t)})}isValuesTakenFromGrid(){return this.valueModel.valuesType===Rr.TAKEN_FROM_GRID_VALUES}doesFilterPassForTreeData(e){if(e.childrenAfterGroup?.length)return!1;const{gos:t,appliedModel:s}=this;return s.has(this.createKey(Vs(e.getRoute()??[e.key??e.id],!0,t.get("groupAllowUnbalanced"))))}doesFilterPassForGrouping(e){const{appliedModel:t,params:s,gos:i,beans:{rowGroupColsSvc:r,valueSvc:a}}=this,n=(r?.columns??[]).map(l=>a.getKeyForNode(l,e));return n.push(s.getValue(e)),t.has(this.createKey(Vs(n,!1,i.get("groupAllowUnbalanced"))))}generateCreateKey(e,t){return t&&!e?((0,o.CkN)(250),()=>null):e?(s,i=null)=>{const r=this.getKeyCreatorParams(s,i);return(0,o.X7E)(e(r))}:s=>(0,o.X7E)((0,o.qph)(s))}getKeyCreatorParams(e,t=null){const{colDef:s,column:i}=this.params;return(0,o.AuN)(this.gos,{value:e,colDef:s,column:i,node:t,data:t?.data})}setValueFormatter(e,t,s,i){let r=e;if(!r){if(t&&!s)return void(0,o.CkN)(249);this.noValueFormatterSupplied=!0,i||(r=a=>(0,o.qph)(a.value))}this.valueFormatter=r}destroy(){this.appliedModel.destroy(),super.destroy(),this.valueModel=void 0}}},icons:{setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",setFilterLoading:"loading"},dependsOn:[B,o.Sxk]},be=class extends o.uAl{constructor(e={}){super(function Ep(e){const t=e.cssIdentifier||"default";return{tag:"div",cls:`ag-group ag-${t}-group`,role:"presentation",children:[{tag:"div",ref:"eToolbar",cls:`ag-group-toolbar ag-${t}-group-toolbar`,children:[{tag:"ag-checkbox",ref:"cbGroupEnabled"}]},{tag:"div",ref:"eContainer",cls:`ag-group-container ag-group-container-${e.direction||"vertical"} ag-${t}-group-container`}]}}(e),[o.DXf]),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1,this.eToolbar=o.dRA,this.cbGroupEnabled=o.dRA,this.eContainer=o.dRA;const{enabled:t,items:s,suppressEnabledCheckbox:i,expanded:r,suppressToggleExpandOnEnableChange:a,useToggle:n}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=t??!0,this.items=s||[],this.useToggle=n??!1,this.alignItems=e.alignItems||"center",this.expanded=r??!0,null!=i&&(this.suppressEnabledCheckbox=i),null!=a&&(this.suppressToggleExpandOnEnableChange=a)}postConstruct(){if(this.setupTitleBar(),this.items.length){const r=this.items;this.items=[],this.addItems(r)}const e=this.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:t,onExpandedChange:s,suppressOpenCloseIcons:i}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(i??!1),this.refreshChildDisplay(),(0,o.nl0)(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),null!=t&&this.onEnableChange(t),null!=s&&this.onExpandedChange(s)}refreshChildDisplay(){(0,o.nl0)(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),this.eTitleBar?.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){return this.alignItems!==e&&this.removeCss(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e,this.addCss(`ag-group-item-alignment-${this.alignItems}`),this}toggleGroupExpand(e,t){if(this.eTitleBar?.isSuppressCollapse()&&!this.useToggle)e=!0,t=!0;else if(this.expanded===(e=e??!this.expanded))return this;return this.expanded=e,this.refreshChildDisplay(),(0,o.nl0)(this.eContainer,e),t||this.dispatchLocalEvent({type:e?"expanded":"collapsed"}),this}addItems(e){e.forEach(t=>this.addItem(t))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,t){const s=this.eContainer,i=e instanceof o.uAl?e.getGui():e;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),t?(s.insertAdjacentElement("afterbegin",i),this.items.unshift(i)):(s.appendChild(i),this.items.push(i))}hideItem(e,t){(0,o.nl0)(this.items[t],!e)}getItemIndex(e){const t=e instanceof o.uAl?e.getGui():e;return this.items.indexOf(t)}setTitle(e){return this.eTitleBar?.setTitle(e),this}addTitleBarWidget(e){return this.eTitleBar?.addWidget(e),this}addCssClassToTitleBar(e){this.eTitleBar?.addCss(e)}dispatchEnableChangeEvent(e){this.dispatchLocalEvent({type:"enableChange",enabled:e})}setEnabled(e,t,s){return this.enabled=e,this.refreshDisabledStyles(),s||this.toggleGroupExpand(e),t||(this.cbGroupEnabled.setValue(e),this.eToggle?.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListeners(this,{enableChange:t=>e(t.enabled)}),this}onExpandedChange(e){return this.addManagedListeners(this,{expanded:()=>e(!0),collapsed:()=>e(!1)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){return this.eTitleBar?.hideOpenCloseIcons(e),this}refreshDisabledStyles(){const e=!this.enabled;this.eContainer.classList.toggle("ag-disabled",e),this.eTitleBar?.refreshDisabledStyles(this.suppressEnabledCheckbox&&e),this.eContainer.classList.toggle("ag-disabled-group-container",e)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new Lp(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListeners(e,{expandedChanged:t=>this.toggleGroupExpand(t.expanded)}),e}createToggleTitleBar(){const e=this.createManagedBean(new o.bLJ({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:t=>{this.setEnabled(t,!0),this.dispatchEnableChangeEvent(t)}}));return e.addCss("ag-group-title-bar"),e.addCss(`ag-${this.params.cssIdentifier??"default"}-group-title-bar ag-unselectable`),this.eToggle=e,this.toggleGroupExpand(this.enabled),e}},Hs="ag-disabled-group-title-bar",Lp=class extends o.uAl{constructor(e={}){super(function Ip(e){const t=e.cssIdentifier??"default";return{tag:"div",cls:`ag-group-title-bar ag-${t}-group-title-bar ag-unselectable`,role:e.suppressKeyboardNavigation?"presentation":"role",children:[{tag:"span",ref:"eGroupOpenedIcon",cls:`ag-group-title-bar-icon ag-${t}-group-title-bar-icon`,role:"presentation"},{tag:"span",ref:"eGroupClosedIcon",cls:`ag-group-title-bar-icon ag-${t}-group-title-bar-icon`,role:"presentation"},{tag:"span",ref:"eTitle",cls:`ag-group-title ag-${t}-group-title`}]}}(e)),this.suppressOpenCloseIcons=!1,this.suppressKeyboardNavigation=!1,this.eGroupOpenedIcon=o.dRA,this.eGroupClosedIcon=o.dRA,this.eTitle=o.dRA;const{title:t,suppressOpenCloseIcons:s,suppressKeyboardNavigation:i}=e;t&&t.length>0&&(this.title=t),null!=s&&(this.suppressOpenCloseIcons=s),this.suppressKeyboardNavigation=i??!1}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild((0,o.fyk)("accordionClosed",this.beans,null)),this.eGroupOpenedIcon.appendChild((0,o.fyk)("accordionOpen",this.beans,null)),this.addManagedElementListeners(this.getGui(),{click:()=>this.dispatchExpandChanged(),keydown:e=>{switch(e.key){case o.DDm.ENTER:case o.DDm.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case o.DDm.RIGHT:case o.DDm.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===o.DDm.RIGHT)}}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||(0,o.oAJ)(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;(0,o.nl0)(this.eGroupOpenedIcon,t&&e),(0,o.nl0)(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){this.dispatchLocalEvent({type:"expandedChanged",expanded:e})}setTitle(e){const t=this.getGui(),s=!!e&&e.length>0;this.eTitle.textContent=(e=s?e:void 0)??"",(0,o.nl0)(t,s),e!==this.title&&(this.title=e);const i=t.classList.contains(Hs);return this.refreshDisabledStyles(i),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add(Hs),t.removeAttribute("tabindex")):(t.classList.remove(Hs),"string"!=typeof this.title||this.suppressKeyboardNavigation?t.removeAttribute("tabindex"):t.setAttribute("tabindex","0"))}};function Jt(e){const{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}function Zt(e,t){if(null!=e)for(let s=e.length-1;s>=0;s--)t(e[s],s)}function Mt(e,t,s,i){const r=[],a=e?.filterModels;for(let n=0;n<t;n++)r[n]=(n===i?s:a?.[n])??null;return r.every(n=>null==n)?null:{filterType:"multi",filterModels:r}}function Se(e,t){return e?.filterModels?.[t]??null}function es(e,t,s,i){const r=s.filterValueGetter;return r?e.colFilter.createGetValue(t,r):i}var kr=class extends o.aJZ{constructor(){super({tag:"div",cls:"ag-multi-filter ag-menu-list-compact"}),this.filterDefs=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.lastActivatedMenuItem=null}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}refreshGui(e){return e===this.lastOpenedInContainer?o.oY$.resolve():(this.tabGuardFeature.removeAllChildrenExceptTabGuards(),this.destroyChildren(),o.oY$.all(this.getFilterWrappers().map((t,s)=>{if(!t)return o.oY$.resolve(null);const i=this.getFilterFromWrapper(t),r=this.getCompFromWrapper(t),a=this.filterDefs[s],n=function kp(e,t){return null!=t.title?t.title:e instanceof o.Q5x?e.getFilterTitle():"Filter"}(i,a);let l;if("subMenu"===a.display&&"toolPanel"!==e)l=this.insertFilterMenu(r,n).then(c=>c.getGui());else if("subMenu"===a.display||"accordion"===a.display){const c=this.insertFilterGroup(i,r,n);l=o.oY$.resolve(c.getGui())}else l=o.oY$.resolve(r.getGui());return l})).then(t=>{t.forEach((s,i)=>{s&&(i>0&&this.appendChild((0,o.UCw)({tag:"div",cls:"ag-filter-separator"})),this.appendChild(s))}),this.filterGuis=t,this.lastOpenedInContainer=e}))}destroyChildren(){this.guiDestroyFuncs.forEach(e=>e()),this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,t){const s=e.getGui();(0,o.lXX)(s,"dialog");const i=this.createBean(new ks);return i.init({menuItemDef:{name:t,subMenu:[],subMenuRole:"dialog",cssClasses:["ag-multi-filter-menu-item"],menuItem:tr,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:e,contextParams:{column:null,node:null,value:null}}).then(()=>{i.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(i)),this.addManagedListeners(i,{menuItemActivated:a=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==a.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=a.menuItem}});const r=i.getGui();return i.addManagedElementListeners(r,{keydown:a=>{const{key:n}=a;switch(n){case o.DDm.UP:case o.DDm.RIGHT:case o.DDm.DOWN:case o.DDm.LEFT:a.preventDefault(),n===o.DDm.RIGHT&&i.openSubMenu(!0)}},focusin:()=>i.activate(),focusout:()=>{!i.isSubMenuOpen()&&!i.isSubMenuOpening()&&i.deactivate()}}),i})}insertFilterGroup(e,t,s){const i=this.createBean(new be({title:s,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(i)),i.addItem(t.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListeners(i,{expanded:()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})}),i}afterGuiAttached(e){let t;e?(this.hidePopup=e.hidePopup,t=this.refreshGui(e.container)):(this.hidePopup=void 0,t=o.oY$.resolve());const s=e?.suppressFocus;t.then(()=>{const{filterDefs:i,filterGuis:r,beans:a}=this,n=this.getFilterWrappers();let l=!!s;i&&Zt(i,(d,h)=>{const u=0===h,p=d.display&&"inline"!==d.display,g=s||!u||p,f={...e??{},suppressFocus:g},m=n[h],C=m?this.getFilterFromWrapper(m):void 0;if(m){const v=this.getCompFromWrapper(m);v!==C&&v.afterGuiAttached(f)}if(C&&(this.executeFunctionIfExistsOnFilter(C,"afterGuiAttached",f),u&&!g&&(l=!0)),!s&&u&&p){const v=r[h];v&&((0,o.YtT)(v)||v.focus({preventScroll:!0}),l=!0)}});const c=(0,o.UlD)(a);!l&&((0,o.sNX)(a)||this.getGui().contains(c))&&this.forceFocusOutOfContainer(!0)})}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged",e=>this.executeOnWrapper(e,"onAnyFilterChanged"))}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded",e=>this.executeOnWrapper(e,"onNewRowsLoaded"))}destroy(){this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeOnWrapper(e,t){}executeFunctionIfExists(e,t){Zt(this.getFilterWrappers(),s=>{s&&(t?.(s),this.executeFunctionIfExistsOnFilter(this.getFilterFromWrapper(s),e))})}executeFunctionIfExistsOnFilter(e,t,...s){const i=e[t];"function"==typeof i&&i.apply(e,s)}onFocusIn(e){const t=this.lastActivatedMenuItem;null!=t&&!t.getGui().contains(e.target)&&(t.deactivate(),this.lastActivatedMenuItem=null)}},Gr=class extends kr{constructor(){super(...arguments),this.filterType="multi",this.wrappers=[],this.activeFilterIndices=[],this.afterFiltersReadyFuncs=[]}init(e){this.params=e,this.filterDefs=Jt(e);const t=(0,o.$f9)(this.beans.colFilter.model,e.column.getColId()),{filterChangedCallback:s}=e;this.filterChangedCallback=s;const i=this.filterDefs.map((r,a)=>this.createFilter(r,a,t));return new o.oY$(r=>{o.oY$.all(i).then(a=>{this.wrappers=a,this.refreshGui("columnMenu").then(()=>{r()})})}).then(()=>{this.afterFiltersReadyFuncs.forEach(r=>r()),this.afterFiltersReadyFuncs.length=0})}refresh(e){return this.params=e,!0}isFilterActive(){return this.wrappers.some(e=>{if(!e)return!1;const{filter:t,handler:s,model:i}=e;return s?null!=i:t.isFilterActive()})}getLastActiveFilterIndex(){const e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}doesFilterPass(e,t){return this.wrappers.every((s,i)=>{if(!s||null!=t&&i===t)return!0;const{handler:r,filter:a,model:n}=s;return r?null==n||r.doesFilterPass({...e,model:n,handlerParams:s.handlerParams}):!a.isFilterActive()||a.doesFilterPass(e)})}getModelFromUi(){return{filterType:this.filterType,filterModels:this.wrappers.map(t=>{if(!t)return null;const s=t.filter;return"function"==typeof s.getModelFromUi?s.getModelFromUi():null})}}getModel(){return this.isFilterActive()?{filterType:this.filterType,filterModels:this.wrappers.map(t=>{if(!t)return null;const{filter:s,handler:i,model:r}=t;return i?r:s.isFilterActive()?s.getModel():null})}:null}setModel(e){const s=[];return this.wrappers.forEach((i,r)=>{if(!i)return;const a=Se(e,r),{filter:n,filterParams:l,handler:c,handlerParams:d,state:h}=i;s.push(c?(0,o.SvK)(()=>o.oY$.resolve({filter:n,filterParams:l}),c,d,a,h??{model:a},"api").then(()=>{i.model=a,this.updateActiveListForHandler(r,a)}):((i,r)=>new o.oY$(a=>{const n=i.setModel(r);n?n.then(()=>a()):a()}))(n,a).then(()=>{this.updateActiveListForFilter(r,n)}))}),o.oY$.all(s).then(()=>{})}applyModel(e="api"){let t=!1;return this.wrappers.forEach(s=>{if(s){const i=s.filter;i instanceof o.Q5x&&(t=i.applyModel(e)||t)}}),t}getChildFilterInstance(e){return this.wrappers[e]?.filter}destroy(){this.wrappers.forEach(e=>{this.destroyBean(e?.filter),this.destroyBean(e?.handler)}),this.wrappers.length=0,super.destroy()}getFilterWrappers(){return this.wrappers}getFilterFromWrapper(e){return e.filter}getCompFromWrapper(e){return e.comp}executeOnWrapper(e,t){e.handler?.[t]?.()}createFilter(e,t,s){const i=this.params.column;let a,r=null;const n=this.beans,{compDetails:l,handler:c,handlerParams:d,createFilterUi:h}=n.colFilter.createFilterInstance(i,e,"agTextColumnFilter",(p,g)=>{const f={...p,filterChangedCallback:g?()=>{}:m=>{this.executeWhenAllFiltersReady(()=>this.onFilterModelChanged(t,m))},doesRowPassOtherFilter:m=>p.doesRowPassOtherFilter(m)&&this.doesFilterPass({node:m,data:m.data},t),getValue:es(n,i,e,p.getValue)};return g&&(r=Se(s,t),a=this.updateDisplayParams(f,t,r,()=>l,()=>c)),f});if(!h)return o.oY$.resolve(null);let u;if(c){const{onModelChange:p,doesRowPassOtherFilter:g,getValue:f}=d;u={...d,onModelChange:(m,C)=>p(Mt(this.params.model,this.wrappers.length,m,t),C),doesRowPassOtherFilter:m=>g(m)&&this.doesFilterPass({node:m,data:m.data},t),getValue:es(n,i,e,f)},c.init?.({...u,model:r,source:"init"})}return h().then(p=>{if(!c)return{filter:p,comp:p};const g=l?.params;return{filter:p,comp:a(p),filterParams:g,handler:c,handlerParams:u,model:r}})}updateDisplayParams(e,t,s,i,r){const a=this.params.column,n=new o.$UK;e.model=s,e.state={model:s},e.onModelChange=(d,h)=>{const u=this.wrappers[t];u&&(0,o.SvK)(()=>o.oY$.resolve({filter:u.filter,filterParams:u.filterParams}),u.handler,u.handlerParams,d,u.state??{model:d},"ui").then(()=>{u.model=d,this.onHandlerModelChanged(t,d,h)})},e.getHandler=r;const l=(d,h)=>{d.state=h,n.dispatchEvent({type:"filterStateChanged",column:a,state:h})};e.onStateChange=d=>{const h=this.wrappers[t];h&&(l(h,d),(0,o.nNd)(h.filter,h.filterParams,h.model??null,d,"ui"))};const c=(d,h,u)=>{const p=this.wrappers[t];if(!p)return;const g=()=>p?.model??null;(0,o.O3D)(h,()=>{const f=o.oY$.resolve(p.filter);return{created:!0,filterParams:p.filterParams,compDetails:i(),create:()=>f,promise:f}},g,()=>p?.state??{model:g()},f=>l(p,f),f=>p.filterParams?.onModelChange(f,u))};return e.onAction=(d,h,u)=>{c(0,d,h),n.dispatchEvent({type:"filterAction",column:a,action:d,event:u})},d=>{const h=i()?.params;return this.createManagedBean(new o.jfj(a,{comp:d,params:h,isHandler:!0},n,c,!1))}}executeWhenAllFiltersReady(e){(this.wrappers?.length??0)>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveListForFilter(e,t){this.updateActiveList(e,()=>t?.isFilterActive())}updateActiveListForHandler(e,t){this.updateActiveList(e,()=>null!=t)}updateActiveList(e,t){const s=this.activeFilterIndices;(0,o.$ii)(this.activeFilterIndices,e),t()&&s.push(e)}onFilterModelChanged(e,t){this.updateActiveListForFilter(e,this.wrappers[e]?.filter),this.filterChanged(e,t)}onHandlerModelChanged(e,t,s){this.updateActiveListForHandler(e,t),this.filterChanged(e,s)}filterChanged(e,t){this.filterChangedCallback(t),this.wrappers.forEach((s,i)=>{if(e===i||!s)return;const{filter:r,handler:a}=s;a?.onAnyFilterChanged?.(),"function"==typeof r.onAnyFilterChanged&&r.onAnyFilterChanged()})}getModelAsString(e){if(!e?.filterModels?.length)return"";const t=this.getLastActiveFilterIndex()??0;return this.wrappers[t]?.filter?.getModelAsString?.(e.filterModels[t])??""}},Or=class extends kr{constructor(){super(...arguments),this.filterType="multi",this.filters=[],this.filterParams=[],this.validity=[]}init(e){this.params=e,this.filterDefs=Jt(e),this.allState=e.state;const t=this.filterDefs.map((s,i)=>this.createFilter(s,i));return new o.oY$(s=>{o.oY$.all(t).then(i=>{this.filters=i,this.refreshGui("columnMenu").then(()=>{s()})})})}refresh(e){const{model:t,state:s,source:i}=e;if("colDef"===i)return!1;this.params=e;const r=this.filterParams;if(s===this.allState)return!0;this.allState=s;const a=s.state;return this.filters.forEach((n,l)=>{const c=Se(t,l),d={state:a?.[l],model:Se(s.model,l)};(0,o.nNd)(n,r[l],c,d,i)}),!0}getLastActiveFilterIndex(){return this.getHandler().getLastActiveFilterIndex?.()??null}getChildFilterInstance(e){return this.filters[e]??void 0}destroy(){this.filters.forEach(e=>this.destroyBean(e)),this.filters.length=0,super.destroy()}getFilterWrappers(){return this.filters}getFilterFromWrapper(e){return e}getCompFromWrapper(e){return e}createFilter(e,t){const s=this.beans.userCompFactory,i=this.updateParams(e,this.params,t),r=(0,o.wW7)(s,e,i,"agTextColumnFilter");return r?(this.filterParams[t]=r.params,r.newAgStackInstance()):o.oY$.resolve(null)}updateParams(e,t,s){const{doesRowPassOtherFilter:i,model:r,onModelChange:a,state:n,onStateChange:l,column:c,source:d,onAction:h,onUiChange:u,getValue:p}=t,g=Se(r,s),f=n?{model:Se(n.model,s),state:n.state?.[s]}:{model:g},m=()=>{const v=this.getHandler();this.filters.forEach((y,b)=>{s!==b&&(v.getHandler(b)?.onAnyFilterChanged?.(),y?.onAnyFilterChanged?.())})},C=this.beans.colFilter;return{...C.createBaseFilterParams(c),...e,doesRowPassOtherFilter:v=>i(v)&&this.getHandler().doesFilterPass({node:v,data:v.data,model:this.params.model,handlerParams:C.getHandlerParams(c)},s),model:g,state:f,onModelChange:(v,y)=>{const{filters:b,params:S}=this,w=Mt(S.model,b.length,v,s);this.updateActiveList(s,v),a(w,y),m()},onStateChange:v=>this.onStateChange(l,s,v),getHandler:()=>this.getHandler().getHandler(s),onAction:(v,y,b)=>{if((0,o.jy1)(t))return;const S="apply"===v||"reset"===v;S&&this.updateActiveList(s,Se(this.params.state.model,s)),h(v,y,b),S&&m()},onUiChange:u,source:d,getValue:es(this.beans,c,e,p)}}updateActiveList(e,t){this.getHandler().updateActiveList?.(e,t)}getHandler(){return this.params.getHandler()}onStateChange(e,t,s){const{model:i,state:r,valid:a}=s,n=this.validity;n[t]=a;const l=this.allState,c=Mt(l.model,this.filters.length,i,t),d=n.every(p=>!1!==p),h=[...l.state??[]];h[t]=r;const u={state:h,model:c,valid:d};this.allState=u,e(u)}getModelAsString(e){return this.getHandler().getModelAsString?.(e)??""}},Np={tag:"div",cls:"ag-multi-floating-filter ag-floating-filter-input"},Nr={moduleName:"MultiFilter",version:R,userComponents:{agMultiColumnFilter:{getComp:e=>e.gos.get("enableFilterHandlers")?{classImp:Or,params:{useForm:!0}}:Gr},agMultiColumnFloatingFilter:class extends o.uAl{constructor(){super(Np),this.floatingFilters=[],this.compDetailsList=[]}init(e){this.params=e;const{compDetailsList:t}=this.getCompDetailsList(e);return this.setParams(t)}setParams(e){const t=[];return e.forEach(s=>{const i=s?.newAgStackInstance();null!=i&&(this.compDetailsList.push(s),t.push(i))}),o.oY$.all(t).then(s=>{s.forEach((i,r)=>{this.floatingFilters.push(i);const a=i.getGui();this.appendChild(a),r>0&&(0,o.nl0)(a,!1)})})}refresh(e){this.params=e;const{compDetailsList:t,floatingFilterParamsList:s}=this.getCompDetailsList(e);if(t.length===this.compDetailsList.length&&t.every((r,a)=>!this.beans.colFilter?.areFilterCompsDifferent(this.compDetailsList[a],r))){if(s.forEach((r,a)=>{this.floatingFilters[a].refresh?.(r)}),this.gos.get("enableFilterHandlers")){const r=e;if(null==r.model)this.floatingFilters.forEach((a,n)=>{(0,o.nl0)(a.getGui(),0===n)});else{const a=r.getHandler()?.getLastActiveFilterIndex?.();this.floatingFilters.forEach((n,l)=>{const c=null==a?0===l:l===a;(0,o.nl0)(n.getGui(),c)})}}}else(0,o.fDi)(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(t)}getCompDetailsList(e){const t=[],s=[],r=e.currentParentModel,a=Jt(e.filterParams);return a.forEach((n,l)=>{const c={...e,parentFilterInstance:h=>{this.parentMultiFilterInstance(u=>{const p=u.getChildFilterInstance(l);null!=p&&h(p)})},currentParentModel:()=>r()?.filterModels?.[l]??null};if(this.gos.get("enableFilterHandlers")){const h=c;h.model=h.model?.filterModels?.[l]??null;const{onModelChange:u,getHandler:p}=h;h.onModelChange=(g,f)=>u(Mt(this.params.model,a.length,g,l),f),h.getHandler=()=>p().getHandler(l)}(0,o.WY6)(c.filterParams,n.filterParams);const d=this.getCompDetails(n,c);d&&(t.push(d),s.push(c))}),{compDetailsList:t,floatingFilterParamsList:s}}onParentModelChanged(e,t){t&&t.afterFloatingFilter||this.parentMultiFilterInstance(s=>{if(null==e)this.floatingFilters.forEach((i,r)=>{i.onParentModelChanged(null,t),(0,o.nl0)(i.getGui(),0===r)});else{const i=s.getLastActiveFilterIndex();this.floatingFilters.forEach((r,a)=>{r.onParentModelChanged(e.filterModels.length>a?e.filterModels[a]:null,t);const l=null==i?0===a:a===i;(0,o.nl0)(r.getGui(),l)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(e,t){const{colFilter:s,frameworkOverrides:i,userCompFactory:r}=this.beans,a=(0,o.Dav)(i,e,()=>s.getDefaultFloatingFilter(this.params.column))??"agReadOnlyFloatingFilter";return(0,o.JSz)(r,e,t,a)}parentMultiFilterInstance(e){this.params.parentFilterInstance(t=>{t instanceof Gr||t instanceof Or||(0,o.CkN)(120),e(t)})}}},beans:[class extends o.XQb{constructor(){super(...arguments),this.beanName="multiFilter"}getParamsForDataType(e,t,s,i){let r=e?.filters;const a=this.beans;r||(r=[{filter:(0,o.LCl)(s.baseDataType)},{filter:"agSetColumnFilter"}]);const n=this.getLocaleTextFunc();return r=r.map(l=>{const{filter:c,filterParams:d,filterValueGetter:h}=l;if("string"!=typeof c)return l;const{filterParams:u,filterValueGetter:p}=(0,o.hMi)(c,d,h??t,s,i,a,n);return{...l,filterParams:u,filterValueGetter:p}}),{filterParams:{...e,filters:r}}}}],dynamicBeans:{agMultiColumnFilterHandler:class extends o.XQb{constructor(){super(...arguments),this.filterType="multi",this.handlerWrappers=[],this.activeFilterIndices=[],this.filterDefs=[]}init(e){this.params=e;const t=Jt(e.filterParams);this.filterDefs=t,t.forEach((s,i)=>{const r=this.beans.colFilter.createHandler(e.column,s,"agTextColumnFilter");if(this.handlerWrappers.push(r),!r)return void(0,o.ujB)(278,{colId:e.column.getColId()});const{handler:a,handlerParams:n}=r;a.init?.({...this.updateHandlerParams(n,i),model:Se(e.model,i),source:"init"})}),this.resetActiveList(e.model)}refresh(e){this.params=e;const{model:t,source:s,filterParams:i}=e,r=i?.filters;this.handlerWrappers.forEach((a,n)=>{if(a){const c=this.updateHandlerParams(e,n).filterParams,d=r?.[n].filterParams,h=d?{...c,...d}:c,u={...this.updateHandlerParams(e,n),filterParams:h};a.handlerParams=u,a.handler.refresh?.({...u,model:Se(t,n),source:s})}}),"floating"!==e.source&&"ui"!==e.source&&this.resetActiveList(e.model)}updateHandlerParams(e,t){const{onModelChange:s,doesRowPassOtherFilter:i,getValue:r}=e,a={...e,onModelChange:(n,l)=>s(Mt(this.params.model,this.handlerWrappers.length,n,t),l),doesRowPassOtherFilter:n=>i(n)&&this.doesFilterPass({node:n,data:n.data,model:this.params.model,handlerParams:a},t),getValue:es(this.beans,e.column,this.filterDefs[t],r)};return a}doesFilterPass(e,t){const s=e.model?.filterModels;return null==s||this.handlerWrappers.every((i,r)=>{const a=s[r];if(null==a||null!=t&&r===t)return!0;const n=i?.handler;return!n||n.doesFilterPass({...e,model:a,handlerParams:i.handlerParams})})}resetActiveList(e){this.activeFilterIndices=[];const t=e?.filterModels;if(null!=t)for(let s=0;s<this.handlerWrappers.length;s++)null!=t[s]&&this.activeFilterIndices.push(s)}updateActiveList(e,t){const s=this.activeFilterIndices;(0,o.$ii)(s,e),null!=t&&s.push(e)}getLastActiveFilterIndex(){const e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}getModelAsString(e,t){const s="filterToolPanel"===t,i=()=>s?this.getLocaleTextFunc()("filterSummaryInactive","is (All)"):"";if(!e?.filterModels?.length)return i();const r=this.getLastActiveFilterIndex()??0;return this.handlerWrappers[r]?.handler.getModelAsString?.(e.filterModels[r],t)??i()}getHandler(e){return this.handlerWrappers[e]?.handler}onAnyFilterChanged(){Zt(this.handlerWrappers,e=>e?.handler?.onAnyFilterChanged?.())}onNewRowsLoaded(){Zt(this.handlerWrappers,e=>e?.handler?.onNewRowsLoaded?.())}destroy(){this.handlerWrappers.forEach(e=>this.destroyBean(e?.handler)),this.handlerWrappers.length=0,super.destroy()}}},dependsOn:[B,o.Sxk,Qt]};Object.freeze({toString:function(){return this.value.toString()},toNumber:function(){return this.value}}),Object.freeze({toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}),String.fromCharCode(31,4096+61440*Math.random(),4096+61440*Math.random(),8291),Symbol("WrappedFunctionMarker");var kC={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",stackedLine:"line",normalizedLine:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall",funnel:"funnel",coneFunnel:"cone-funnel",pyramid:"pyramid"},GC=new Set(["columnLineCombo","areaColumnCombo","customCombo"]);["number","category","grouped-category","log","time"].reduce((e,t)=>({...e,[t]:{title:{_enabledFromTheme:!0}}}),{});var lt=e=>t=>null==t||e(t),zv=["doughnut"];function Ka(e){return e.map((t,s,i)=>t.map((r,a)=>i.slice(0,s+1).reduce((n,l)=>n+l[a],0)))}function $a(e){const t=e.map((s,i)=>e.reduce((r,a)=>Math.max(r,a[i]),0));return e.map(s=>s.map((i,r)=>i/t[r]*19))}lt(e=>{if(function Uv(e){return!!function Sa(e){return kC[e]}(e)||function Qs(e){return GC.has(e)}(e)}(e))return!0;if(function Wv(e){return zv.includes(e)}(e)){const t=function Rt(e){return"doughnut"===e?"donut":e}(e);return(0,o.JT7)(`The chart type '${e}' has been deprecated. Please use '${t}' instead.`),t}return!1}),lt(e=>"object"==typeof e),lt(e=>"object"==typeof e),lt(e=>"string"==typeof e||"function"==typeof e);var oi=[[1,3,5],[2,6,4],[5,3,1]],en=($a(Ka(oi)),oi);$a(Ka(en));var ce=ae(73664),hw=ae(16735);function uw(e,t){if(1&e){const s=ce.RV6();ce.j41(0,"ag-grid-angular",2),ce.bIt("gridReady",function(){Nt.eBV(s);const r=ce.XpG();return Nt.Njj(r.onGridReady())}),ce.k0s()}if(2&e){const s=ce.XpG();ce.Y8G("columnDefs",s.columnDefs)("defaultColDef",s.defaultColDef)("theme",s.theme)("rowData",s.rowData)("enableRtl",s.direction)}}o.syG.registerModules([o.Q90,o.I95,o.mfG,o.nSw,Er,Nr,Ns,Bs]);let pw=(()=>{class e{constructor(){this.themeService=(0,Nt.WQX)(Mn.z),this.http=(0,Nt.WQX)(xn.Qq),this.theme=(0,Ci.e)(this.themeService.isDarkMode()),this.showGrid=!0,this.columnDefs=[{field:"athlete"},{field:"age",filter:"agNumberColumnFilter",maxWidth:100},{field:"date",filter:"agDateColumnFilter",filterParams:gw},{field:"country",filter:"agSetColumnFilter"},{field:"sport",filter:"agMultiColumnFilter"},{field:"gold",filter:"agNumberColumnFilter"},{field:"silver",filter:"agNumberColumnFilter"},{field:"bronze",filter:"agNumberColumnFilter"},{field:"total",filter:!1}],this.defaultColDef={flex:1,minWidth:150,filter:"agTextColumnFilter",suppressHeaderMenuButton:!0,suppressHeaderContextMenu:!0},(0,wn.QZ)(()=>{const s=this.themeService.isDarkMode(),i=this.themeService.directionChange();this.themeDirection(i),this.theme=(0,Ci.e)(s)})}themeDirection(s){this.direction=s===Tn.rX,this.showGrid=!1,setTimeout(()=>{this.showGrid=!0})}onGridReady(){this.http.get("https://www.ag-grid.com/example-assets/olympic-winners.json").subscribe(s=>this.rowData=s)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ce.VBU({type:e,selectors:[["app-column-filter"]],decls:2,vars:2,consts:[["cardTitle","Column Filter",3,"padding"],[2,"width","100%","height","calc(100vh - 311px)",3,"columnDefs","defaultColDef","theme","rowData","enableRtl"],[2,"width","100%","height","calc(100vh - 311px)",3,"gridReady","columnDefs","defaultColDef","theme","rowData","enableRtl"]],template:function(i,r){1&i&&(ce.j41(0,"app-card",0),ce.nVh(1,uw,1,5,"ag-grid-angular",1),ce.k0s()),2&i&&(ce.Y8G("padding",0),ce.R7$(),ce.vxM(r.showGrid?1:-1))},dependencies:[Fn.G,hw.i,An.xs],encapsulation:2})}return e})();const gw={comparator:(e,t)=>{if(null==t)return-1;const i=t.split("/"),r=new Date(Number(i[2]),Number(i[1])-1,Number(i[0]));return e.getTime()===r.getTime()?0:r<e?-1:r>e?1:0}}}}]);