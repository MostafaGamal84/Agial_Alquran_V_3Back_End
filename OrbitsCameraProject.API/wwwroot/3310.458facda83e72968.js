"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[3310],{87509:(R,u,n)=>{n.d(u,{f:()=>l});var m=n(48728),f=n(95416);let l=(()=>{class c{constructor(){this.snackBar=(0,m.WQX)(f.UG)}success(p,_="Close",h=3e3){this.snackBar.open(p,_,{duration:h,panelClass:["toast-success"]})}error(p,_="Close",h=3e3){this.snackBar.open(p,_,{duration:h,panelClass:["toast-error"]})}static#e=this.\u0275fac=function(_){return new(_||c)};static#t=this.\u0275prov=m.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},93310:(R,u,n)=>{n.r(u),n.d(u,{TeacherAddComponent:()=>H});var m=n(48728),f=n(72200),l=n(89417),c=n(99830),F=n(56147),p=n(72709),_=n(87509),h=n(76848),O=n(53964),k=n(88937),T=n(8223),g=n(68018),e=n(73664),P=n(88834),D=n(33746),b=n(5404),$=n(72923),y=n(25079),A=n(16735),j=n(63342);function B(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Full name is required")))}function S(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Email is required")))}function W(a,r){if(1&a&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.dialCode),e.R7$(),e.Lme(" ",t.name," (",t.dialCode,") ")}}function G(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Mobile is required")))}function N(a,r){if(1&a&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.dialCode),e.R7$(),e.Lme(" ",t.name," (",t.dialCode,") ")}}function U(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Password is required")))}function L(a,r){if(1&a&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function K(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Nationality is required")))}function J(a,r){if(1&a&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function Y(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Governorate is required")))}function X(a,r){if(1&a&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.label)}}function V(a,r){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.JRh(e.bMT(2,1,"Branch is required")))}let H=(()=>{class a{constructor(){this.fb=(0,m.WQX)(l.ok),this.userService=(0,m.WQX)(p.D),this.toast=(0,m.WQX)(_.f),this.lookupService=(0,m.WQX)(h.s),this.countryService=(0,m.WQX)(O.o),this.translate=(0,m.WQX)(g.c$),this.nationalities=[],this.governorates=[],this.countries=[],this.Branch=[{id:T.E.Mens,label:"\u0627\u0644\u0631\u062c\u0627\u0644"},{id:T.E.Women,label:"\u0627\u0644\u0646\u0633\u0627\u0621"}],this.phoneFormats={"+1":{mask:"000-000-0000",placeholder:"123-456-7890"},"+44":{mask:"0000 000000",placeholder:"7123 456789"},"+966":{mask:"0000000000",placeholder:"5XXXXXXXXX"}},this.mobileMask="",this.mobilePlaceholder="",this.secondMobileMask="",this.secondMobilePlaceholder=""}ngOnInit(){this.basicInfoForm=this.fb.group({fullName:["",l.k0.required],email:["",[l.k0.required,l.k0.email]],mobileCountryDialCode:[null,l.k0.required],mobile:["",l.k0.required],secondMobileCountryDialCode:[""],secondMobile:[""],passwordHash:["",[l.k0.required,l.k0.minLength(6)]],nationalityId:[null,l.k0.required],governorateId:[null,l.k0.required],branchId:[null,l.k0.required]}),this.lookupService.getAllNationalities().subscribe(t=>{t.isSuccess&&(this.nationalities=t.data)}),this.lookupService.getAllGovernorates().subscribe(t=>{t.isSuccess&&(this.governorates=t.data)}),this.countryService.getCountries().subscribe(t=>{this.countries=t})}onCountryCodeChange(t){const d=this.basicInfoForm.get(t)?.value,o=this.phoneFormats[d]||{mask:"",placeholder:""};"mobileCountryDialCode"===t?(this.mobileMask=o.mask,this.mobilePlaceholder=o.placeholder):(this.secondMobileMask=o.mask,this.secondMobilePlaceholder=o.placeholder)}onSubmit(){if(this.basicInfoForm.valid){const t=this.basicInfoForm.value,d=i=>i.replace(/\D/g,""),o={fullName:t.fullName,email:t.email,mobile:`${t.mobileCountryDialCode}${d(t.mobile)}`,secondMobile:t.secondMobile?`${t.secondMobileCountryDialCode}${d(t.secondMobile)}`:void 0,passwordHash:t.passwordHash,nationalityId:t.nationalityId,governorateId:t.governorateId,branchId:t.branchId,userTypeId:Number(k.m.Teacher)};this.userService.createUser(o).subscribe({next:i=>{i?.isSuccess?(this.toast.success(i.message||this.translate.instant("User created successfully")),this.basicInfoForm.reset()):i?.errors?.length?i.errors.forEach(s=>this.toast.error(s.message)):this.toast.error(this.translate.instant("Error creating user"))},error:()=>this.toast.error(this.translate.instant("Error creating user"))})}else this.basicInfoForm.markAllAsTouched()}static#e=this.\u0275fac=function(d){return new(d||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-teacher-add"]],features:[e.Jv_([(0,c.Dw)()])],decls:78,vars:70,consts:[[1,"row"],[1,"col-12"],[3,"cardTitle"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],["appearance","outline",1,"w-100","m-b-10"],["matInput","","type","text","formControlName","fullName",3,"placeholder"],["matInput","","type","email","formControlName","email",3,"placeholder"],["formControlName","mobileCountryDialCode","matPrefix","","appOpenSelectOnType","","placeholder","+1",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","mobile",3,"click","mask","placeholder","dropSpecialCharacters","validation"],["formControlName","secondMobileCountryDialCode","matPrefix","","appOpenSelectOnType","","placeholder","+1",3,"selectionChange"],["matInput","","type","text","formControlName","secondMobile",3,"click","mask","placeholder","dropSpecialCharacters","validation"],["matInput","","type","password","formControlName","passwordHash",3,"placeholder"],["formControlName","nationalityId","appOpenSelectOnType","",3,"placeholder"],["formControlName","governorateId","appOpenSelectOnType","",3,"placeholder"],["formControlName","branchId","appOpenSelectOnType","",3,"placeholder"],[1,"col-md-12","text-end"],["mat-flat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(d,o){if(1&d&&(e.j41(0,"div",0)(1,"div",1)(2,"app-card",2),e.nI1(3,"translate"),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(5,"div",0)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",6),e.nI1(12,"translate"),e.nVh(13,B,3,3,"mat-error"),e.k0s()(),e.j41(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.nrm(19,"input",7),e.nI1(20,"translate"),e.nVh(21,S,3,3,"mat-error"),e.k0s()(),e.j41(22,"div",4)(23,"mat-form-field",5)(24,"mat-label"),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.j41(27,"mat-select",8),e.bIt("selectionChange",function(){return o.onCountryCodeChange("mobileCountryDialCode")}),e.DNE(28,W,2,3,"mat-option",9),e.k0s(),e.j41(29,"input",10),e.bIt("click",function(s){return s.stopPropagation()}),e.k0s(),e.nVh(30,G,3,3,"mat-error"),e.k0s()(),e.j41(31,"div",4)(32,"mat-form-field",5)(33,"mat-label"),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"mat-select",11),e.bIt("selectionChange",function(){return o.onCountryCodeChange("secondMobileCountryDialCode")}),e.DNE(37,N,2,3,"mat-option",9),e.k0s(),e.j41(38,"input",12),e.bIt("click",function(s){return s.stopPropagation()}),e.k0s()()(),e.j41(39,"div",4)(40,"mat-form-field",5)(41,"mat-label"),e.EFF(42),e.nI1(43,"translate"),e.k0s(),e.nrm(44,"input",13),e.nI1(45,"translate"),e.nVh(46,U,3,3,"mat-error"),e.k0s()(),e.j41(47,"div",4)(48,"mat-form-field",5)(49,"mat-label"),e.EFF(50),e.nI1(51,"translate"),e.k0s(),e.j41(52,"mat-select",14),e.nI1(53,"translate"),e.DNE(54,L,2,2,"mat-option",9),e.k0s(),e.nVh(55,K,3,3,"mat-error"),e.k0s()(),e.j41(56,"div",4)(57,"mat-form-field",5)(58,"mat-label"),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.j41(61,"mat-select",15),e.nI1(62,"translate"),e.DNE(63,J,2,2,"mat-option",9),e.k0s(),e.nVh(64,Y,3,3,"mat-error"),e.k0s()(),e.j41(65,"div",4)(66,"mat-form-field",5)(67,"mat-label"),e.EFF(68),e.nI1(69,"translate"),e.k0s(),e.j41(70,"mat-select",16),e.nI1(71,"translate"),e.DNE(72,X,2,2,"mat-option",9),e.k0s(),e.nVh(73,V,3,3,"mat-error"),e.k0s()(),e.j41(74,"div",17)(75,"button",18),e.EFF(76),e.nI1(77,"translate"),e.k0s()()()()()()()),2&d){let i,s,C,M,v,E,I;e.R7$(2),e.Y8G("cardTitle",e.bMT(3,38,"Basic Information")),e.R7$(2),e.Y8G("formGroup",o.basicInfoForm),e.R7$(5),e.JRh(e.bMT(10,40,"Full Name")),e.R7$(2),e.Y8G("placeholder",e.bMT(12,42,"Enter Full Name")),e.R7$(2),e.vxM(null!=(i=o.basicInfoForm.get("fullName"))&&i.touched&&null!=(i=o.basicInfoForm.get("fullName"))&&i.invalid?13:-1),e.R7$(4),e.JRh(e.bMT(18,44,"Email")),e.R7$(2),e.Y8G("placeholder",e.bMT(20,46,"Enter Email")),e.R7$(2),e.vxM(null!=(s=o.basicInfoForm.get("email"))&&s.touched&&null!=(s=o.basicInfoForm.get("email"))&&s.invalid?21:-1),e.R7$(4),e.JRh(e.bMT(26,48,"Mobile")),e.R7$(3),e.Y8G("ngForOf",o.countries),e.R7$(),e.Y8G("mask",o.mobileMask)("placeholder",o.mobilePlaceholder)("dropSpecialCharacters",!1)("validation",!!o.mobileMask),e.R7$(),e.vxM(null!=(C=o.basicInfoForm.get("mobile"))&&C.touched&&null!=(C=o.basicInfoForm.get("mobile"))&&C.invalid?30:-1),e.R7$(4),e.JRh(e.bMT(35,50,"Second Mobile")),e.R7$(3),e.Y8G("ngForOf",o.countries),e.R7$(),e.Y8G("mask",o.secondMobileMask)("placeholder",o.secondMobilePlaceholder)("dropSpecialCharacters",!1)("validation",!!o.secondMobileMask),e.R7$(4),e.JRh(e.bMT(43,52,"Password")),e.R7$(2),e.Y8G("placeholder",e.bMT(45,54,"Enter Password")),e.R7$(2),e.vxM(null!=(M=o.basicInfoForm.get("passwordHash"))&&M.touched&&null!=(M=o.basicInfoForm.get("passwordHash"))&&M.invalid?46:-1),e.R7$(4),e.JRh(e.bMT(51,56,"Nationality")),e.R7$(2),e.Y8G("placeholder",e.bMT(53,58,"Select Nationality")),e.R7$(2),e.Y8G("ngForOf",o.nationalities),e.R7$(),e.vxM(null!=(v=o.basicInfoForm.get("nationalityId"))&&v.touched&&null!=(v=o.basicInfoForm.get("nationalityId"))&&v.invalid?55:-1),e.R7$(4),e.JRh(e.bMT(60,60,"Governorate")),e.R7$(2),e.Y8G("placeholder",e.bMT(62,62,"Select Governorate")),e.R7$(2),e.Y8G("ngForOf",o.governorates),e.R7$(),e.vxM(null!=(E=o.basicInfoForm.get("governorateId"))&&E.touched&&null!=(E=o.basicInfoForm.get("governorateId"))&&E.invalid?64:-1),e.R7$(4),e.JRh(e.bMT(69,64,"Branch")),e.R7$(2),e.Y8G("placeholder",e.bMT(71,66,"Select Branch")),e.R7$(2),e.Y8G("ngForOf",o.Branch),e.R7$(),e.vxM(null!=(I=o.basicInfoForm.get("branchId"))&&I.touched&&null!=(I=o.basicInfoForm.get("branchId"))&&I.invalid?73:-1),e.R7$(2),e.Y8G("disabled",o.basicInfoForm.invalid),e.R7$(),e.JRh(e.bMT(77,68,"Submit"))}},dependencies:[f.MD,f.Sq,F.G,P.$z,D.fg,b.j,b.M,b.b,b.e,$.g,y.M,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,A.i,j.f,g.D9,c.Zr],styles:["form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-floating-label[_ngcontent-%COMP%]{font-weight:500}.file-upload[_ngcontent-%COMP%]{display:block;border:1px solid var(--accent-300);width:100%;margin-bottom:24px;border-radius:4px;overflow:hidden}.file-upload[_ngcontent-%COMP%]:not(:disabled):not([readonly]){cursor:pointer}.file-upload[_ngcontent-%COMP%]::file-selector-button{padding:.8rem .75rem;margin-right:8px;color:var(--accent-800);pointer-events:none;border-color:var(--accent-300);border-style:solid;border-width:0px;border-inline-end-width:1px;border-radius:0;background:var(--accent-100)}.file-upload[_ngcontent-%COMP%]:hover:not(:disabled):not([readonly])::file-selector-button{background:var(--accent-200)}"]})}return a})()}}]);