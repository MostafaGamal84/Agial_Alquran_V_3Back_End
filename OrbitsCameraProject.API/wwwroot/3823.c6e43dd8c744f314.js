"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[3823],{83823:(M,g,o)=>{o.r(g),o.d(g,{UserEditComponent:()=>ne});var m=o(48728),b=o(72200),c=o(89417),h=o(99830),U=o(35568),p=o(27468),u=o(56147),f=o(72709),O=o(87509),k=o(76848),T=o(42986),R=o(53964),v=o(8223),_=o(88937),e=o(73664),D=o(88834),S=o(33746),C=o(5404),y=o(72923),N=o(25079),P=o(16735),j=o(63342);function $(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Full name is required"),e.k0s())}function G(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Email is required"),e.k0s())}function A(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.dialCode),e.R7$(),e.Lme("",t.name," (",t.dialCode,")")}}function V(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Mobile is required"),e.k0s())}function B(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.dialCode),e.R7$(),e.Lme("",t.name," (",t.dialCode,")")}}function Y(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function W(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Nationality id is required"),e.k0s())}function L(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function K(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Governorate id is required"),e.k0s())}function X(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.label)}}function x(n,r){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Branch id is required"),e.k0s())}function J(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.fullName)}}function Q(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.fullName)}}function z(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function H(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",4)(1,"mat-form-field",5)(2,"mat-label"),e.EFF(3,"Teachers"),e.k0s(),e.j41(4,"mat-select",19),e.bIt("selectionChange",function(i){m.eBV(t);const a=e.XpG();return m.Njj(a.onTeachersChange(i.value))}),e.DNE(5,J,2,2,"mat-option",9),e.k0s()()(),e.j41(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e.EFF(9,"Students"),e.k0s(),e.j41(10,"mat-select",20),e.DNE(11,Q,2,2,"mat-option",9),e.k0s()()(),e.j41(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e.EFF(15,"Circles"),e.k0s(),e.j41(16,"mat-select",21),e.DNE(17,z,2,2,"mat-option",9),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.teachers),e.R7$(6),e.Y8G("ngForOf",t.students),e.R7$(6),e.Y8G("ngForOf",t.circles)}}function Z(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.fullName)}}function w(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.fullName)}}function q(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function ee(n,r){if(1&n&&(e.j41(0,"div",4)(1,"mat-form-field",5)(2,"mat-label"),e.EFF(3,"Manager"),e.k0s(),e.j41(4,"mat-select",22),e.DNE(5,Z,2,2,"mat-option",9),e.k0s()()(),e.j41(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e.EFF(9,"Students"),e.k0s(),e.j41(10,"mat-select",23),e.DNE(11,w,2,2,"mat-option",9),e.k0s()()(),e.j41(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e.EFF(15,"Circle"),e.k0s(),e.j41(16,"mat-select",24),e.DNE(17,q,2,2,"mat-option",9),e.k0s()()()),2&n){let t,s;const i=e.XpG();e.R7$(5),e.Y8G("ngForOf",i.managers),e.R7$(5),e.Y8G("disabled",!(null!=(t=i.basicInfoForm.get("managerId"))&&t.value)),e.R7$(),e.Y8G("ngForOf",i.students),e.R7$(5),e.Y8G("disabled",!(null!=(s=i.basicInfoForm.get("managerId"))&&s.value)),e.R7$(),e.Y8G("ngForOf",i.circles)}}function te(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.fullName)}}function ie(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.fullName)}}function se(n,r){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function ae(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",4)(1,"mat-form-field",5)(2,"mat-label"),e.EFF(3,"Teacher"),e.k0s(),e.j41(4,"mat-select",25),e.bIt("selectionChange",function(i){m.eBV(t);const a=e.XpG();return m.Njj(a.onTeacherChange(i.value))}),e.DNE(5,te,2,2,"mat-option",9),e.k0s()()(),e.j41(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e.EFF(9,"Manager"),e.k0s(),e.j41(10,"mat-select",26),e.bIt("selectionChange",function(i){m.eBV(t);const a=e.XpG();return m.Njj(a.onManagerChange(i.value))}),e.DNE(11,ie,2,2,"mat-option",9),e.k0s()()(),e.j41(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e.EFF(15,"Circle"),e.k0s(),e.j41(16,"mat-select",27),e.DNE(17,se,2,2,"mat-option",9),e.k0s()()()}if(2&n){let t;const s=e.XpG();e.R7$(4),e.Y8G("disabled",!(null!=(t=s.basicInfoForm.get("managerId"))&&t.value)),e.R7$(),e.Y8G("ngForOf",s.teachers),e.R7$(6),e.Y8G("ngForOf",s.managers),e.R7$(6),e.Y8G("ngForOf",s.circles)}}let ne=(()=>{class n{constructor(){this.fb=(0,m.WQX)(c.ok),this.userService=(0,m.WQX)(f.D),this.toast=(0,m.WQX)(O.f),this.lookupService=(0,m.WQX)(k.s),this.circleService=(0,m.WQX)(T.K),this.countryService=(0,m.WQX)(R.o),this.router=(0,m.WQX)(U.Ix),this.nationalities=[],this.governorates=[],this.countries=[],this.teachers=[],this.managers=[],this.students=[],this.circles=[],this.isManager=!1,this.isTeacher=!1,this.isStudent=!1,this.Branch=[{id:v.E.Mens,label:"\u0627\u0644\u0631\u062c\u0627\u0644"},{id:v.E.Women,label:"\u0627\u0644\u0646\u0633\u0627\u0621"}],this.phoneFormats={"+1":{mask:"000-000-0000",placeholder:"123-456-7890"},"+44":{mask:"0000 000000",placeholder:"7123 456789"},"+966":{mask:"0000000000",placeholder:"5XXXXXXXXX"}},this.mobileMask="",this.mobilePlaceholder="",this.secondMobileMask="",this.secondMobilePlaceholder=""}ngOnInit(){if(this.isManager=this.router.url.includes("/manager/"),this.isTeacher=this.router.url.includes("/teacher/"),this.isStudent=this.router.url.includes("/student/"),this.basicInfoForm=this.fb.group({fullName:["",c.k0.required],email:["",[c.k0.required,c.k0.email]],mobileCountryDialCode:[null,c.k0.required],mobile:["",c.k0.required],secondMobileCountryDialCode:[""],secondMobile:[""],nationalityId:[null,c.k0.required],governorateId:[null,c.k0.required],branchId:[null,c.k0.required],teacherIds:[[]],teacherId:[null],managerId:[null],studentIds:[[]],circleIds:[[]],circleId:[null]}),this.lookupService.getAllNationalities().subscribe(t=>{t.isSuccess&&(this.nationalities=t.data)}),this.lookupService.getAllGovernorates().subscribe(t=>{t.isSuccess&&(this.governorates=t.data)}),this.currentUser=history.state.user,this.currentUser){this.userId=this.currentUser.id;const t=s=>s.replace(/\D/g,"");if(this.basicInfoForm.patchValue({fullName:this.currentUser.fullName,email:this.currentUser.email,mobile:t(this.currentUser.mobile),secondMobile:this.currentUser.secondMobile?t(this.currentUser.secondMobile):"",nationalityId:this.currentUser.nationalityId,governorateId:this.currentUser.governorateId,branchId:this.currentUser.branchId}),this.isManager||this.isTeacher||this.isStudent){if(this.isManager){const s=this.currentUser.teachers??this.currentUser.managers??[];if(s.length){this.teachers=s;const i=s.map(a=>a.id);this.basicInfoForm.patchValue({teacherIds:i}),this.onTeachersChange(i)}}else if(this.isTeacher){if(this.currentUser.managers?.length)this.managers=this.currentUser.managers,this.basicInfoForm.patchValue({managerId:this.currentUser.managers[0].id});else if(this.currentUser.managerId&&this.currentUser.managerName){const s={id:this.currentUser.managerId,fullName:this.currentUser.managerName,email:"",mobile:"",secondMobile:"",nationality:"",nationalityId:0,governorate:"",governorateId:0,branchId:0};this.managers=[s],this.basicInfoForm.patchValue({managerId:s.id})}}else if(this.isStudent){if(this.currentUser.teachers?.length)this.teachers=this.currentUser.teachers,this.basicInfoForm.patchValue({teacherId:this.currentUser.teachers[0].id});else if(this.currentUser.teacherId&&this.currentUser.teacherName){const s={id:this.currentUser.teacherId,fullName:this.currentUser.teacherName,email:"",mobile:"",secondMobile:"",nationality:"",nationalityId:0,governorate:"",governorateId:0,branchId:0};this.teachers=[s],this.basicInfoForm.patchValue({teacherId:s.id})}if(this.currentUser.managers?.length)this.managers=this.currentUser.managers,this.basicInfoForm.patchValue({managerId:this.currentUser.managers[0].id});else if(this.currentUser.managerId&&this.currentUser.managerName){const s={id:this.currentUser.managerId,fullName:this.currentUser.managerName,email:"",mobile:"",secondMobile:"",nationality:"",nationalityId:0,governorate:"",governorateId:0,branchId:0};this.managers=[s],this.basicInfoForm.patchValue({managerId:s.id})}}if((this.isManager||this.isTeacher)&&this.currentUser.students?.length&&(this.students=this.currentUser.students,this.basicInfoForm.patchValue({studentIds:this.currentUser.students.map(s=>s.id)})),this.currentUser.managerCircles?.length){const s=this.currentUser.managerCircles.map(i=>({id:i.circleId,name:i.circle||""}));this.circles=s,this.basicInfoForm.patchValue(this.isManager?{circleIds:this.currentUser.managerCircles.map(i=>i.circleId)}:{circleId:this.currentUser.managerCircles[0].circleId})}else if(this.currentUser.circleId&&this.currentUser.circleName){const s={id:this.currentUser.circleId,name:this.currentUser.circleName};this.circles=[s],this.basicInfoForm.patchValue(this.isManager?{circleIds:[s.id]}:{circleId:s.id})}if(this.loadRelatedUsers(),this.isManager&&this.basicInfoForm.get("circleIds")?.disable(),this.isTeacher){this.basicInfoForm.get("managerId")?.disable();const s=this.basicInfoForm.get("managerId")?.value;s?this.loadStudentsAndCircles(s):(this.basicInfoForm.get("studentIds")?.disable(),this.basicInfoForm.get("circleId")?.disable())}else if(this.isStudent){this.basicInfoForm.get("teacherId")?.disable(),this.basicInfoForm.get("circleId")?.disable();const s=this.basicInfoForm.get("managerId")?.value;if(s){this.onManagerChange(s,!0);const i=this.basicInfoForm.get("teacherId")?.value;i&&this.onTeacherChange(i)}}else this.loadCircles()}}this.countryService.getCountries().subscribe(t=>{if(this.countries=t,this.currentUser){const s=this.detectDialCode(this.currentUser.mobile,this.countries);if(s&&(this.basicInfoForm.patchValue({mobileCountryDialCode:s.dialCode,mobile:s.number}),this.onCountryCodeChange("mobileCountryDialCode")),this.currentUser.secondMobile){const i=this.detectDialCode(this.currentUser.secondMobile,this.countries);i&&(this.basicInfoForm.patchValue({secondMobileCountryDialCode:i.dialCode,secondMobile:i.number}),this.onCountryCodeChange("secondMobileCountryDialCode"))}}})}loadRelatedUsers(){const t={skipCount:0,maxResultCount:100};this.isManager?this.lookupService.getUsersForSelects(t,Number(_.m.Teacher),0,0,this.currentUser?.branchId||0).subscribe(s=>{if(s.isSuccess){const i=new Map(this.teachers.map(a=>[a.id,a]));s.data.items.forEach(a=>i.set(a.id,a)),this.teachers=Array.from(i.values())}}):this.isTeacher?this.lookupService.getUsersForSelects(t,Number(_.m.Manager),0,0,this.currentUser?.branchId||0).subscribe(s=>{if(s.isSuccess){const i=new Map(this.managers.map(a=>[a.id,a]));s.data.items.forEach(a=>i.set(a.id,a)),this.managers=Array.from(i.values())}}):this.isStudent&&this.lookupService.getUsersForSelects(t,Number(_.m.Manager),0,0,this.currentUser?.branchId||0).subscribe(s=>{if(s.isSuccess){const i=new Map(this.managers.map(a=>[a.id,a]));s.data.items.forEach(a=>i.set(a.id,a)),this.managers=Array.from(i.values())}}),this.isManager&&this.lookupService.getUsersForSelects(t,Number(_.m.Student),0,0,this.currentUser?.branchId||0).subscribe(s=>{if(s.isSuccess){const i=new Map(this.students.map(a=>[a.id,a]));s.data.items.forEach(a=>i.set(a.id,a)),this.students=Array.from(i.values())}})}onTeachersChange(t){if(!this.isManager)return;if(!t||!t.length)return this.circles=[],void this.basicInfoForm.patchValue({circleIds:[]});const s={skipCount:0,maxResultCount:100};(0,p.p)(t.map(i=>this.circleService.getAll(s,void 0,i))).subscribe(i=>{const a=i.filter(d=>d.isSuccess).flatMap(d=>d.data.items),l=new Map(a.map(d=>[d.id,d]));this.circles=Array.from(l.values()),this.basicInfoForm.patchValue({circleIds:Array.from(l.keys())})})}onManagerChange(t,s=!1){t?(this.lookupService.getUsersForSelects({skipCount:0,maxResultCount:100},Number(_.m.Teacher),t,0,this.currentUser?.branchId||0).subscribe(a=>{if(a.isSuccess){this.teachers=a.data.items;const l=this.basicInfoForm.get("teacherId")?.value;s?l&&!this.teachers.some(d=>d.id===l)&&this.basicInfoForm.patchValue({teacherId:null}):this.basicInfoForm.patchValue({teacherId:null})}}),this.basicInfoForm.get("teacherId")?.enable(),s||this.basicInfoForm.patchValue({circleId:null}),this.circles=[],this.basicInfoForm.get("circleId")?.disable()):(this.teachers=[],this.basicInfoForm.patchValue({teacherId:null,circleId:null}),this.basicInfoForm.get("teacherId")?.disable(),this.circles=[],this.basicInfoForm.get("circleId")?.disable())}onTeacherChange(t){t?this.circleService.getAll({skipCount:0,maxResultCount:100},void 0,t).subscribe(i=>{if(i.isSuccess){this.circles=i.data.items;const a=this.circles[0];this.basicInfoForm.patchValue({circleId:a?a.id:null})}}):(this.circles=[],this.basicInfoForm.patchValue({circleId:null})),this.basicInfoForm.get("circleId")?.disable()}loadStudentsAndCircles(t){this.lookupService.getUsersForSelects({skipCount:0,maxResultCount:100},Number(_.m.Student),t,0,this.currentUser?.branchId||0).subscribe(a=>{a.isSuccess&&(this.students=a.data.items)}),this.circleService.getAll({skipCount:0,maxResultCount:100},t).subscribe(a=>{a.isSuccess&&(this.circles=a.data.items)}),this.basicInfoForm.get("studentIds")?.enable(),this.basicInfoForm.get("circleId")?.enable()}loadCircles(){this.circleService.getAll({skipCount:0,maxResultCount:100}).subscribe(s=>{if(s.isSuccess){const i=new Map(this.circles.map(a=>[a.id,a]));s.data.items.forEach(a=>i.set(a.id,a)),this.circles=Array.from(i.values())}})}onCountryCodeChange(t){const s=this.basicInfoForm.get(t)?.value,i=this.phoneFormats[s]||{mask:"",placeholder:""};"mobileCountryDialCode"===t?(this.mobileMask=i.mask,this.mobilePlaceholder=i.placeholder):(this.secondMobileMask=i.mask,this.secondMobilePlaceholder=i.placeholder)}detectDialCode(t,s){const i=t.replace(/\D/g,""),a=s.map(l=>l.dialCode.replace("+","")).sort((l,d)=>d.length-l.length);for(const l of a)if(i.startsWith(l))return{dialCode:`+${l}`,number:i.slice(l.length)};return null}onSubmit(){if(this.basicInfoForm.valid){const t=this.basicInfoForm.getRawValue(),s=a=>a.replace(/\D/g,""),i={id:this.userId,fullName:t.fullName,email:t.email,mobile:`${t.mobileCountryDialCode}${s(t.mobile)}`,secondMobile:t.secondMobile?`${t.secondMobileCountryDialCode}${s(t.secondMobile)}`:void 0,nationalityId:t.nationalityId,governorateId:t.governorateId,branchId:t.branchId,managerId:this.isTeacher||this.isStudent?t.managerId:void 0,teacherIds:this.isManager?t.teacherIds:void 0,teacherId:this.isStudent?t.teacherId:void 0,studentIds:this.isManager||this.isTeacher?t.studentIds:void 0,circleIds:this.isManager?t.circleIds:void 0,circleId:this.isTeacher||this.isStudent?t.circleId:void 0};this.userService.updateUser(i).subscribe({next:a=>{a?.isSuccess?this.toast.success(a.message||"User updated successfully"):a?.errors?.length?a.errors.forEach(l=>this.toast.error(l.message)):this.toast.error("Error updating user")},error:()=>this.toast.error("Error updating user")})}else this.basicInfoForm.markAllAsTouched()}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-user-edit"]],features:[e.Jv_([(0,h.Dw)()])],decls:59,vars:24,consts:[[1,"row"],[1,"col-12"],["cardTitle","Update User"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],["appearance","outline",1,"w-100","m-b-10"],["matInput","","type","text","placeholder","Enter Full Name","formControlName","fullName"],["matInput","","type","email","placeholder","Enter Email","formControlName","email"],["formControlName","mobileCountryDialCode","matPrefix","","appOpenSelectOnType","","placeholder","+1",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","mobile",3,"click","mask","placeholder","dropSpecialCharacters","validation"],["formControlName","secondMobileCountryDialCode","matPrefix","","appOpenSelectOnType","","placeholder","+1",3,"selectionChange"],["matInput","","type","text","formControlName","secondMobile",3,"click","mask","placeholder","dropSpecialCharacters","validation"],["formControlName","nationalityId","placeholder","Select Nationality","appOpenSelectOnType",""],["formControlName","governorateId","placeholder","Select Governorate","appOpenSelectOnType",""],["formControlName","branchId","placeholder","Select Branch","appOpenSelectOnType",""],[1,"col-md-12","text-end"],["mat-flat-button","","color","primary",3,"disabled"],[3,"value"],["formControlName","teacherIds","multiple","","appOpenSelectOnType","",3,"selectionChange"],["formControlName","studentIds","multiple","","appOpenSelectOnType",""],["formControlName","circleIds","multiple","","appOpenSelectOnType","","disabled",""],["formControlName","managerId","appOpenSelectOnType","","disabled",""],["formControlName","studentIds","multiple","","appOpenSelectOnType","",3,"disabled"],["formControlName","circleId","appOpenSelectOnType","",3,"disabled"],["formControlName","teacherId","appOpenSelectOnType","",3,"selectionChange","disabled"],["formControlName","managerId","appOpenSelectOnType","",3,"selectionChange"],["formControlName","circleId","appOpenSelectOnType","","disabled",""]],template:function(s,i){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"form",3),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(4,"div",0)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e.EFF(8,"Full Name"),e.k0s(),e.nrm(9,"input",6),e.nVh(10,$,2,0,"mat-error"),e.k0s()(),e.j41(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),e.EFF(14,"Email"),e.k0s(),e.nrm(15,"input",7),e.nVh(16,G,2,0,"mat-error"),e.k0s()(),e.j41(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),e.EFF(20,"Mobile"),e.k0s(),e.j41(21,"mat-select",8),e.bIt("selectionChange",function(){return i.onCountryCodeChange("mobileCountryDialCode")}),e.DNE(22,A,2,3,"mat-option",9),e.k0s(),e.j41(23,"input",10),e.bIt("click",function(l){return l.stopPropagation()}),e.k0s(),e.nVh(24,V,2,0,"mat-error"),e.k0s()(),e.j41(25,"div",4)(26,"mat-form-field",5)(27,"mat-label"),e.EFF(28,"Second Mobile"),e.k0s(),e.j41(29,"mat-select",11),e.bIt("selectionChange",function(){return i.onCountryCodeChange("secondMobileCountryDialCode")}),e.DNE(30,B,2,3,"mat-option",9),e.k0s(),e.j41(31,"input",12),e.bIt("click",function(l){return l.stopPropagation()}),e.k0s()()(),e.j41(32,"div",4)(33,"mat-form-field",5)(34,"mat-label"),e.EFF(35,"Nationality"),e.k0s(),e.j41(36,"mat-select",13),e.DNE(37,Y,2,2,"mat-option",9),e.k0s(),e.nVh(38,W,2,0,"mat-error"),e.k0s()(),e.j41(39,"div",4)(40,"mat-form-field",5)(41,"mat-label"),e.EFF(42,"Governorate"),e.k0s(),e.j41(43,"mat-select",14),e.DNE(44,L,2,2,"mat-option",9),e.k0s(),e.nVh(45,K,2,0,"mat-error"),e.k0s()(),e.j41(46,"div",4)(47,"mat-form-field",5)(48,"mat-label"),e.EFF(49,"Branch"),e.k0s(),e.j41(50,"mat-select",15),e.DNE(51,X,2,2,"mat-option",9),e.k0s(),e.nVh(52,x,2,0,"mat-error"),e.k0s()(),e.nVh(53,H,18,3),e.nVh(54,ee,18,5),e.nVh(55,ae,18,4),e.j41(56,"div",16)(57,"button",17),e.EFF(58,"Update"),e.k0s()()()()()()()),2&s){let a,l,d,I,E,F;e.R7$(3),e.Y8G("formGroup",i.basicInfoForm),e.R7$(7),e.vxM(null!=(a=i.basicInfoForm.get("fullName"))&&a.touched&&null!=(a=i.basicInfoForm.get("fullName"))&&a.invalid?10:-1),e.R7$(6),e.vxM(null!=(l=i.basicInfoForm.get("email"))&&l.touched&&null!=(l=i.basicInfoForm.get("email"))&&l.invalid?16:-1),e.R7$(6),e.Y8G("ngForOf",i.countries),e.R7$(),e.Y8G("mask",i.mobileMask)("placeholder",i.mobilePlaceholder)("dropSpecialCharacters",!1)("validation",!!i.mobileMask),e.R7$(),e.vxM(null!=(d=i.basicInfoForm.get("mobile"))&&d.touched&&null!=(d=i.basicInfoForm.get("mobile"))&&d.invalid?24:-1),e.R7$(6),e.Y8G("ngForOf",i.countries),e.R7$(),e.Y8G("mask",i.secondMobileMask)("placeholder",i.secondMobilePlaceholder)("dropSpecialCharacters",!1)("validation",!!i.secondMobileMask),e.R7$(6),e.Y8G("ngForOf",i.nationalities),e.R7$(),e.vxM(null!=(I=i.basicInfoForm.get("nationalityId"))&&I.touched&&null!=(I=i.basicInfoForm.get("nationalityId"))&&I.invalid?38:-1),e.R7$(6),e.Y8G("ngForOf",i.governorates),e.R7$(),e.vxM(null!=(E=i.basicInfoForm.get("governorateId"))&&E.touched&&null!=(E=i.basicInfoForm.get("governorateId"))&&E.invalid?45:-1),e.R7$(6),e.Y8G("ngForOf",i.Branch),e.R7$(),e.vxM(null!=(F=i.basicInfoForm.get("branchId"))&&F.touched&&null!=(F=i.basicInfoForm.get("branchId"))&&F.invalid?52:-1),e.R7$(),e.vxM(i.isManager?53:-1),e.R7$(),e.vxM(i.isTeacher?54:-1),e.R7$(),e.vxM(i.isStudent?55:-1),e.R7$(2),e.Y8G("disabled",i.basicInfoForm.invalid)}},dependencies:[b.MD,b.Sq,u.G,D.$z,S.fg,C.j,C.M,C.b,C.e,y.g,N.M,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,P.i,j.f,h.Zr],styles:["form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-floating-label[_ngcontent-%COMP%]{font-weight:500}.file-upload[_ngcontent-%COMP%]{display:block;border:1px solid var(--accent-300);width:100%;margin-bottom:24px;border-radius:4px;overflow:hidden}.file-upload[_ngcontent-%COMP%]:not(:disabled):not([readonly]){cursor:pointer}.file-upload[_ngcontent-%COMP%]::file-selector-button{padding:.8rem .75rem;margin-right:8px;color:var(--accent-800);pointer-events:none;border-color:var(--accent-300);border-style:solid;border-width:0px;border-inline-end-width:1px;border-radius:0;background:var(--accent-100)}.file-upload[_ngcontent-%COMP%]:hover:not(:disabled):not([readonly])::file-selector-button{background:var(--accent-200)}"]})}return n})()},87509:(M,g,o)=>{o.d(g,{f:()=>c});var m=o(48728),b=o(95416);let c=(()=>{class h{constructor(){this.snackBar=(0,m.WQX)(b.UG)}success(p,u="Close",f=3e3){this.snackBar.open(p,u,{duration:f,panelClass:["toast-success"]})}error(p,u="Close",f=3e3){this.snackBar.open(p,u,{duration:f,panelClass:["toast-error"]})}static#e=this.\u0275fac=function(u){return new(u||h)};static#t=this.\u0275prov=m.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);