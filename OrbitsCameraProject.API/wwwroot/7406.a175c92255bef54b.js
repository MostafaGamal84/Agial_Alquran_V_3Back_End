"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[7406],{47406:(h,u,r)=>{r.r(u),r.d(u,{ReportDetailsComponent:()=>y});var a=r(48728),_=r(72200),m=r(35568),o=r(38132),g=r(56147),d=r(22487),l=r(87509),p=r(1557),F=r(75366),f=r(88937),t=r(73664),R=r(88834),P=r(9183),C=r(16735);function D(s,c){if(1&s){const e=t.RV6();t.j41(0,"div",8)(1,"button",9),t.bIt("click",function(){a.eBV(e);const i=t.XpG(2);return a.Njj(i.editReport())}),t.j41(2,"div",10),t.nrm(3,"i",11),t.EFF(4," Edit Report "),t.k0s()()()}}function j(s,c){if(1&s&&t.DNE(0,D,5,0,"div",7),2&s){const e=t.XpG();t.Y8G("ngIf",e.canEdit&&(null==e.report?null:e.report.id))}}function v(s,c){if(1&s&&(t.qex(0),t.j41(1,"div",12)(2,"section",13)(3,"h6"),t.EFF(4,"Overview"),t.k0s(),t.j41(5,"div",14)(6,"span",15),t.EFF(7,"Circle"),t.k0s(),t.j41(8,"span",16),t.EFF(9),t.k0s()(),t.j41(10,"div",14)(11,"span",15),t.EFF(12,"Student"),t.k0s(),t.j41(13,"span",16),t.EFF(14),t.k0s()(),t.j41(15,"div",14)(16,"span",15),t.EFF(17,"Teacher"),t.k0s(),t.j41(18,"span",16),t.EFF(19),t.k0s()(),t.j41(20,"div",14)(21,"span",15),t.EFF(22,"Attendance"),t.k0s(),t.j41(23,"span",16),t.EFF(24),t.k0s()(),t.j41(25,"div",14)(26,"span",15),t.EFF(27,"Minutes"),t.k0s(),t.j41(28,"span",16),t.EFF(29),t.k0s()(),t.j41(30,"div",14)(31,"span",15),t.EFF(32,"Created On"),t.k0s(),t.j41(33,"span",16),t.EFF(34),t.k0s()()(),t.j41(35,"section",13)(36,"h6"),t.EFF(37,"New Lesson"),t.k0s(),t.j41(38,"div",14)(39,"span",15),t.EFF(40,"Surah"),t.k0s(),t.j41(41,"span",16),t.EFF(42),t.k0s()(),t.j41(43,"div",14)(44,"span",15),t.EFF(45,"From"),t.k0s(),t.j41(46,"span",16),t.EFF(47),t.k0s()(),t.j41(48,"div",14)(49,"span",15),t.EFF(50,"To"),t.k0s(),t.j41(51,"span",16),t.EFF(52),t.k0s()(),t.j41(53,"div",14)(54,"span",15),t.EFF(55,"Rate"),t.k0s(),t.j41(56,"span",16),t.EFF(57),t.k0s()()(),t.j41(58,"section",13)(59,"h6"),t.EFF(60,"Recent Reviews"),t.k0s(),t.j41(61,"div",14)(62,"span",15),t.EFF(63,"Recent Past"),t.k0s(),t.j41(64,"span",16),t.EFF(65),t.k0s()(),t.j41(66,"div",14)(67,"span",15),t.EFF(68,"Recent Past Rate"),t.k0s(),t.j41(69,"span",16),t.EFF(70),t.k0s()(),t.j41(71,"div",14)(72,"span",15),t.EFF(73,"Distant Past"),t.k0s(),t.j41(74,"span",16),t.EFF(75),t.k0s()(),t.j41(76,"div",14)(77,"span",15),t.EFF(78,"Distant Past Rate"),t.k0s(),t.j41(79,"span",16),t.EFF(80),t.k0s()(),t.j41(81,"div",14)(82,"span",15),t.EFF(83,"Farthest Past"),t.k0s(),t.j41(84,"span",16),t.EFF(85),t.k0s()(),t.j41(86,"div",14)(87,"span",15),t.EFF(88,"Farthest Past Rate"),t.k0s(),t.j41(89,"span",16),t.EFF(90),t.k0s()()(),t.j41(91,"section",13)(92,"h6"),t.EFF(93,"Additional Notes"),t.k0s(),t.j41(94,"div",14)(95,"span",15),t.EFF(96,"The Words of the Quran Stranger"),t.k0s(),t.j41(97,"span",16),t.EFF(98),t.k0s()(),t.j41(99,"div",14)(100,"span",15),t.EFF(101,"Intonation"),t.k0s(),t.j41(102,"span",16),t.EFF(103),t.k0s()(),t.j41(104,"div",14)(105,"span",15),t.EFF(106,"Other Notes"),t.k0s(),t.j41(107,"span",16),t.EFF(108),t.k0s()()()(),t.bVm()),2&s){const e=t.XpG(2);t.R7$(9),t.JRh(e.getCircleName()),t.R7$(5),t.JRh(e.getStudentName()),t.R7$(5),t.JRh(e.getTeacherName()),t.R7$(5),t.JRh(e.getStatusLabel(null==e.report?null:e.report.attendStatueId)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.minutes)),t.R7$(5),t.JRh(e.formatDate(null==e.report?null:e.report.creationTime)),t.R7$(8),t.JRh(e.displayValue(null==e.report?null:e.report.newId)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.newFrom)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.newTo)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.newRate)),t.R7$(8),t.JRh(e.displayValue(null==e.report?null:e.report.recentPast)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.recentPastRate)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.distantPast)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.distantPastRate)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.farthestPast)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.farthestPastRate)),t.R7$(8),t.JRh(e.displayValue(null==e.report?null:e.report.theWordsQuranStranger)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.intonation)),t.R7$(5),t.JRh(e.displayValue(null==e.report?null:e.report.other))}}function O(s,c){if(1&s&&(t.qex(0),t.DNE(1,v,109,19,"ng-container",6),t.bVm()),2&s){const e=t.XpG(),n=t.sdS(9);t.R7$(),t.Y8G("ngIf",e.report)("ngIfElse",n)}}function M(s,c){1&s&&(t.j41(0,"div",17),t.nrm(1,"mat-progress-spinner",18),t.k0s())}function k(s,c){1&s&&(t.j41(0,"div",19),t.nrm(1,"i",20),t.j41(2,"p"),t.EFF(3,"No report details available."),t.k0s()())}let y=(()=>{class s{constructor(){this.route=(0,a.WQX)(m.nX),this.router=(0,a.WQX)(m.Ix),this.service=(0,a.WQX)(d.o),this.toast=(0,a.WQX)(l.f),this.auth=(0,a.WQX)(F.k),this.isLoading=!0,this.role=this.auth.getRole(),this.canEdit=this.role!==f.m.Student}ngOnInit(){const e=history.state.report,n=Number(this.route.snapshot.paramMap.get("id"));if(!Number.isFinite(n)||!n)return this.toast.error("Invalid report identifier"),void(this.isLoading=!1);const i=this.toNumber(e?.id);if(e&&i===n)return this.report={...e,id:i},void(this.isLoading=!1);this.loadReport(n,e)}toNumber(e){if(null==e||""===e)return;const n="number"==typeof e?e:Number(e);return Number.isFinite(n)?n:void 0}loadReport(e,n){this.isLoading=!0,this.service.get(e).subscribe({next:i=>{if(i.isSuccess&&i.data){const E={...n,...i.data,id:e};this.report=E}else n?this.report=n:this.toast.error("Unable to load report details");this.isLoading=!1},error:()=>{this.isLoading=!1,n?this.report=n:this.toast.error("Error loading report details")}})}getStatusLabel(e){switch(e){case p.E.Attended:return"Attended";case p.E.ExcusedAbsence:return"Excused absence";case p.E.UnexcusedAbsence:return"Unexcused absence";default:return"\u2014"}}formatDate(e){if(!e)return"\u2014";const n=e instanceof Date?e:new Date(e);return Number.isNaN(n.getTime())?"\u2014":n.toLocaleString()}displayValue(e){return null==e||""===e?"\u2014":String(e)}getStudentName(){const e=this.report;return e?e.studentName||e.student||e.studentFullName||("number"==typeof e.studentId?`Student #${e.studentId}`:"\u2014"):"\u2014"}getCircleName(){const e=this.report;return e?e.circleName||e.circle||e.circleTitle||("number"==typeof e.circleId?`Circle #${e.circleId}`:"\u2014"):"\u2014"}getTeacherName(){const e=this.report;return e?e.teacherName||e.teacher||("number"==typeof e.teacherId?`Teacher #${e.teacherId}`:"\u2014"):"\u2014"}editReport(){this.report?.id&&this.router.navigate(["/online-course/report/edit",this.report.id],{state:{report:this.report}})}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-report-details"]],decls:10,vars:2,consts:[["headerOptionsTemplate",""],["loadingTemplate",""],["emptyState",""],[1,"row","p-t-25"],[1,"col-12"],["cardTitle","Circle Report Details","cardClass","sm-block"],[4,"ngIf","ngIfElse"],["class","header-actions",4,"ngIf"],[1,"header-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"flex","align-item-center"],[1,"ti","ti-edit-circle","f-18","m-r-5"],[1,"details-grid"],[1,"details-section"],[1,"detail-item"],[1,"label"],[1,"value"],[1,"loading-container"],["diameter","48","mode","indeterminate"],[1,"empty-state"],[1,"ti","ti-notebook","f-32","m-b-10"]],template:function(n,i){if(1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"app-card",5),t.DNE(3,j,1,1,"ng-template",null,0,t.C5r)(5,O,2,2,"ng-container",6)(6,M,2,0,"ng-template",null,1,t.C5r)(8,k,4,0,"ng-template",null,2,t.C5r),t.k0s()()()),2&n){const E=t.sdS(7);t.R7$(5),t.Y8G("ngIf",!i.isLoading)("ngIfElse",E)}},dependencies:[_.MD,_.bT,g.G,R.$z,P.LG,C.i,o.iI],styles:[".details-grid[_ngcontent-%COMP%]{display:grid;gap:24px}@media (min-width: 992px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.details-section[_ngcontent-%COMP%]{background-color:#f8f9fb;border-radius:12px;padding:20px;box-shadow:inset 0 0 0 1px #00000005}.details-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:16px;font-weight:600;text-transform:uppercase;font-size:13px;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;padding:8px 0;border-bottom:1px solid rgba(0,0,0,.05)}.detail-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#0009}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:right;color:#000000d9}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 0;color:#0000008a}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00000061}"]})}return s})()},87509:(h,u,r)=>{r.d(u,{f:()=>m});var a=r(48728),_=r(95416);let m=(()=>{class o{constructor(){this.snackBar=(0,a.WQX)(_.UG)}success(d,l="Close",p=3e3){this.snackBar.open(d,l,{duration:p,panelClass:["toast-success"]})}error(d,l="Close",p=3e3){this.snackBar.open(d,l,{duration:p,panelClass:["toast-error"]})}static#t=this.\u0275fac=function(l){return new(l||o)};static#e=this.\u0275prov=a.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()}}]);