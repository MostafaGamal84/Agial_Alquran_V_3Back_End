"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[9207],{79207:(I,f,n)=>{n.r(f),n.d(f,{ManagerAddComponent:()=>H});var d=n(48728),h=n(72200),r=n(89417),c=n(99830),O=n(56147),u=n(72709),_=n(87509),p=n(76848),k=n(88937),P=n(53964),F=n(8223),e=n(73664),D=n(88834),y=n(33746),C=n(5404),T=n(72923),A=n(25079),R=n(16735),j=n(63342);function B(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Full name is required"),e.k0s())}function $(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Email is required"),e.k0s())}function S(t,l){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const o=l.$implicit;e.Y8G("value",o.dialCode),e.R7$(),e.Lme(" ",o.name," (",o.dialCode,") ")}}function N(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Mobile is required"),e.k0s())}function W(t,l){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const o=l.$implicit;e.Y8G("value",o.dialCode),e.R7$(),e.Lme(" ",o.name," (",o.dialCode,") ")}}function U(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Password is required"),e.k0s())}function L(t,l){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.name)}}function G(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Nationality id is required"),e.k0s())}function K(t,l){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.name)}}function X(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Governorate id is required"),e.k0s())}function Y(t,l){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const o=l.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.label)}}function V(t,l){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Branch id is required"),e.k0s())}let H=(()=>{class t{constructor(){this.fb=(0,d.WQX)(r.ok),this.userService=(0,d.WQX)(u.D),this.toast=(0,d.WQX)(_.f),this.lookupService=(0,d.WQX)(p.s),this.countryService=(0,d.WQX)(P.o),this.nationalities=[],this.governorates=[],this.countries=[],this.Branch=[{id:F.E.Mens,label:"\u0627\u0644\u0631\u062c\u0627\u0644"},{id:F.E.Women,label:"\u0627\u0644\u0646\u0633\u0627\u0621"}],this.phoneFormats={"+1":{mask:"000-000-0000",placeholder:"123-456-7890"},"+44":{mask:"0000 000000",placeholder:"7123 456789"},"+966":{mask:"0000000000",placeholder:"5XXXXXXXXX"}},this.mobileMask="",this.mobilePlaceholder="",this.secondMobileMask="",this.secondMobilePlaceholder=""}ngOnInit(){this.basicInfoForm=this.fb.group({fullName:["",r.k0.required],email:["",[r.k0.required,r.k0.email]],mobileCountryDialCode:[null,r.k0.required],mobile:["",r.k0.required],secondMobileCountryDialCode:[""],secondMobile:[""],passwordHash:["",[r.k0.required,r.k0.minLength(6)]],nationalityId:[null,r.k0.required],governorateId:[null,r.k0.required],branchId:[null,r.k0.required]}),this.lookupService.getAllNationalities().subscribe(o=>{o.isSuccess&&(this.nationalities=o.data)}),this.lookupService.getAllGovernorates().subscribe(o=>{o.isSuccess&&(this.governorates=o.data)}),this.countryService.getCountries().subscribe(o=>{this.countries=o})}onCountryCodeChange(o){const m=this.basicInfoForm.get(o)?.value,a=this.phoneFormats[m]||{mask:"",placeholder:""};"mobileCountryDialCode"===o?(this.mobileMask=a.mask,this.mobilePlaceholder=a.placeholder):(this.secondMobileMask=a.mask,this.secondMobilePlaceholder=a.placeholder)}onSubmit(){if(this.basicInfoForm.valid){const o=this.basicInfoForm.value,m=i=>i.replace(/\D/g,""),a={fullName:o.fullName,email:o.email,mobile:`${o.mobileCountryDialCode}${m(o.mobile)}`,secondMobile:o.secondMobile?`${o.secondMobileCountryDialCode}${m(o.secondMobile)}`:void 0,passwordHash:o.passwordHash,nationalityId:o.nationalityId,governorateId:o.governorateId,branchId:o.branchId,userTypeId:Number(k.m.Manager)};this.userService.createUser(a).subscribe({next:i=>{i?.isSuccess?(this.toast.success(i.message||"User created successfully"),this.basicInfoForm.reset()):i?.errors?.length?i.errors.forEach(s=>this.toast.error(s.message)):this.toast.error("Error creating user")},error:()=>this.toast.error("Error creating user")})}else this.basicInfoForm.markAllAsTouched()}static#e=this.\u0275fac=function(m){return new(m||t)};static#o=this.\u0275cmp=e.VBU({type:t,selectors:[["app-manager-add"]],features:[e.Jv_([(0,c.Dw)()])],decls:62,vars:22,consts:[[1,"row"],[1,"col-12"],["cardTitle","Basic Information"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],["appearance","outline",1,"w-100","m-b-10"],["matInput","","type","text","placeholder","Enter Full Name","formControlName","fullName"],["matInput","","type","email","placeholder","Enter Email","formControlName","email"],["formControlName","mobileCountryDialCode","matPrefix","","appOpenSelectOnType","","placeholder","+1",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","mobile",3,"click","mask","placeholder","dropSpecialCharacters","validation"],["formControlName","secondMobileCountryDialCode","matPrefix","","appOpenSelectOnType","","placeholder","+1",3,"selectionChange"],["matInput","","type","text","formControlName","secondMobile",3,"click","mask","placeholder","dropSpecialCharacters","validation"],["matInput","","type","password","placeholder","Enter Password","formControlName","passwordHash"],["formControlName","nationalityId","placeholder","Select Nationality","appOpenSelectOnType",""],["formControlName","governorateId","placeholder","Select Governorate","appOpenSelectOnType",""],["formControlName","branchId","placeholder","Select Branch","appOpenSelectOnType",""],[1,"col-md-12","text-end"],["mat-flat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(m,a){if(1&m&&(e.j41(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"form",3),e.bIt("ngSubmit",function(){return a.onSubmit()}),e.j41(4,"div",0)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e.EFF(8,"Full Name"),e.k0s(),e.nrm(9,"input",6),e.nVh(10,B,2,0,"mat-error"),e.k0s()(),e.j41(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),e.EFF(14,"Email"),e.k0s(),e.nrm(15,"input",7),e.nVh(16,$,2,0,"mat-error"),e.k0s()(),e.j41(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),e.EFF(20,"Mobile"),e.k0s(),e.j41(21,"mat-select",8),e.bIt("selectionChange",function(){return a.onCountryCodeChange("mobileCountryDialCode")}),e.DNE(22,S,2,3,"mat-option",9),e.k0s(),e.j41(23,"input",10),e.bIt("click",function(s){return s.stopPropagation()}),e.k0s(),e.nVh(24,N,2,0,"mat-error"),e.k0s()(),e.j41(25,"div",4)(26,"mat-form-field",5)(27,"mat-label"),e.EFF(28,"Second Mobile"),e.k0s(),e.j41(29,"mat-select",11),e.bIt("selectionChange",function(){return a.onCountryCodeChange("secondMobileCountryDialCode")}),e.DNE(30,W,2,3,"mat-option",9),e.k0s(),e.j41(31,"input",12),e.bIt("click",function(s){return s.stopPropagation()}),e.k0s()()(),e.j41(32,"div",4)(33,"mat-form-field",5)(34,"mat-label"),e.EFF(35,"Password"),e.k0s(),e.nrm(36,"input",13),e.nVh(37,U,2,0,"mat-error"),e.k0s()(),e.j41(38,"div",4)(39,"mat-form-field",5)(40,"mat-label"),e.EFF(41,"Nationality"),e.k0s(),e.j41(42,"mat-select",14),e.DNE(43,L,2,2,"mat-option",9),e.k0s(),e.nVh(44,G,2,0,"mat-error"),e.k0s()(),e.j41(45,"div",4)(46,"mat-form-field",5)(47,"mat-label"),e.EFF(48,"Governorate"),e.k0s(),e.j41(49,"mat-select",15),e.DNE(50,K,2,2,"mat-option",9),e.k0s(),e.nVh(51,X,2,0,"mat-error"),e.k0s()(),e.j41(52,"div",4)(53,"mat-form-field",5)(54,"mat-label"),e.EFF(55,"Branch"),e.k0s(),e.j41(56,"mat-select",16),e.DNE(57,Y,2,2,"mat-option",9),e.k0s(),e.nVh(58,V,2,0,"mat-error"),e.k0s()(),e.j41(59,"div",17)(60,"button",18),e.EFF(61,"Submit"),e.k0s()()()()()()()),2&m){let i,s,g,M,b,v,E;e.R7$(3),e.Y8G("formGroup",a.basicInfoForm),e.R7$(7),e.vxM(null!=(i=a.basicInfoForm.get("fullName"))&&i.touched&&null!=(i=a.basicInfoForm.get("fullName"))&&i.invalid?10:-1),e.R7$(6),e.vxM(null!=(s=a.basicInfoForm.get("email"))&&s.touched&&null!=(s=a.basicInfoForm.get("email"))&&s.invalid?16:-1),e.R7$(6),e.Y8G("ngForOf",a.countries),e.R7$(),e.Y8G("mask",a.mobileMask)("placeholder",a.mobilePlaceholder)("dropSpecialCharacters",!1)("validation",!!a.mobileMask),e.R7$(),e.vxM(null!=(g=a.basicInfoForm.get("mobile"))&&g.touched&&null!=(g=a.basicInfoForm.get("mobile"))&&g.invalid?24:-1),e.R7$(6),e.Y8G("ngForOf",a.countries),e.R7$(),e.Y8G("mask",a.secondMobileMask)("placeholder",a.secondMobilePlaceholder)("dropSpecialCharacters",!1)("validation",!!a.secondMobileMask),e.R7$(6),e.vxM(null!=(M=a.basicInfoForm.get("passwordHash"))&&M.touched&&null!=(M=a.basicInfoForm.get("passwordHash"))&&M.invalid?37:-1),e.R7$(6),e.Y8G("ngForOf",a.nationalities),e.R7$(),e.vxM(null!=(b=a.basicInfoForm.get("nationalityId"))&&b.touched&&null!=(b=a.basicInfoForm.get("nationalityId"))&&b.invalid?44:-1),e.R7$(6),e.Y8G("ngForOf",a.governorates),e.R7$(),e.vxM(null!=(v=a.basicInfoForm.get("governorateId"))&&v.touched&&null!=(v=a.basicInfoForm.get("governorateId"))&&v.invalid?51:-1),e.R7$(6),e.Y8G("ngForOf",a.Branch),e.R7$(),e.vxM(null!=(E=a.basicInfoForm.get("branchId"))&&E.touched&&null!=(E=a.basicInfoForm.get("branchId"))&&E.invalid?58:-1),e.R7$(2),e.Y8G("disabled",a.basicInfoForm.invalid)}},dependencies:[h.MD,h.Sq,O.G,D.$z,y.fg,C.j,C.M,C.b,C.e,T.g,A.M,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,R.i,j.f,c.Zr],styles:["form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-floating-label[_ngcontent-%COMP%]{font-weight:500}.file-upload[_ngcontent-%COMP%]{display:block;border:1px solid var(--accent-300);width:100%;margin-bottom:24px;border-radius:4px;overflow:hidden}.file-upload[_ngcontent-%COMP%]:not(:disabled):not([readonly]){cursor:pointer}.file-upload[_ngcontent-%COMP%]::file-selector-button{padding:.8rem .75rem;margin-right:8px;color:var(--accent-800);pointer-events:none;border-color:var(--accent-300);border-style:solid;border-width:0px;border-inline-end-width:1px;border-radius:0;background:var(--accent-100)}.file-upload[_ngcontent-%COMP%]:hover:not(:disabled):not([readonly])::file-selector-button{background:var(--accent-200)}"]})}return t})()},87509:(I,f,n)=>{n.d(f,{f:()=>r});var d=n(48728),h=n(95416);let r=(()=>{class c{constructor(){this.snackBar=(0,d.WQX)(h.UG)}success(u,_="Close",p=3e3){this.snackBar.open(u,_,{duration:p,panelClass:["toast-success"]})}error(u,_="Close",p=3e3){this.snackBar.open(u,_,{duration:p,panelClass:["toast-error"]})}static#e=this.\u0275fac=function(_){return new(_||c)};static#o=this.\u0275prov=d.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);