"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[9744],{59744:(x,m,l)=>{l.r(m),l.d(m,{ChecklistDatabase:()=>_,TodoItemFlatNode:()=>p,TodoItemNode:()=>g,TreeViewComponent:()=>A});var c=l(48728),T=l(72200),E=l(21633),C=l(64109),r=l(47358),f=l(84412),S=l(56147),t=l(73664),N=l(82765),D=l(88834),M=l(9010),P=l(81074),I=l(33746),u=l(5404),v=l(16735);function k(o,d){if(1&o){const n=t.RV6();t.j41(0,"mat-tree-node",7),t.nrm(1,"button",8),t.j41(2,"mat-checkbox",9),t.bIt("change",function(){const a=c.eBV(n).$implicit,i=t.XpG();return c.Njj(i.todoLeafItemSelectionToggle(a))}),t.EFF(3),t.k0s()()}if(2&o){const n=d.$implicit,e=t.XpG();t.R7$(2),t.Y8G("checked",e.checklistSelection.isSelected(n)),t.R7$(),t.SpI(" ",n.item," ")}}function O(o,d){if(1&o){const n=t.RV6();t.j41(0,"mat-tree-node",10),t.nrm(1,"button",8),t.j41(2,"mat-form-field",11)(3,"mat-label"),t.EFF(4,"New item..."),t.k0s(),t.nrm(5,"input",12,0),t.k0s(),t.j41(7,"button",13),t.bIt("click",function(){const a=c.eBV(n).$implicit,i=t.sdS(6),s=t.XpG();return c.Njj(s.saveNode(a,i.value))}),t.EFF(8,"Save"),t.k0s()()}}function b(o,d){if(1&o){const n=t.RV6();t.j41(0,"mat-tree-node",10)(1,"button",14)(2,"mat-icon",15),t.EFF(3),t.k0s()(),t.j41(4,"mat-checkbox",16),t.bIt("change",function(){const a=c.eBV(n).$implicit,i=t.XpG();return c.Njj(i.todoItemSelectionToggle(a))}),t.EFF(5),t.k0s(),t.j41(6,"button",17),t.bIt("click",function(){const a=c.eBV(n).$implicit,i=t.XpG();return c.Njj(i.addNewItem(a))}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s()()()}if(2&o){const n=d.$implicit,e=t.XpG();t.R7$(),t.BMQ("aria-label","Toggle "+n.item),t.R7$(2),t.SpI(" ",e.treeControl.isExpanded(n)?"expand_more":"chevron_right"," "),t.R7$(),t.Y8G("checked",e.descendantsAllSelected(n))("indeterminate",e.descendantsPartiallySelected(n)),t.R7$(),t.SpI(" ",n.item," ")}}class g{}class p{}const R={Groceries:{"Almond Meal flour":null,"Organic eggs":null,"Protein Powder":null,Fruits:{Apple:null,Berries:["Blueberry","Raspberry"],Orange:null}},Reminders:["Cook dinner","Read the Material Design spec","Upgrade Application to Angular"]};let _=(()=>{class o{get data(){return this.dataChange.value}constructor(){this.dataChange=new f.t([]),this.initialize()}initialize(){const n=this.buildFileTree(R,0);this.dataChange.next(n)}buildFileTree(n,e){return Object.keys(n).reduce((a,i)=>{const s=n[i],h=new g;return h.item=i,null!=s&&("object"==typeof s?h.children=this.buildFileTree(s,e+1):h.item=s),a.concat(h)},[])}insertItem(n,e){n.children&&(n.children.push({item:e}),this.dataChange.next(this.data))}updateItem(n,e){n.item=e,this.dataChange.next(this.data)}ngOnDestroy(){}static#e=this.\u0275fac=function(e){return new(e||o)};static#t=this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac})}return o})(),A=(()=>{class o{constructor(){this._database=(0,c.WQX)(_),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new E.S(!0),this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.getChildren=e=>e.children,this.hasChild=(e,a)=>a.expandable,this.hasNoContent=(e,a)=>""===a.item,this.transformer=(e,a)=>{const i=this.nestedNodeMap.get(e),s=i&&i.item===e.item?i:new p;return s.item=e.item,s.level=a,s.expandable=!!e.children?.length,this.flatNodeMap.set(s,e),this.nestedNodeMap.set(e,s),s};const n=this._database;this.treeFlattener=new r.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new C.XW(this.getLevel,this.isExpandable),this.dataSource=new r.zw(this.treeControl,this.treeFlattener),n.dataChange.subscribe(e=>{this.dataSource.data=e})}descendantsAllSelected(n){const e=this.treeControl.getDescendants(n);return e.length>0&&e.every(i=>this.checklistSelection.isSelected(i))}descendantsPartiallySelected(n){return this.treeControl.getDescendants(n).some(i=>this.checklistSelection.isSelected(i))&&!this.descendantsAllSelected(n)}todoItemSelectionToggle(n){this.checklistSelection.toggle(n);const e=this.treeControl.getDescendants(n);this.checklistSelection.isSelected(n)?this.checklistSelection.select(...e):this.checklistSelection.deselect(...e);for(const a of e)this.checklistSelection.isSelected(a);this.checkAllParentsSelection(n)}todoLeafItemSelectionToggle(n){this.checklistSelection.toggle(n),this.checkAllParentsSelection(n)}checkAllParentsSelection(n){let e=this.getParentNode(n);for(;e;)this.checkRootNodeSelection(e),e=this.getParentNode(e)}checkRootNodeSelection(n){const e=this.checklistSelection.isSelected(n),a=this.treeControl.getDescendants(n),i=a.length>0&&a.every(s=>this.checklistSelection.isSelected(s));e&&!i?this.checklistSelection.deselect(n):!e&&i&&this.checklistSelection.select(n)}getParentNode(n){const e=this.getLevel(n);if(e<1)return null;for(let i=this.treeControl.dataNodes.indexOf(n)-1;i>=0;i--){const s=this.treeControl.dataNodes[i];if(this.getLevel(s)<e)return s}return null}addNewItem(n){const e=this.flatNodeMap.get(n);e&&this._database.insertItem(e,""),this.treeControl.expand(n)}saveNode(n,e){const a=this.flatNodeMap.get(n);a&&this._database.updateItem(a,e)}static#e=this.\u0275fac=function(e){return new(e||o)};static#t=this.\u0275cmp=t.VBU({type:o,selectors:[["app-tree-view"]],features:[t.Jv_([_])],decls:7,vars:4,consts:[["itemValue",""],[1,"row"],[1,"col-md-12"],["cardTitle","tree view"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"change","checked"],["matTreeNodePadding",""],["appearance","fill"],["matInput","","placeholder","Ex. Lettuce"],["mat-button","",3,"click"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"change","checked","indeterminate"],["mat-icon-button","",3,"click"]],template:function(e,a){1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"app-card",3)(3,"mat-tree",4),t.DNE(4,k,4,2,"mat-tree-node",5)(5,O,9,0,"mat-tree-node",6)(6,b,9,5,"mat-tree-node",6),t.k0s()()()()),2&e&&(t.R7$(3),t.Y8G("dataSource",a.dataSource)("treeControl",a.treeControl),t.R7$(2),t.Y8G("matTreeNodeDefWhen",a.hasNoContent),t.R7$(),t.Y8G("matTreeNodeDefWhen",a.hasChild))},dependencies:[T.MD,S.G,N.So,D.$z,M.M,P.An,I.fg,u.j,u.M,r.yI,r.yF,r.pO,r.lQ,r.d6,v.i],encapsulation:2})}return o})()}}]);