"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[2076],{343:(P,M,s)=>{s.r(M),s.d(M,{StudentDetailsComponent:()=>R});var p=s(8728),b=s(2200),_=s(357),h=s(9183),g=s(8834),o=s(7880),t=s(8223),e=s(3664),r=s(9010);const i=()=>({maxHeight:"calc(100vh - 155px)",position:"relative"});function a(d,C){1&d&&(e.j41(0,"div",8),e.nrm(1,"mat-spinner",9),e.j41(2,"div",10),e.EFF(3,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a..."),e.k0s()())}function n(d,C){if(1&d&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2),e.k0s(),e.j41(3,"div",28),e.EFF(4),e.k0s()()),2&d){const l=C.$implicit;e.R7$(2),e.JRh(l.label),e.R7$(2),e.JRh(l.value||"\u2014")}}function u(d,C){if(1&d&&(e.j41(0,"div",24),e.DNE(1,n,5,2,"div",25),e.k0s()),2&d){const l=e.XpG(2);e.R7$(),e.Y8G("ngForOf",l.statEntries)}}function c(d,C){1&d&&e.nrm(0,"i",40)}function m(d,C){if(1&d){const l=e.RV6();e.j41(0,"a",34),e.bIt("click",function(v){return p.eBV(l),p.Njj(v.stopPropagation())}),e.j41(1,"div",35),e.nrm(2,"i"),e.k0s(),e.j41(3,"div",36)(4,"div",37),e.EFF(5),e.k0s(),e.j41(6,"div",38),e.EFF(7),e.k0s()(),e.DNE(8,c,1,0,"i",39),e.k0s()}if(2&d){const l=C.$implicit;e.AVh("is-link",!!l.href),e.Y8G("href",l.href||null,e.B4B),e.R7$(2),e.HbH(l.icon),e.R7$(3),e.JRh(l.label),e.R7$(2),e.JRh(l.value||"\u2014"),e.R7$(),e.Y8G("ngIf",l.href)}}function f(d,C){if(1&d&&(e.j41(0,"section",29)(1,"div",30),e.nrm(2,"i",31),e.EFF(3," \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u0648\u0627\u0635\u0644 "),e.k0s(),e.j41(4,"div",32),e.DNE(5,m,9,8,"a",33),e.k0s()()),2&d){const l=e.XpG(2);e.R7$(5),e.Y8G("ngForOf",l.contactEntries)}}function O(d,C){if(1&d&&(e.j41(0,"div",44)(1,"div",45),e.EFF(2),e.k0s(),e.j41(3,"div",46),e.EFF(4),e.k0s()()),2&d){const l=C.$implicit;e.R7$(2),e.JRh(l.label),e.R7$(2),e.JRh(l.value)}}function D(d,C){if(1&d&&(e.j41(0,"section",29)(1,"div",30),e.nrm(2,"i",41),e.EFF(3," \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 "),e.k0s(),e.j41(4,"div",42),e.DNE(5,O,5,2,"div",43),e.k0s()()),2&d){const l=e.XpG(2);e.R7$(5),e.Y8G("ngForOf",l.detailEntries)}}function x(d,C){if(1&d&&(e.j41(0,"app-scrollbar",11)(1,"div",12)(2,"section",13)(3,"div",14)(4,"div",15),e.nrm(5,"i",16),e.k0s(),e.j41(6,"div",17)(7,"div",18),e.EFF(8),e.k0s(),e.j41(9,"div",19)(10,"span",20),e.nrm(11,"i",21),e.EFF(12),e.k0s()()()(),e.DNE(13,u,2,1,"div",22),e.k0s(),e.DNE(14,f,6,1,"section",23)(15,D,6,1,"section",23),e.k0s()()),2&d){const l=C.ngIf,E=e.XpG();e.Y8G("customStyle",e.lJ4(6,i)),e.R7$(8),e.JRh(l.fullName||"\u2014"),e.R7$(4),e.SpI(" ",E.getBranchLabel(l.branchId)," "),e.R7$(),e.Y8G("ngIf",E.statEntries.length),e.R7$(),e.Y8G("ngIf",E.contactEntries.length),e.R7$(),e.Y8G("ngIf",E.detailEntries.length)}}let R=(()=>{class d{constructor(){this.loading=!0,this.contactEntries=[],this.detailEntries=[],this.statEntries=[],this.labelMap={nationality:"\u0627\u0644\u062c\u0646\u0633\u064a\u0629",governorate:"\u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629",managerName:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641",teacherName:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0639\u0644\u0645",circleName:"\u0627\u0633\u0645 \u0627\u0644\u062d\u0644\u0642\u0629",branchId:"\u0627\u0644\u0641\u0631\u0639",gender:"\u0627\u0644\u0646\u0648\u0639",userName:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",identityNumber:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629",residentId:"\u0645\u0639\u0631\u0651\u0641 \u0627\u0644\u0625\u0642\u0627\u0645\u0629",nationalityId:"\u0645\u0639\u0631\u0651\u0641 \u0627\u0644\u062c\u0646\u0633\u064a\u0629",governorateId:"\u0645\u0639\u0631\u0651\u0641 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629",createdAt:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u0634\u0627\u0621",updatedAt:"\u0622\u062e\u0631 \u062a\u062d\u062f\u064a\u062b",inactive:"\u0627\u0644\u062d\u0627\u0644\u0629"},this.Branch=[{id:t.E.Mens,label:"\u0627\u0644\u0631\u062c\u0627\u0644"},{id:t.E.Women,label:"\u0627\u0644\u0646\u0633\u0627\u0621"}];const l=(0,p.WQX)(_.e);this.setData(l&&"object"==typeof l&&"data"in l?l.data:l)}setData(l){if(this.vm=void 0,this.loading=!l,this.contactEntries=[],this.detailEntries=[],this.statEntries=[],!l)return;this.vm=l,this.loading=!1,this.statEntries=this.buildStatEntries([{key:"managerName",label:"\u0627\u0644\u0645\u0634\u0631\u0641"},{key:"teacherName",label:"\u0627\u0644\u0645\u0639\u0644\u0645"},{key:"circleName",label:"\u0627\u0644\u062d\u0644\u0642\u0629"}],l),this.contactEntries=["email","mobile","secondMobile"].map(y=>{const S=(l[y]??"").toString().trim();if(!S)return null;const F=this.getContactIcon(y);return{key:y,label:this.labelMap[y]??this.humanizeKey(y),value:S,icon:F,href:"email"===y?`mailto:${S}`:"mobile"===y||"secondMobile"===y?this.buildWhatsAppLink(S):void 0}}).filter(Boolean);const v=new Set(["email","mobile","secondMobile","fullName","managerName","teacherName","circleName","residentId","governorateId","teacherId","managerId","nationalityId","residentId","governorateId","managerId","teacherId","circleId","createdAt","updatedAt","id","branchId","inactive","identityNumber"]),I=["nationality","resident","governorate","gender","userName","identityNumber","managerName","teacherName","circleName","nationalityId","residentId","governorateId","managerId","teacherId","circleId","createdAt","updatedAt","id"],k=Object.entries(l).filter(([y])=>!v.has(y)).filter(([,y])=>null!=y).filter(([,y])=>"object"!=typeof y&&!Array.isArray(y)).map(([y,S])=>({key:y,label:this.labelMap[y]??this.humanizeKey(y),value:this.formatValue(y,S)}));this.detailEntries=k.sort((y,S)=>{const F=I.indexOf(y.key),A=I.indexOf(S.key);return(-1===F?999:F)-(-1===A?999:A)})}getBranchLabel(l){const E=this.Branch.find(v=>v.id===l);return E?E.label:null==l?"\u2014":String(l)}buildStatEntries(l,E){return l.map(v=>({label:v.label,value:E[v.key]??""})).filter(v=>!(!v.value||!v.value.toString().trim()))}formatValue(l,E){return"inactive"===l?E?"\u063a\u064a\u0631 \u0646\u0634\u0637":"\u0646\u0634\u0637":"branchId"===l?this.getBranchLabel(E):String(E)}humanizeKey(l){const E=l.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/\s+/g," ").trim();return E?E.charAt(0).toUpperCase()+E.slice(1):l}getContactIcon(l){return{email:"ti ti-mail",mobile:"ti ti-brand-whatsapp",secondMobile:"ti ti-brand-whatsapp"}[l]||"ti ti-circle"}buildWhatsAppLink(l){const E=l.replace(/[^\d]/g,"");return E?`https://wa.me/${E}`:void 0}static#t=this.\u0275fac=function(E){return new(E||d)};static#e=this.\u0275cmp=e.VBU({type:d,selectors:[["app-student-details"]],decls:9,vars:2,consts:[["mat-dialog-title","",1,"dialog-head"],[1,"head-row"],[1,"title"],["mat-icon-button","","mat-dialog-close","","aria-label","\u0625\u063a\u0644\u0627\u0642",1,"close-btn"],[1,"ti","ti-x"],[1,"dialog-content"],["class","loading-state",4,"ngIf"],[3,"customStyle",4,"ngIf"],[1,"loading-state"],["diameter","48"],[1,"loading-text"],[3,"customStyle"],[1,"wrap"],[1,"card","hero"],[1,"hero-left"],[1,"avatar"],[1,"ti","ti-user"],[1,"hero-meta"],[1,"name"],[1,"sub"],[1,"pill"],[1,"ti","ti-building-store"],["class","hero-right",4,"ngIf"],["class","card",4,"ngIf"],[1,"hero-right"],["class","mini",4,"ngFor","ngForOf"],[1,"mini"],[1,"mini-k"],[1,"mini-v"],[1,"card"],[1,"card-title"],[1,"ti","ti-address-book"],[1,"contact-grid"],["class","contact-item",3,"href","is-link","click",4,"ngFor","ngForOf"],[1,"contact-item",3,"click","href"],[1,"c-ico"],[1,"c-body"],[1,"c-label"],[1,"c-value"],["class","ti ti-external-link hint",4,"ngIf"],[1,"ti","ti-external-link","hint"],[1,"ti","ti-id"],[1,"kv-grid"],["class","kv",4,"ngFor","ngForOf"],[1,"kv"],[1,"k"],[1,"v"]],template:function(E,v){1&E&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0637\u0627\u0644\u0628"),e.k0s(),e.j41(4,"button",3),e.nrm(5,"i",4),e.k0s()()(),e.j41(6,"mat-dialog-content",5),e.DNE(7,a,4,0,"div",6)(8,x,16,7,"app-scrollbar",7),e.k0s()),2&E&&(e.R7$(7),e.Y8G("ngIf",v.loading),e.R7$(),e.Y8G("ngIf",!v.loading&&v.vm))},dependencies:[b.MD,b.Sq,b.bT,_.l,_.a,_.b,_.c,h.D6,h.LG,g.Hl,r.M,o.o],styles:["[_nghost-%COMP%]{direction:rtl;text-align:right;color:var(--text-primary);--text-primary: #111827;--text-secondary: #6b7280;--card-bg: #ffffff;--muted-bg: #fafafa;--border-color: #e5e7eb;--divider-color: #f1f1f1;--accent-border: #ececec}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%], [data-theme=dark][_nghost-%COMP%], [data-theme=dark]   [_nghost-%COMP%]{--text-primary: #f3f4f6;--text-secondary: #9ca3af;--card-bg: #0f172a;--muted-bg: #111827;--border-color: #1f2937;--divider-color: #1f2937;--accent-border: #1f2937}.dialog-head[_ngcontent-%COMP%]{padding:14px 16px}.head-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.title[_ngcontent-%COMP%]{font-weight:900;font-size:16px;color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:10px}.close-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.dialog-content[_ngcontent-%COMP%]{padding:0}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:40px 20px;color:var(--text-secondary)}.loading-state[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-weight:800}.wrap[_ngcontent-%COMP%]{padding:14px}.card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--border-color);border-radius:14px;padding:14px;margin-bottom:12px;box-shadow:0 6px 18px #0000000a}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:900;font-size:14px;margin-bottom:12px;color:var(--text-primary)}.card-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.hero[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px}.hero-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.avatar[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:16px;border:1px solid var(--accent-border);display:grid;place-items:center}.avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}.hero-meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:900;line-height:1.2;color:var(--text-primary)}.sub[_ngcontent-%COMP%]{margin-top:8px;display:flex;flex-wrap:wrap;gap:8px}.pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--border-color);font-size:12px;font-weight:800;background:var(--muted-bg)}.pill[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.pill.is-inactive[_ngcontent-%COMP%]{border-color:#ffd8d8;background:#fff5f5}.hero-right[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px}.mini[_ngcontent-%COMP%]{border:1px dashed var(--border-color);border-radius:12px;padding:10px;background:var(--muted-bg)}.mini-k[_ngcontent-%COMP%]{font-size:11px;font-weight:900;color:var(--text-secondary);margin-bottom:6px}.mini-v[_ngcontent-%COMP%]{font-size:12px;font-weight:800;word-break:break-word;color:var(--text-primary)}.contact-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid var(--border-color);border-radius:12px;text-decoration:none;color:inherit;background:var(--card-bg)}.contact-item.is-link[_ngcontent-%COMP%]{cursor:pointer}.c-ico[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;border:1px solid var(--border-color);display:grid;place-items:center}.c-ico[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.c-body[_ngcontent-%COMP%]{flex:1;min-width:0}.c-label[_ngcontent-%COMP%]{font-size:11px;font-weight:900;color:var(--text-secondary);margin-bottom:4px}.c-value[_ngcontent-%COMP%]{font-size:13px;font-weight:800;color:var(--text-primary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.hint[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.kv-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}.kv[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:12px;padding:10px;background:var(--card-bg)}.k[_ngcontent-%COMP%]{font-size:11px;font-weight:900;color:var(--text-secondary);margin-bottom:6px}.v[_ngcontent-%COMP%]{font-size:13px;font-weight:800;color:var(--text-primary);word-break:break-word}@media (max-width: 480px){.wrap[_ngcontent-%COMP%]{padding:12px}.hero-right[_ngcontent-%COMP%], .kv-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return d})()},1194:(P,M,s)=>{s.d(M,{NC:()=>r,yz:()=>e});var p=s(9330),b=s(8728),_=s(6354),h=s(2525),g=s(6848),o=function(i){return i[i.LE=1]="LE",i[i.SAR=2]="SAR",i[i.USD=3]="USD",i}(o||{});const t={[o.LE]:"LE",[o.SAR]:"SAR",[o.USD]:"USD"};function e(i){return null==i?"":t[i]??""}let r=(()=>{class i{constructor(){this.http=(0,b.WQX)(p.Qq)}getPayment(n){const u=(new p.Nl).set("paymentId",n.toString());return this.http.get(`${h.c.apiUrl}/api/StudentPayment/GetPayment`,{params:u})}downloadPaymentReceipt(n){const u=(new p.Nl).set("paymentId",n.toString());return this.http.get(`${h.c.apiUrl}/api/StudentPayment/GetPaymentReceipt`,{params:u,responseType:"blob"})}updatePayment(n,u){const c=new FormData;return Object.entries(n).forEach(([m,f])=>{null!=f&&c.append(m,f.toString())}),u&&c.append("ReceiptPath",u),this.http.post(`${h.c.apiUrl}/api/StudentPayment/UpdatePayment`,c)}getDashboard(n,u,c,m){let f=new p.Nl;return void 0!==n&&(f=f.set("studentId",n.toString())),void 0!==u&&(f=f.set("currencyId",u.toString())),c&&(f=f.set("dataMonth",c.toISOString())),m&&(f=f.set("compareMonth",m.toISOString())),this.http.get(`${h.c.apiUrl}/api/StudentPayment/Dashboard`,{params:f})}getInvoices(n,u,c,m,f,O,D,x,R){let d=new p.Nl;void 0!==n.skipCount&&(d=d.set("SkipCount",n.skipCount.toString())),void 0!==n.maxResultCount&&(d=d.set("MaxResultCount",n.maxResultCount.toString()));const C=n.searchWord??n.searchTerm;return n.searchTerm&&(d=d.set("SearchTerm",n.searchTerm)),C&&(d=d.set("SearchWord",C)),u&&(d=d.set("tab",u)),c&&(d=d.set("studentId",c.toString())),m&&(d=d.set("createdFrom",m.toISOString())),f&&(d=d.set("createdTo",f.toISOString())),O&&(d=d.set("dueFrom",O.toISOString())),D&&(d=d.set("dueTo",D.toISOString())),x&&(d=d.set("month",x.toISOString())),R&&R>0&&(d=d.set("residentId",R.toString())),n.residentGroup&&"all"!==n.residentGroup&&(d=d.set("residentGroup",n.residentGroup)),this.http.get(`${h.c.apiUrl}/api/StudentPayment/Invoices`,{params:d}).pipe((0,_.T)(l=>(0,g._)(l,{skipCount:n.skipCount})))}static#t=this.\u0275fac=function(u){return new(u||i)};static#e=this.\u0275prov=b.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},1227:(P,M,s)=>{s.d(M,{C8:()=>o,UR:()=>r});const _=6e8;function o(i){const a=function h(i){if(!i)return;const a=i.trim();if(!a)return;const[n,u]=a.split(":"),c=Number(n),m=Number(u);return Number.isNaN(c)||Number.isNaN(m)?void 0:60*c+m}(i);if(void 0===a)return;const n=Math.round(a);if(!Number.isFinite(n))return;const c=n%60;return`${Math.floor(n/60).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:00`}function t(i){if(null==i||Number.isNaN(i))return"";const a=Math.round(i);if(!Number.isFinite(a))return"";const u=a%60;return`${Math.floor(a/60).toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`}function r(i){if(null==i)return"";if("object"==typeof i){const c=function e(i){if(i){if("number"==typeof i.totalMinutes)return i.totalMinutes;if("number"==typeof i.ticks)return i.ticks/_;if("number"==typeof i.totalSeconds)return i.totalSeconds/60;if("number"==typeof i.totalMilliseconds)return i.totalMilliseconds/6e4;if("hours"in i||"minutes"in i||"seconds"in i||"milliseconds"in i)return 60*("number"==typeof i.hours?i.hours:0)+("number"==typeof i.minutes?i.minutes:0)+("number"==typeof i.seconds?i.seconds:0)/60+("number"==typeof i.milliseconds?i.milliseconds:0)/6e4}}(i);if(void 0!==c)return t(c);const m=["formatted","value","display","text"];for(const f of m){const O=i[f];if("string"==typeof O){const D=O.trim();if(D)return D}}return""}if("number"==typeof i)return Number.isNaN(i)?"":t(i);const a=i.trim();if(!a)return"";const n=Number(a);if(!Number.isNaN(n))return t(n);const u=a.split(":");if(u.length>=2){const c=Number(u[0]),m=Number(u[1]);if(!Number.isNaN(c)&&!Number.isNaN(m))return`${c.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`}return a}},1703:(P,M,s)=>{s.d(M,{i:()=>r});var p=s(8728),b=s(2200),_=s(357),h=s(8834),g=s(3243),o=s(1194),t=s(3664);function e(i,a){if(1&i){const n=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){p.eBV(n);const c=t.XpG();return p.Njj(c.revertPayment())}),t.EFF(1," \u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0627\u062a\u0645\u0627\u0645 \u0627\u0644\u062f\u0641\u0639 "),t.k0s()}if(2&i){const n=t.XpG();t.Y8G("disabled",n.isUpdating)}}let r=(()=>{class i{constructor(){this.data=(0,p.WQX)(_.e),this.router=(0,p.WQX)(g.Ix),this.dialogRef=(0,p.WQX)(_.k),this.paymentService=(0,p.WQX)(o.NC),this.isUpdating=!1}viewInvoice(){this.dialogRef.close(),this.router.navigate(["/invoice/list"],{queryParams:{search:this.data.invoiceId}})}revertPayment(){this.isUpdating||(this.isUpdating=!0,this.paymentService.updatePayment({id:this.data.invoiceId,payStatue:!1,isCancelled:!1}).subscribe({next:()=>this.dialogRef.close(!0),error:u=>{this.isUpdating=!1,console.error("Failed to revert payment status.",u)}}))}get currencyLabel(){return(0,o.yz)(this.data.currencyId??this.data.currency??null)}get canRevertPayment(){const n=(this.data.statusText??"").toLowerCase();return"paid"===n||"\u0645\u062f\u0641\u0648\u0639"===n}static#t=this.\u0275fac=function(u){return new(u||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-payment-details"]],decls:62,vars:20,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"payment-item"],["mat-dialog-actions","","align","end"],["mat-button","","color","warn",3,"disabled"],["mat-button","","color","primary",3,"click"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"click","disabled"]],template:function(u,c){1&u&&(t.j41(0,"h2",0),t.EFF(1,"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),t.k0s(),t.j41(2,"div",1)(3,"div",2)(4,"strong"),t.EFF(5,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:"),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",2)(9,"strong"),t.EFF(10,"\u0627\u0644\u0628\u0627\u0642\u0629:"),t.k0s(),t.j41(11,"span"),t.EFF(12),t.k0s()(),t.j41(13,"div",2)(14,"strong"),t.EFF(15,"\u0627\u0644\u0627\u0633\u0645:"),t.k0s(),t.j41(16,"span"),t.EFF(17),t.k0s()(),t.j41(18,"div",2)(19,"strong"),t.EFF(20,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"),t.k0s(),t.j41(21,"span"),t.EFF(22),t.k0s()(),t.j41(23,"div",2)(24,"strong"),t.EFF(25,"\u062a\u0627\u0631\u064a\u062e \u0627\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:"),t.k0s(),t.j41(26,"span"),t.EFF(27),t.nI1(28,"date"),t.k0s()(),t.j41(29,"div",2)(30,"strong"),t.EFF(31,"\u0645\u0633\u062a\u062d\u0642 \u062d\u062a\u0649:"),t.k0s(),t.j41(32,"span"),t.EFF(33),t.nI1(34,"date"),t.k0s()(),t.j41(35,"div",2)(36,"strong"),t.EFF(37,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0633\u062f\u0627\u062f:"),t.k0s(),t.j41(38,"span"),t.EFF(39),t.nI1(40,"date"),t.k0s()(),t.j41(41,"div",2)(42,"strong"),t.EFF(43,"\u0627\u0644\u0645\u0628\u0644\u063a:"),t.k0s(),t.j41(44,"span"),t.EFF(45),t.k0s()(),t.j41(46,"div",2)(47,"strong"),t.EFF(48,"\u0627\u0644\u0639\u0645\u0644\u0629:"),t.k0s(),t.j41(49,"span"),t.EFF(50),t.k0s()(),t.j41(51,"div",2)(52,"strong"),t.EFF(53,"\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639:"),t.k0s(),t.j41(54,"span"),t.EFF(55),t.k0s()()(),t.j41(56,"div",3),t.nVh(57,e,2,1,"button",4),t.j41(58,"button",5),t.bIt("click",function(){return c.viewInvoice()}),t.EFF(59,"\u0639\u0631\u0636 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),t.k0s(),t.j41(60,"button",6),t.EFF(61,"\u0627\u063a\u0644\u0627\u0642"),t.k0s()()),2&u&&(t.R7$(7),t.JRh(c.data.invoiceId),t.R7$(5),t.JRh(c.data.subscribe),t.R7$(5),t.JRh(c.data.userName),t.R7$(5),t.JRh(c.data.userEmail),t.R7$(5),t.JRh(c.data.createDate?t.i5U(28,11,c.data.createDate,"short"):"N/A"),t.R7$(6),t.JRh(c.data.dueDate?t.i5U(34,14,c.data.dueDate,"short"):"N/A"),t.R7$(6),t.JRh(c.data.paymentDate?t.i5U(40,17,c.data.paymentDate,"short"):"N/A"),t.R7$(6),t.JRh(c.data.amount),t.R7$(5),t.JRh(c.currencyLabel),t.R7$(5),t.JRh(c.data.statusText),t.R7$(2),t.vxM(c.canRevertPayment?57:-1))},dependencies:[b.MD,b.vh,_.l,_.a,_.b,_.M,_.c,h.Hl,h.$z],styles:[".payment-item[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:8px 12px;margin-bottom:8px;display:flex;gap:4px;align-items:center}.payment-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.payment-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}"]})}return i})()},1890:(P,M,s)=>{s.d(M,{I:()=>h});var p=s(9330),b=s(8728),_=s(2525);let h=(()=>{class g{constructor(){this.http=(0,b.WQX)(p.Qq)}getSummary(){return this.http.get(`${_.c.apiUrl}/api/dashboard/summary`)}getRepeatCustomers(t){const e=(new p.Nl).set("months",t.toString());return this.http.get(`${_.c.apiUrl}/api/dashboard/repeat-customers`,{params:e})}getMonthlyRevenue(t){const e=(new p.Nl).set("months",t.toString());return this.http.get(`${_.c.apiUrl}/api/dashboard/monthly-revenue`,{params:e})}getRevenueByCurrency(t,e){const r=(new p.Nl).set("startDate",t).set("endDate",e);return this.http.get(`${_.c.apiUrl}/api/dashboard/revenue-by-currency`,{params:r})}getSubscribeTypeStatistics(){return this.http.get(`${_.c.apiUrl}/api/Subscribe/TypeStatistics`)}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275prov=b.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},2400:(P,M,s)=>{s.d(M,{L:()=>o});var p=s(9330),b=s(8728),_=s(6354),h=s(2525),g=s(6848);let o=(()=>{class t{constructor(){this.http=(0,b.WQX)(p.Qq)}getStudents(r,i,a){let n=new p.Nl;void 0!==r.skipCount&&(n=n.set("SkipCount",r.skipCount.toString())),void 0!==r.maxResultCount&&(n=n.set("MaxResultCount",r.maxResultCount.toString()));const u=r.searchWord??r.searchTerm;return r.searchTerm&&(n=n.set("SearchTerm",r.searchTerm)),u&&(n=n.set("SearchWord",u)),r.filter&&(n=n.set("Filter",r.filter)),r.lang&&(n=n.set("Lang",r.lang)),r.sortingDirection&&(n=n.set("SortingDirection",r.sortingDirection)),r.sortBy&&(n=n.set("SortBy",r.sortBy)),void 0!==i&&(n=n.set("studentId",i.toString())),a&&a>0&&(n=n.set("residentId",a.toString())),r.residentGroup&&"all"!==r.residentGroup&&(n=n.set("residentGroup",r.residentGroup)),this.http.get(`${h.c.apiUrl}/api/StudentSubscrib/GetStudents`,{params:n}).pipe((0,_.T)(c=>(0,g._)(c,{skipCount:r.skipCount})))}getStudentSubscribesWithPayment(r,i,a){let n=new p.Nl;void 0!==r.skipCount&&(n=n.set("SkipCount",r.skipCount.toString())),void 0!==r.maxResultCount&&(n=n.set("MaxResultCount",r.maxResultCount.toString()));const u=r.searchWord??r.searchTerm;return r.searchTerm&&(n=n.set("SearchTerm",r.searchTerm)),u&&(n=n.set("SearchWord",u)),r.filter&&(n=n.set("Filter",r.filter)),r.lang&&(n=n.set("Lang",r.lang)),r.sortingDirection&&(n=n.set("SortingDirection",r.sortingDirection)),r.sortBy&&(n=n.set("SortBy",r.sortBy)),n=n.set("studentId",i.toString()),a&&a>0&&(n=n.set("residentId",a.toString())),r.residentGroup&&"all"!==r.residentGroup&&(n=n.set("residentGroup",r.residentGroup)),this.http.get(`${h.c.apiUrl}/api/StudentSubscrib/GetStudentSubscribesWithPayment`,{params:n}).pipe((0,_.T)(c=>(0,g._)(c,{skipCount:r.skipCount})))}create(r){return this.http.post(`${h.c.apiUrl}/api/StudentSubscrib/Create`,r)}static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275prov=b.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},3213:(P,M,s)=>{s.d(M,{i:()=>n});var p=s(2200),b=s(8728),_=s(357),h=s(7880),g=s(6053),o=s(3664),t=s(8834),e=s(3746),r=s(4507);const i=()=>({height:"calc(100vh - 433px)",position:"relative"});function a(u,c){if(1&u){const m=o.RV6();o.j41(0,"div",16),o.bIt("click",function(){const O=b.eBV(m).$implicit,D=o.XpG();return b.Njj(D.selectAddress(O))}),o.j41(1,"div",17),o.EFF(2),o.k0s(),o.j41(3,"div",18)(4,"p",19),o.EFF(5),o.k0s(),o.j41(6,"p",19),o.EFF(7),o.k0s(),o.j41(8,"p",20),o.EFF(9),o.k0s()()()}if(2&u){const m=c.$implicit;o.R7$(2),o.SpI(" ",m.name," "),o.R7$(3),o.JRh(m.address),o.R7$(2),o.JRh(m.mobile),o.R7$(2),o.JRh(m.email)}}let n=(()=>{class u{constructor(){this.dialogRef=(0,b.WQX)(_.k),this.addresses=[{name:"Ian Carpenter",address:"1754 Ureate, RhodSA5 5BO",mobile:"+91 1234567890",email:"iacrpt65@gmail.com"},{name:"Belle J. Richter",address:"1300 Mine RoadQuemado, NM 87829",mobile:"305-829-7809",email:"belljrc23@gmail.com"},{name:"Ritika Yohannan",address:"3488 Arbutus DriveMiami, FL",mobile:"+91 1234567890",email:"rtyhn65@gmail.com"},{name:"Jesse G. Hassen",address:"3488 Arbutus DriveMiami, FL 33012",mobile:"+91 1234567890",email:"jessghs78@gmail.com"},{name:"Ian Carpenter",address:"1754 Ureate, RhodSA5 5BO",mobile:"+91 1234567890",email:"iacrpt65@gmail.com"},{name:"Belle J. Richter",address:"1300 Mine RoadQuemado, NM 87829",mobile:"305-829-7809",email:"belljrc23@gmail.com"}]}selectAddress(m){this.dialogRef.close(m)}static#t=this.\u0275fac=function(f){return new(f||u)};static#e=this.\u0275cmp=o.VBU({type:u,selectors:[["app-address-dialog"]],decls:21,vars:2,consts:[["input",""],[1,"address-modal"],[1,"p-20","flex","align-item-center","justify-content-between","border-bottom"],[1,"f-16","f-w-600"],["mat-button","","mat-dialog-close","",1,"bg-primary-50","text-primary-500"],[1,"flex","align-item-center"],[1,"ti","ti-plus","m-r-5"],[1,"p-20"],["appearance","outline",1,"w-100","input-group"],["matInput","","placeholder","\u0627\u0628\u062d\u062b...."],[3,"customStyle"],[1,"p-x-20","p-b-20","border-bottom"],[1,"border","border-8","p-10","m-b-15"],[1,"dialog-footer"],["mat-button","","color","warn","mat-dialog-close","",1,"m-r-10"],["mat-flat-button","","color","primary","mat-dialog-close",""],[1,"border","border-8","p-10","m-b-15",3,"click"],[1,"f-w-600"],[1,"address-details"],[1,"m-b-0","m-r-5"],[1,"m-b-0"]],template:function(f,O){1&f&&(o.j41(0,"div",1)(1,"div",2)(2,"div",3),o.EFF(3,"\u0627\u062e\u062a\u0631 \u0627\u0644\u0639\u0646\u0648\u0627\u0646"),o.k0s(),o.j41(4,"button",4)(5,"div",5),o.nrm(6,"i",6),o.EFF(7," \u0625\u0636\u0627\u0641\u0629 \u062c\u062f\u064a\u062f "),o.k0s()()(),o.j41(8,"div",7)(9,"mat-form-field",8),o.nrm(10,"input",9,0),o.k0s()(),o.j41(12,"app-scrollbar",10)(13,"div",11),o.Z7z(14,a,10,4,"div",12,o.fX1),o.k0s()(),o.j41(16,"div",13)(17,"button",14),o.EFF(18,"\u0625\u0644\u063a\u0627\u0621"),o.k0s(),o.j41(19,"button",15),o.EFF(20,"\u0625\u0636\u0627\u0641\u0629"),o.k0s()()()),2&f&&(o.R7$(12),o.Y8G("customStyle",o.lJ4(1,i)),o.R7$(2),o.Dyx(O.addresses))},dependencies:[g.G,t.$z,e.fg,r.j,_.a,p.MD,h.o],styles:[".address-details[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row}@media (max-width: 576px){.address-details[_ngcontent-%COMP%]{display:block}}.dialog-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;flex:0 0 auto;padding:20px}  .input-group .mat-mdc-form-field-subscript-wrapper{display:none!important}"]})}return u})()},3342:(P,M,s)=>{s.d(M,{f:()=>h});var p=s(8728),b=s(3664),_=s(3791);let h=(()=>{class g{constructor(){this.matSelect=(0,p.WQX)(_.g),this.document=(0,p.WQX)(p.qQL),this.host=(0,p.WQX)(b.aKT)}handleKeydown(t){this.document.activeElement===this.host.nativeElement&&this.matSelect.focused&&!this.matSelect.panelOpen&&1===t.key.length&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&this.matSelect.open()}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275dir=b.FsC({type:g,selectors:[["mat-select","appOpenSelectOnType",""]],hostBindings:function(e,r){1&e&&b.bIt("keydown",function(a){return r.handleKeydown(a)})}})}return g})()},5862:(P,M,s)=>{s.d(M,{be:()=>t,qB:()=>e,rY:()=>o});var p=s(9330),b=s(8728),_=s(6354),h=s(2525),g=s(6848),o=function(r){return r[r.Unknown=0]="Unknown",r[r.Foreign=1]="Foreign",r[r.Arab=2]="Arab",r[r.Egyptian=3]="Egyptian",r}(o||{});function t(r){switch(r??o.Unknown){case o.Foreign:return"Foreign";case o.Arab:return"Arab";case o.Egyptian:return"Egyptian";default:return"Unknown"}}let e=(()=>{class r{constructor(){this.http=(0,b.WQX)(p.Qq)}create(a){return this.http.post(`${h.c.apiUrl}/api/Subscribe/CreateSubscribe`,a)}update(a){return this.http.post(`${h.c.apiUrl}/api/Subscribe/Update`,a)}delete(a){const n=(new p.Nl).set("id",a.toString());return this.http.get(`${h.c.apiUrl}/api/Subscribe/Delete`,{params:n})}getAll(a){let n=new p.Nl;void 0!==a.skipCount&&(n=n.set("SkipCount",a.skipCount.toString())),void 0!==a.maxResultCount&&(n=n.set("MaxResultCount",a.maxResultCount.toString()));const u=a.searchWord??a.searchTerm;return a.searchTerm&&(n=n.set("SearchTerm",a.searchTerm)),u&&(n=n.set("SearchWord",u)),a.filter&&(n=n.set("Filter",a.filter)),a.lang&&(n=n.set("Lang",a.lang)),a.sortingDirection&&(n=n.set("SortingDirection",a.sortingDirection)),a.sortBy&&(n=n.set("SortBy",a.sortBy)),this.http.get(`${h.c.apiUrl}/api/Subscribe/GetResultsByFilter`,{params:n}).pipe((0,_.T)(c=>(0,g._)(c,{skipCount:a.skipCount})))}createType(a){return this.http.post(`${h.c.apiUrl}/api/Subscribe/CreateSubscribeType`,a)}updateType(a){return this.http.post(`${h.c.apiUrl}/api/Subscribe/UpdateType`,a)}deleteType(a){const n=(new p.Nl).set("id",a.toString());return this.http.get(`${h.c.apiUrl}/api/Subscribe/DeleteType`,{params:n})}getAllTypes(a){const n={},u=(c,m)=>{null!=m&&(n[c]=m)};return u("skipCount",a.skipCount),u("maxResultCount",a.maxResultCount),u("searchTerm",a.searchTerm),u("searchWord",a.searchWord??a.searchTerm),u("filter",a.filter),u("lang",a.lang),u("sortingDirection",a.sortingDirection),u("sortBy",a.sortBy),u("studentId",a.studentId),u("residentId",a.residentId),this.http.post(`${h.c.apiUrl}/api/Subscribe/GetTypeResultsByFilter`,n).pipe((0,_.T)(c=>(0,g._)(c,{skipCount:a.skipCount})))}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275prov=b.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},5972:(P,M,s)=>{s.d(M,{Ep:()=>b,Lv:()=>o,lX:()=>g});var p=function(t){return t[t.\u0627\u0644\u0633\u0628\u062a=1]="\u0627\u0644\u0633\u0628\u062a",t[t.\u0627\u0644\u0627\u062d\u062f=2]="\u0627\u0644\u0627\u062d\u062f",t[t.\u0627\u0644\u0627\u062b\u0646\u064a\u0646=3]="\u0627\u0644\u0627\u062b\u0646\u064a\u0646",t[t.\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621=4]="\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621",t[t.\u0627\u0644\u0627\u0631\u0628\u0639\u0627\u0621=5]="\u0627\u0644\u0627\u0631\u0628\u0639\u0627\u0621",t[t.\u0627\u0644\u062e\u0645\u064a\u0633=6]="\u0627\u0644\u062e\u0645\u064a\u0633",t[t.\u0627\u0644\u062c\u0645\u0639\u0629=7]="\u0627\u0644\u062c\u0645\u0639\u0629",t}(p||{});const b=[{label:"\u0627\u0644\u0633\u0628\u062a",value:p.\u0627\u0644\u0633\u0628\u062a},{label:"\u0627\u0644\u0627\u062d\u062f",value:p.\u0627\u0644\u0627\u062d\u062f},{label:"\u0627\u0644\u0627\u062b\u0646\u064a\u0646",value:p.\u0627\u0644\u0627\u062b\u0646\u064a\u0646},{label:"\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621",value:p.\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621},{label:"\u0627\u0644\u0627\u0631\u0628\u0639\u0627\u0621",value:p.\u0627\u0644\u0627\u0631\u0628\u0639\u0627\u0621},{label:"\u0627\u0644\u062e\u0645\u064a\u0633",value:p.\u0627\u0644\u062e\u0645\u064a\u0633},{label:"\u0627\u0644\u062c\u0645\u0639\u0629",value:p.\u0627\u0644\u062c\u0645\u0639\u0629}],_=new Map(b.map(t=>[t.value,t.label])),h={saturday:p.\u0627\u0644\u0633\u0628\u062a,sunday:p.\u0627\u0644\u0627\u062d\u062f,monday:p.\u0627\u0644\u0627\u062b\u0646\u064a\u0646,tuesday:p.\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621,wednesday:p.\u0627\u0644\u0627\u0631\u0628\u0639\u0627\u0621,thursday:p.\u0627\u0644\u062e\u0645\u064a\u0633,friday:p.\u0627\u0644\u062c\u0645\u0639\u0629};function g(t){if(null==t)return;if("object"==typeof t){const n=["value","id","day","key"];for(const c of n){const m=t[c];if("number"==typeof m||"string"==typeof m){const f=g(m);if(void 0!==f)return f}}const u=["label","name","displayName","dayName"];for(const c of u){const m=t[c];if("string"==typeof m){const f=g(m);if(void 0!==f)return f}}return}if("number"==typeof t)return _.has(t)?t:void 0;const e=`${t}`.trim();if(!e)return;const r=Number(e);return!Number.isNaN(r)&&_.has(r)?r:h[e.toLowerCase()]||b.find(n=>n.label.toLowerCase()===e.toLowerCase())?.value}function o(t){if("object"==typeof t&&null!==t){const r=["label","name","displayName","dayName"];for(const a of r){const n=t[a];if("string"==typeof n){const u=n.trim();if(u)return u}}const i=g(t);return void 0!==i?_.get(i)??"":""}const e=g(t??void 0);return void 0!==e?_.get(e)??"":"string"==typeof t?t:""}},8863:(P,M,s)=>{s.d(M,{m:()=>h});var b=s(3664),_=s(3791);let h=(()=>{class g{constructor(t){this.matSelect=t}ngOnInit(){this.matSelect.compareWith=(t,e)=>function p(g,o){if(null==g&&null==o)return!0;if(null==g||null==o)return!1;const t=i=>{if(null==i)return i;if("object"==typeof i){const a=i.id??i.value??i.key??i._id;return void 0===a?i:t(a)}return"number"==typeof i||"string"==typeof i?String(i).trim():i};return t(g)===t(o)}(t,e)}static#t=this.\u0275fac=function(e){return new(e||g)(b.rXU(_.g))};static#e=this.\u0275dir=b.FsC({type:g,selectors:[["mat-select",3,"compareWith",""]]})}return g})()}}]);