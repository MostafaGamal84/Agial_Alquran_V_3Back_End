"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[3395],{2754:(b,h,r)=>{r.d(h,{a:()=>a,w:()=>u});const u=[{value:"all",translationKey:"\u0643\u0644 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0627\u0642\u0627\u0645\u0629"},{value:"egyptian",translationKey:"\u0645\u0635\u0631\u064a\u064a\u0646"},{value:"arab",translationKey:"\u0639\u0631\u0628"},{value:"foreign",translationKey:"\u0627\u062c\u0627\u0646\u0628"}];function a(g){return!(!g||"all"===g)}},4762:(b,h,r)=>{r.r(h),r.d(h,{SubscribeTypeFormComponent:()=>T});var u=r(8728),a=r(9417),g=r(3243),_=r(8132),I=r(6053),p=r(5862),E=r(7509),t=r(3664),y=r(2200),m=r(8834),R=r(3746),e=r(4507),l=r(3791),i=r(5079),v=r(6735),M=r(8863),f=r(8018);function C(o,s){1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Hour price is required")," "))}function O(o,s){1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Hour price must be zero or greater")," "))}function P(o,s){if(1&o&&(t.j41(0,"mat-option",11),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const n=s.$implicit;t.Y8G("value",n.value),t.R7$(),t.SpI(" ",t.bMT(2,2,n.label)," ")}}let T=(()=>{class o{constructor(){this.fb=(0,u.WQX)(a.ok),this.service=(0,u.WQX)(p.qB),this.router=(0,u.WQX)(g.Ix),this.toast=(0,u.WQX)(E.f),this.form=this.fb.group({id:[0],name:["",a.k0.required],hourPrice:[null,[a.k0.required,a.k0.min(0)]],group:[null,a.k0.required]}),this.isEdit=!1,this.groupOptions=[{value:p.rY.Unknown,label:"Unknown"},{value:p.rY.Foreign,label:"\u0627\u062c\u0627\u0646\u0628"},{value:p.rY.Arab,label:"\u0639\u0631\u0628"},{value:p.rY.Egyptian,label:"\u0645\u0635\u0631\u064a\u064a\u0646"}]}ngOnInit(){const n=history.state?.item;n&&(this.isEdit=!0,this.form.patchValue({id:n.id,name:n.name??"",hourPrice:n.hourPrice??null,group:n.group??null}))}submit(){if(this.form.invalid)return void this.form.markAllAsTouched();const n=this.form.value;this.isEdit?this.service.updateType(n).subscribe({next:()=>{this.toast.success("Subscribe type saved successfully"),this.router.navigate(["/online-course/setting/subscribe-type/list"])},error:()=>this.toast.error("Error saving subscribe type")}):this.service.createType(n).subscribe({next:()=>{this.toast.success("Subscribe type saved successfully"),this.router.navigate(["/online-course/setting/subscribe-type/list"])},error:()=>this.toast.error("Error saving subscribe type")})}static#t=this.\u0275fac=function(d){return new(d||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-subscribe-type-form"]],decls:28,vars:19,consts:[[3,"cardTitle"],[1,"row","g-3",3,"ngSubmit","formGroup"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["matInput","","type","number","formControlName","hourPrice"],[4,"ngIf"],["formControlName","group"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12"],["mat-flat-button","","color","primary","type","submit"],[3,"value"]],template:function(d,c){if(1&d&&(t.j41(0,"app-card",0),t.nI1(1,"translate"),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return c.submit()}),t.j41(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.nrm(8,"input",4),t.k0s()(),t.j41(9,"div",2)(10,"mat-form-field",3)(11,"mat-label"),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.nrm(14,"input",5),t.DNE(15,C,3,3,"mat-error",6)(16,O,3,3,"mat-error",6),t.k0s()(),t.j41(17,"div",2)(18,"mat-form-field",3)(19,"mat-label"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"mat-select",7),t.DNE(23,P,3,4,"mat-option",8),t.k0s()()(),t.j41(24,"div",9)(25,"button",10),t.EFF(26),t.nI1(27,"translate"),t.k0s()()()()),2&d){let D,U;t.Y8G("cardTitle",t.bMT(1,9,c.isEdit?"Edit Subscribe Type":"Add Subscribe Type")),t.R7$(2),t.Y8G("formGroup",c.form),t.R7$(4),t.JRh(t.bMT(7,11,"Name")),t.R7$(6),t.JRh(t.bMT(13,13,"Hour Price")),t.R7$(3),t.Y8G("ngIf",null==(D=c.form.get("hourPrice"))?null:D.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(U=c.form.get("hourPrice"))?null:U.hasError("min")),t.R7$(4),t.JRh(t.bMT(21,15,"Audience Category")),t.R7$(3),t.Y8G("ngForOf",c.groupOptions),t.R7$(3),t.JRh(t.bMT(27,17,"Save"))}},dependencies:[I.G,y.Sq,y.bT,m.$z,R.fg,e.j,e.M,e.b,l.g,i.M,a.qT,a.me,a.Q0,a.BC,a.cb,a.j4,a.JD,v.i,M.m,f.D9,_.iI],encapsulation:2})}return o})()},6848:(b,h,r)=>{r.d(h,{_:()=>t,s:()=>y});var u=r(9330),a=r(8728),g=r(6354),_=r(2525),I=r(5366),p=r(8937),E=r(2754);function t(m,R={}){const e=m.data,l=Array.isArray(e)?e:null,i=e&&!Array.isArray(e)?e:{totalCount:l?.length??0,items:l??[]},v=i.items,M=Array.isArray(v)?v:l??[],f=c=>{const D=Number(c);return Number.isFinite(D)?D:void 0},O=[R.skipCount,i.skipCount].map(f).filter(c=>void 0!==c),o=Math.max(0,Math.trunc(O.length>0?O[0]:0))+M.length,n=[i.totalCount,i.total,i.count,i.totalItems,i.totalRecords,m.totalCount,m.total,m.count].map(f).find(c=>void 0!==c),d=void 0!==n?Math.max(Math.trunc(n),o):o;return{...m,data:{...i,items:M,totalCount:d}}}let y=(()=>{class m{constructor(){this.http=(0,a.WQX)(u.Qq),this.auth=(0,a.WQX)(I.k)}getUsersForSelects(e,l,i=0,v=0,M=0,f,C=!1){const P=this.auth.getRole()===p.m.Admin?0:M,T=this.resolveLookupMode(e),o=!T;let s=(new u.Nl).set("UserTypeId",l.toString()).set("managerId",i.toString()).set("teacherId",v.toString()).set("branchId",P.toString());o&&void 0!==e.skipCount&&(s=s.set("SkipCount",e.skipCount.toString())),o&&void 0!==e.maxResultCount&&(s=s.set("MaxResultCount",e.maxResultCount.toString()));const n=e.searchWord??e.searchTerm;e.searchTerm&&(s=s.set("SearchTerm",e.searchTerm)),n&&(s=s.set("SearchWord",n));const d=[];return e.filter&&d.push(e.filter),T&&d.push(`${T}=true`),d.length&&(s=s.set("Filter",d.join("&"))),e.lang&&(s=s.set("Lang",e.lang)),e.sortingDirection&&(s=s.set("SortingDirection",e.sortingDirection)),e.sortBy&&(s=s.set("SortBy",e.sortBy)),f&&f>0&&(s=s.set("residentId",f.toString())),(0,E.a)(e.residentGroup)&&(s=s.set("residentGroup",e.residentGroup)),C&&(s=s.set("includeRelations","true")),this.http.get(`${_.c.apiUrl}/api/UsersForGroups/GetUsersForSelects`,{params:s}).pipe((0,g.T)(c=>t(c,{skipCount:e.skipCount})))}getUserDetails(e){const l=(new u.Nl).set("id",e.toString());return this.http.get(`${_.c.apiUrl}/api/UsersForGroups/GetUserDetails`,{params:l})}resolveLookupMode(e){return e.lookupOnly?"lookupOnly":e.lookup?"lookup":e.idsOnly?"idsOnly":null}getAllNationalities(){return this.http.get(`${_.c.apiUrl}/api/LookUp/GetAllNationality`)}getAllGovernorates(){return this.http.get(`${_.c.apiUrl}/api/LookUp/GetAllGovernorate`)}getSubscribesByTypeId(e,l){let i=new u.Nl;return null!=e&&(i=i.set("id",e.toString())),null!=l&&l>0&&(i=i.set("studentId",l.toString())),this.http.get(`${_.c.apiUrl}/api/LookUp/GetAllSubscribesByTypeId`,{params:i})}static#t=this.\u0275fac=function(l){return new(l||m)};static#e=this.\u0275prov=a.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},7509:(b,h,r)=>{r.d(h,{f:()=>g});var u=r(8728),a=r(5416);let g=(()=>{class _{constructor(){this.snackBar=(0,u.WQX)(a.UG)}success(p,E="Close",t=3e3){this.snackBar.open(p,E,{duration:t,panelClass:["toast-success"]})}error(p,E="Close",t=3e3){this.snackBar.open(p,E,{duration:t,panelClass:["toast-error"]})}static#t=this.\u0275fac=function(E){return new(E||_)};static#e=this.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);