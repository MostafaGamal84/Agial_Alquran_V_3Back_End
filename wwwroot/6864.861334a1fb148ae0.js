"use strict";(self.webpackChunkable_pro=self.webpackChunkable_pro||[]).push([[6864],{6864:(re,E,l)=>{l.r(E),l.d(E,{ReportAddComponent:()=>te,ReportWhatsAppDialogComponent:()=>A});var p=l(8728),C=l(2200),d=l(9417),O=l(1413),g=l(6977),M=l(3243),I=l(8132),P=l(2510),b=l(357),F=l(8834),R=l(2487),w=l(2986),y=l(6848),S=l(5366),T=l(7509),N=l(8018),f=l(8937),h=l(1557),x=l(6001),e=l(3664);function D(a,c){1&a&&(e.j41(0,"div",24),e.EFF(1," \u0648\u0636\u0639 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 "),e.k0s())}function $(a,c){if(1&a&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&a){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.errorText("managerId")," ")}}function L(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0627\u0644\u0645\u0634\u0631\u0641"),e.k0s(),e.nrm(3,"ng-select",25),e.DNE(4,$,2,1,"div",18),e.k0s()),2&a){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.managers)("loading",t.isLoadingManagers)("searchable",!0)("clearable",!0)("trackByFn",t.trackById)("disabled",t.lockManagerSelection),e.R7$(),e.Y8G("ngIf",t.isInvalid("managerId"))}}function V(a,c){if(1&a&&(e.qex(0),e.DNE(1,L,5,7,"div",19),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.showSupervisorSelector)}}function j(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0627\u0644\u0645\u0634\u0631\u0641"),e.k0s(),e.j41(3,"p",27),e.EFF(4),e.k0s()()),2&a){const t=e.XpG();e.R7$(4),e.JRh(t.managerDisplayName||"-")}}function B(a,c){if(1&a&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&a){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.errorText("teacherId")," ")}}function W(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0627\u0644\u0645\u0639\u0644\u0645"),e.k0s(),e.nrm(3,"ng-select",28),e.DNE(4,B,2,1,"div",18),e.k0s()),2&a){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.teachers)("loading",t.isLoadingTeachers)("searchable",!0)("clearable",!0)("trackByFn",t.trackById)("disabled",t.lockTeacherSelection),e.R7$(),e.Y8G("ngIf",t.isInvalid("teacherId"))}}function U(a,c){if(1&a&&(e.qex(0),e.DNE(1,W,5,7,"div",19),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.showTeacherSelector)}}function G(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0627\u0644\u0645\u0639\u0644\u0645"),e.k0s(),e.j41(3,"p",27),e.EFF(4),e.k0s()()),2&a){const t=e.XpG();e.R7$(4),e.JRh(t.teacherDisplayName||"-")}}function X(a,c){if(1&a&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.errorText("circleId")," ")}}function Q(a,c){if(1&a&&(e.qex(0),e.j41(1,"div",13)(2,"label",14),e.EFF(3,"\u0627\u0644\u062d\u0644\u0642\u0629"),e.k0s(),e.nrm(4,"ng-select",29),e.DNE(5,X,2,1,"div",18),e.k0s(),e.bVm()),2&a){let t;const n=e.XpG();e.R7$(4),e.Y8G("items",n.circles)("loading",n.isLoadingCircles)("searchable",!0)("clearable",!0)("trackByFn",n.trackById)("disabled",!(null!=(t=n.reportForm.get("teacherId"))&&t.value)),e.R7$(),e.Y8G("ngIf",n.isInvalid("circleId"))}}function Y(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0627\u0644\u062d\u0644\u0642\u0629"),e.k0s(),e.j41(3,"p",27),e.EFF(4),e.k0s()()),2&a){const t=e.XpG();e.R7$(4),e.JRh(t.circleDisplayName||"-")}}function K(a,c){if(1&a&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.errorText("studentId")," ")}}function z(a,c){if(1&a&&(e.qex(0),e.j41(1,"div",13)(2,"label",14),e.EFF(3,"\u0627\u0644\u0637\u0627\u0644\u0628"),e.k0s(),e.nrm(4,"ng-select",30),e.DNE(5,K,2,1,"div",18),e.k0s(),e.bVm()),2&a){let t;const n=e.XpG();e.R7$(4),e.Y8G("items",n.students)("loading",n.isLoadingStudents)("searchable",!0)("clearable",!0)("trackByFn",n.trackById)("disabled",!(null!=(t=n.reportForm.get("circleId"))&&t.value)),e.R7$(),e.Y8G("ngIf",n.isInvalid("studentId"))}}function J(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0627\u0644\u0637\u0627\u0644\u0628"),e.k0s(),e.j41(3,"p",27),e.EFF(4),e.k0s()()),2&a){const t=e.XpG();e.R7$(4),e.JRh(t.studentDisplayName||"-")}}function H(a,c){if(1&a&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorText("attendStatueId")," ")}}function Z(a,c){if(1&a&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.errorText("minutes")," ")}}function q(a,c){if(1&a&&(e.j41(0,"div",13)(1,"label",14),e.EFF(2,"\u0639\u062f\u062f \u0627\u0644\u062f\u0642\u0627\u0626\u0642"),e.k0s(),e.nrm(3,"input",31),e.DNE(4,Z,2,1,"div",18),e.k0s()),2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.isInvalid("minutes"))}}function ee(a,c){if(1&a&&(e.qex(0),e.j41(1,"div",13)(2,"label",14),e.EFF(3,"\u0627\u0644\u0633\u0648\u0631\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629"),e.k0s(),e.nrm(4,"ng-select",32),e.k0s(),e.j41(5,"div",13)(6,"label",14),e.EFF(7,"\u0645\u0646"),e.k0s(),e.nrm(8,"input",33),e.k0s(),e.j41(9,"div",13)(10,"label",14),e.EFF(11,"\u0625\u0644\u0649"),e.k0s(),e.nrm(12,"input",34),e.k0s(),e.j41(13,"div",13)(14,"label",14),e.EFF(15,"\u062a\u0642\u062f\u064a\u0631 \u0627\u0644\u062f\u0631\u0633 \u0627\u0644\u062c\u062f\u064a\u062f"),e.k0s(),e.nrm(16,"input",35),e.k0s(),e.j41(17,"div",13)(18,"label",14),e.EFF(19,"\u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0642\u0631\u064a\u0628\u0629"),e.k0s(),e.nrm(20,"input",36),e.k0s(),e.j41(21,"div",13)(22,"label",14),e.EFF(23,"\u062a\u0642\u062f\u064a\u0631 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0642\u0631\u064a\u0628\u0629"),e.k0s(),e.nrm(24,"input",37),e.k0s(),e.j41(25,"div",13)(26,"label",14),e.EFF(27,"\u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0628\u0639\u064a\u062f\u0629"),e.k0s(),e.nrm(28,"input",38),e.k0s(),e.j41(29,"div",13)(30,"label",14),e.EFF(31,"\u062a\u0642\u062f\u064a\u0631 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0628\u0639\u064a\u062f\u0629"),e.k0s(),e.nrm(32,"input",39),e.k0s(),e.j41(33,"div",13)(34,"label",14),e.EFF(35,"\u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0623\u0628\u0639\u062f"),e.k0s(),e.nrm(36,"input",40),e.k0s(),e.j41(37,"div",13)(38,"label",14),e.EFF(39,"\u062a\u0642\u062f\u064a\u0631 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0623\u0628\u0639\u062f"),e.k0s(),e.nrm(40,"input",41),e.k0s(),e.j41(41,"div",13)(42,"label",14),e.EFF(43,"\u0643\u0644\u0645\u0627\u062a \u063a\u0631\u064a\u0628 \u0627\u0644\u0642\u0631\u0622\u0646"),e.k0s(),e.nrm(44,"input",42),e.k0s(),e.j41(45,"div",13)(46,"label",14),e.EFF(47,"\u0627\u0644\u062a\u062c\u0648\u064a\u062f"),e.k0s(),e.nrm(48,"input",43),e.k0s(),e.j41(49,"div",44)(50,"label",14),e.EFF(51,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0623\u062e\u0631\u0649"),e.k0s(),e.nrm(52,"textarea",45),e.k0s(),e.bVm()),2&a){const t=e.XpG();e.R7$(4),e.Y8G("items",t.surahList)("searchable",!0)("clearable",!0)}}let te=(()=>{class a{constructor(){this.fb=(0,p.WQX)(d.ok),this.service=(0,p.WQX)(R.o),this.circleService=(0,p.WQX)(w.K),this.lookupService=(0,p.WQX)(y.s),this.auth=(0,p.WQX)(S.k),this.toast=(0,p.WQX)(T.f),this.translate=(0,p.WQX)(N.c$),this.route=(0,p.WQX)(M.nX),this.router=(0,p.WQX)(M.Ix),this.dialog=(0,p.WQX)(b.h),this.destroy$=new O.B,this.AttendStatusEnum=h.E,this.UserTypesEnum=f.m,this.selectedStatus=null,this.managers=[],this.teachers=[],this.students=[],this.circles=[],this.attendStatusOptions=[{label:"\u062d\u0636\u0631",value:h.E.Attended},{label:"\u062a\u063a\u064a\u0628 \u0628\u0639\u0630\u0631",value:h.E.ExcusedAbsence},{label:"\u062a\u063a\u064a\u0628 \u0628\u062f\u0648\u0646 \u0639\u0630\u0631",value:h.E.UnexcusedAbsence}],this.surahList=Object.keys(x.Y).filter(t=>isNaN(Number(t))).map(t=>({id:x.Y[t],name:t})),this.isLoadingManagers=!1,this.isLoadingTeachers=!1,this.isLoadingCircles=!1,this.isLoadingStudents=!1,this.isSubmitting=!1,this.mode="add",this.reportId=null,this.readonlyLabels={manager:"",teacher:"",circle:"",student:""},this.lockManagerSelection=!1,this.lockTeacherSelection=!1,this.userFilter={lookupOnly:!0},this.trackById=(t,n)=>n?.id}get currentUser(){const t=this.auth.currentUserValue;return t?.user??t??null}get userTypeNumber(){const t=this.auth.currentUserValue?.user?.userTypeId??this.auth.currentUserValue?.userTypeId??this.currentUser?.userTypeId??this.auth.getRole?.(),n=Number(t);return Number.isFinite(n)?n:0}get isSystemManager(){return this.userTypeNumber===Number(f.m.Admin)}get isBranchManager(){return this.userTypeNumber===Number(f.m.BranchLeader)}get isSupervisor(){return this.userTypeNumber===Number(f.m.Manager)}get isTeacher(){return this.userTypeNumber===Number(f.m.Teacher)}get showSupervisorSelector(){return this.isSystemManager||this.isBranchManager}get showTeacherSelector(){return this.isSystemManager||this.isBranchManager||this.isSupervisor}getUserId(){const n=Number(this.auth.currentUserValue?.user?.id??this.auth.currentUserValue?.id??this.currentUser?.id??null);return Number.isFinite(n)?n:null}ngOnInit(){this.mode="update"===this.route.snapshot.data?.mode?"update":"add";const t=Number(this.route.snapshot.paramMap.get("id"));this.reportId=Number.isFinite(t)?t:null,this.buildForm(),this.applyRoleBasedValidators(),this.wireFormReactions(),this.initRoleFlow(),"update"===this.mode&&this.reportId&&(this.tryPatchFromState(this.reportId)||this.loadReportForEdit(this.reportId))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}buildForm(){this.reportForm=this.fb.group({managerId:[null],teacherId:[null],circleId:[null,d.k0.required],studentId:[null,d.k0.required],attendStatueId:[null,d.k0.required],minutes:[null],newId:[null],newFrom:[""],newTo:[""],newRate:[""],recentPast:[""],recentPastRate:[""],distantPast:[""],distantPastRate:[""],farthestPast:[""],farthestPastRate:[""],theWordsQuranStranger:[""],intonation:[""],other:[""],creationTime:[""]})}applyRoleBasedValidators(){const t=this.reportForm.get("managerId"),n=this.reportForm.get("teacherId");t?.clearValidators(),n?.clearValidators(),this.isSystemManager||this.isBranchManager||this.isSupervisor?(t?.setValidators([d.k0.required]),n?.setValidators([d.k0.required])):this.isTeacher&&n?.setValidators([d.k0.required]),t?.updateValueAndValidity({emitEvent:!1}),n?.updateValueAndValidity({emitEvent:!1})}wireFormReactions(){this.reportForm.get("managerId").valueChanges.pipe((0,g.Q)(this.destroy$)).subscribe(t=>{this.setValueSilent("teacherId",null),this.setValueSilent("circleId",null),this.setValueSilent("studentId",null),this.teachers=[],this.circles=[],this.students=[],t&&this.loadTeachersForManager(Number(t))}),this.reportForm.get("teacherId").valueChanges.pipe((0,g.Q)(this.destroy$)).subscribe(t=>{this.setValueSilent("circleId",null),this.setValueSilent("studentId",null),this.circles=[],this.students=[],t&&this.loadCirclesForTeacher(Number(t))}),this.reportForm.get("circleId").valueChanges.pipe((0,g.Q)(this.destroy$)).subscribe(t=>{this.setValueSilent("studentId",null),this.students=[],t&&this.loadStudentsForCircle(Number(t))}),this.reportForm.get("attendStatueId").valueChanges.pipe((0,g.Q)(this.destroy$)).subscribe(t=>this.applyStatusRules(t))}initRoleFlow(){const t=this.getUserId();return this.isTeacher?(this.lockManagerSelection=!0,this.lockTeacherSelection=!0,this.reportForm.get("teacherId")?.enable({emitEvent:!1}),this.reportForm.get("teacherId")?.setValue(t,{emitEvent:!1}),this.reportForm.get("teacherId")?.disable({emitEvent:!1}),this.reportForm.get("managerId")?.setValue(null,{emitEvent:!1}),this.reportForm.get("managerId")?.disable({emitEvent:!1}),void(t&&this.loadCirclesForTeacher(Number(t)))):this.isSupervisor?(this.lockManagerSelection=!0,this.reportForm.get("managerId")?.enable({emitEvent:!1}),this.reportForm.get("managerId")?.setValue(t,{emitEvent:!1}),this.reportForm.get("managerId")?.disable({emitEvent:!1}),void(t&&this.loadTeachersForManager(Number(t)))):void this.loadManagers()}loadManagers(){this.isLoadingManagers=!0,this.lookupService.getUsersForSelects(this.userFilter,Number(f.m.Manager),0,0,0).pipe((0,g.Q)(this.destroy$)).subscribe({next:t=>{this.managers=(t.isSuccess?t.data.items:[]).map(r=>({id:Number(r.id),fullName:r.fullName,displayName:r.fullName||r.email||`\u0627\u0644\u0645\u0634\u0631\u0641 #${r.id}`})),this.isLoadingManagers=!1},error:()=>{this.managers=[],this.isLoadingManagers=!1}})}loadTeachersForManager(t,n){this.isLoadingTeachers=!0,this.lookupService.getUsersForSelects(this.userFilter,Number(f.m.Teacher),t,0,0).pipe((0,g.Q)(this.destroy$)).subscribe({next:r=>{if(this.teachers=(r.isSuccess?r.data.items:[]).map(o=>({id:Number(o.id),fullName:o.fullName,displayName:o.fullName||o.email||`Teacher #${o.id}`})),this.isLoadingTeachers=!1,n?.preselectTeacherId&&this.teachers.some(u=>u.id===n.preselectTeacherId))return this.reportForm.get("teacherId")?.setValue(n.preselectTeacherId,{emitEvent:!1}),void(n.preselectCircleId&&this.loadCirclesForTeacher(n.preselectTeacherId,{preselectCircleId:n.preselectCircleId,preselectStudentId:n.preselectStudentId}));1===this.teachers.length&&this.reportForm.get("teacherId")?.setValue(this.teachers[0].id,{emitEvent:!0})},error:()=>{this.teachers=[],this.isLoadingTeachers=!1}})}loadCirclesForTeacher(t,n){this.isLoadingCircles=!0,this.circleService.getAll(this.userFilter,void 0,t).pipe((0,g.Q)(this.destroy$)).subscribe({next:r=>{this.circles=(r.isSuccess?r.data.items:[]).map(u=>({id:Number(u.id),name:u.name||u.title||`Circle #${u.id}`}));const o=this.circles?.[0]?.id??null;if(n?.preselectCircleId){const i=this.circles.some(m=>m.id===n.preselectCircleId)?n.preselectCircleId:o;this.reportForm.get("circleId")?.setValue(i,{emitEvent:!1}),i&&this.loadStudentsForCircle(Number(i),n.preselectStudentId??null)}else this.reportForm.get("circleId")?.setValue(o,{emitEvent:!0});this.isLoadingCircles=!1},error:()=>{this.circles=[],this.isLoadingCircles=!1,this.setValueSilent("circleId",null)}})}loadStudentsForCircle(t,n=null){this.isLoadingStudents=!0,this.circleService.get(t).pipe((0,g.Q)(this.destroy$)).subscribe({next:r=>{const o=(r.isSuccess&&r.data?.students?r.data.students:[]).map(i=>{const m=Number(i.studentId??i.id),_=i?.student?.fullName||i?.fullName||i?.name||(m?`Student #${m}`:null);return m&&_?{id:m,name:_,mobile:i?.student?.mobile??i?.mobile??i?.phone??null}:null}).filter(Boolean),u=new Map;o.forEach(i=>u.set(i.id,i)),this.students=Array.from(u.values()),this.isLoadingStudents=!1,n&&this.students.some(i=>i.id===n)?this.reportForm.get("studentId")?.setValue(n,{emitEvent:!1}):1===this.students.length&&this.reportForm.get("studentId")?.setValue(this.students[0].id,{emitEvent:!1})},error:()=>{this.students=[],this.isLoadingStudents=!1}})}evaluationFields(){return["newId","newFrom","newTo","newRate","recentPast","recentPastRate","distantPast","distantPastRate","farthestPast","farthestPastRate","theWordsQuranStranger","intonation","other"]}applyStatusRules(t,n){const r=Number(t);this.selectedStatus=r===h.E.Attended||r===h.E.ExcusedAbsence||r===h.E.UnexcusedAbsence?r:null;for(const o of this.evaluationFields()){const u=this.reportForm.get(o);u&&(u.disable({emitEvent:!1}),u.clearValidators(),n?.preserveValues||u.setValue(null,{emitEvent:!1}),u.updateValueAndValidity({emitEvent:!1}))}const s=this.reportForm.get("minutes");if(s?.enable({emitEvent:!1}),s?.clearValidators(),s?.updateValueAndValidity({emitEvent:!1}),this.selectedStatus!==h.E.Attended)this.selectedStatus===h.E.UnexcusedAbsence&&(s?.enable({emitEvent:!1}),s?.setValidators([d.k0.required]),s?.updateValueAndValidity({emitEvent:!1}));else for(const o of this.evaluationFields())this.reportForm.get(o)?.enable({emitEvent:!1})}isInvalid(t){const n=this.reportForm.get(t);return!!n&&n.invalid&&(n.touched||n.dirty)}errorText(t){const n=this.reportForm.get(t);return n?.errors?this.translate.instant(n.errors.required?"\u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628":"\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629"):""}getWhatsAppPayload(t){if("update"===this.mode)return null;const n=Number(t.studentId??0);if(!n)return null;const s=this.students.find(k=>k.id===n)?.name??this.studentDisplayName??this.translate.instant("\u0637\u0627\u0644\u0628"),o=this.attendStatusOptions.find(k=>k.value===Number(t.attendStatueId))?.label??this.translate.instant("\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"),_=`\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0637\u0627\u0644\u0628 ${s}\n\u0627\u0644\u062d\u0644\u0642\u0629: ${this.circleDisplayName||"\u2014"}\n\u0627\u0644\u0645\u0639\u0644\u0645: ${this.teacherDisplayName||"\u2014"}\n\u0627\u0644\u062d\u0627\u0644\u0629: ${o}\n\u0627\u0644\u062f\u0642\u0627\u0626\u0642: ${t.minutes??"\u2014"}`,v=Number(t.attendStatueId)===h.E.Attended?this.buildAttendedDetails(t):"";return{studentName:s,message:v?`${_}\n${v}`:_}}openWhatsAppDialog(t){this.dialog.open(A,{data:t,width:"420px"}).afterClosed().subscribe(r=>{r&&this.launchWhatsApp(t.message)})}launchWhatsApp(t){const n=t?`https://wa.me/?text=${encodeURIComponent(t)}`:"https://wa.me/";window.open(n,"_blank")}buildAttendedDetails(t){const n=[],r=this.surahList.find(s=>s.id===Number(t.newId))?.name;return r&&n.push(`\u0627\u0644\u0633\u0648\u0631\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629: ${r}`),t.newFrom&&n.push(`\u0627\u0644\u062c\u062f\u064a\u062f \u0645\u0646: ${t.newFrom}`),t.newTo&&n.push(`\u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649: ${t.newTo}`),t.newRate&&n.push(`\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u062c\u062f\u064a\u062f: ${t.newRate}`),t.recentPast&&n.push(`\u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0642\u0631\u064a\u0628: ${t.recentPast}`),t.recentPastRate&&n.push(`\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0642\u0631\u064a\u0628: ${t.recentPastRate}`),t.distantPast&&n.push(`\u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0628\u0639\u064a\u062f: ${t.distantPast}`),t.distantPastRate&&n.push(`\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0628\u0639\u064a\u062f: ${t.distantPastRate}`),t.farthestPast&&n.push(`\u0627\u0644\u0623\u0628\u0639\u062f: ${t.farthestPast}`),t.farthestPastRate&&n.push(`\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u0623\u0628\u0639\u062f: ${t.farthestPastRate}`),t.theWordsQuranStranger&&n.push(`\u063a\u0631\u064a\u0628 \u0627\u0644\u0642\u0631\u0622\u0646: ${t.theWordsQuranStranger}`),t.intonation&&n.push(`\u0627\u0644\u062a\u062c\u0648\u064a\u062f: ${t.intonation}`),t.other&&n.push(`\u0645\u0644\u0627\u062d\u0638\u0627\u062a: ${t.other}`),n.join("\n")}onSubmit(){if(this.reportForm.invalid)return void this.reportForm.markAllAsTouched();const t=this.reportForm.getRawValue(),n=this.resolveCreationTime(t.creationTime),r={...t,creationTime:n},s=this.getWhatsAppPayload(r);this.isSubmitting=!0,("update"===this.mode?this.service.update({...r,id:this.reportId??void 0}):this.service.create(r)).pipe((0,g.Q)(this.destroy$)).subscribe({next:u=>{if(this.isSubmitting=!1,u.isSuccess){const i=this.translate.instant("update"===this.mode?"Report updated successfully":"Report created successfully");if(this.toast.success(i),"update"===this.mode)return;s&&this.openWhatsAppDialog(s),this.reportForm.reset({creationTime:""},{emitEvent:!1}),this.applyRoleBasedValidators(),this.initRoleFlow()}else if(u.errors?.length)u.errors.forEach(i=>this.toast.error(i.message));else{const i=this.translate.instant("update"===this.mode?"Unable to update report":"Unable to create report");this.toast.error(i)}},error:()=>{this.isSubmitting=!1;const u=this.translate.instant("update"===this.mode?"Error updating report":"Error creating report");this.toast.error(u)}})}toDate(t){if(!t)return null;const n=t instanceof Date?t:new Date(t);return Number.isNaN(n.getTime())?null:n}toDateTimeLocalString(t){const n=this.toDate(t);if(!n)return"";const r=_=>_.toString().padStart(2,"0");return`${n.getFullYear()}-${r(n.getMonth()+1)}-${r(n.getDate())}T${r(n.getHours())}:${r(n.getMinutes())}`}resolveCreationTime(t){return this.toDate(t)??new Date}get managerDisplayName(){const t=this.reportForm.get("managerId")?.value;return this.managers.find(r=>r.id===t)?.displayName??this.readonlyLabels.manager??""}get teacherDisplayName(){const t=this.reportForm.get("teacherId")?.value;return this.teachers.find(r=>r.id===t)?.displayName??this.readonlyLabels.teacher??""}get circleDisplayName(){const t=this.reportForm.get("circleId")?.value;return this.circles.find(r=>r.id===t)?.name??this.readonlyLabels.circle??""}get studentDisplayName(){const t=this.reportForm.get("studentId")?.value;return this.students.find(r=>r.id===t)?.name??this.readonlyLabels.student??""}get creationTimeMax(){return this.toDateTimeLocalString(new Date)}setValueSilent(t,n){this.reportForm.get(t)?.setValue(n,{emitEvent:!1})}lockEditSelectors(){this.reportForm.get("managerId")?.disable({emitEvent:!1}),this.reportForm.get("teacherId")?.disable({emitEvent:!1}),this.reportForm.get("circleId")?.disable({emitEvent:!1}),this.reportForm.get("studentId")?.disable({emitEvent:!1})}loadReportForEdit(t){this.isSubmitting=!0,this.service.get(t).pipe((0,g.Q)(this.destroy$)).subscribe({next:n=>{if(this.isSubmitting=!1,!n.isSuccess||!n.data)return this.toast.error(this.translate.instant("Unable to load report")),void this.router.navigate(["../"],{relativeTo:this.route});this.patchReport(n.data)},error:()=>{this.isSubmitting=!1,this.toast.error(this.translate.instant("Unable to load report")),this.router.navigate(["../"],{relativeTo:this.route})}})}tryPatchFromState(t){const n=this.router.getCurrentNavigation()?.extras?.state??{},r=(typeof history<"u"?history.state:{})??{},s=n.report??r.report;if(!s||Number(s.id)!==Number(t))return!1;const o={...s,circleId:s.circleId??s.circle?.id??null,studentId:s.studentId??s.student?.id??null,teacherId:s.teacherId??s.teacher?.id??null,attendStatueId:s.attendStatueId??s.attendStatusId??null,creationTime:s.creationTime??null};return this.patchReport(o),!0}patchReport(t){this.captureReadonlyLabels(t);const n=t.managerId??null,r=t.teacherId??null,s=t.circleId??null,o=t.studentId??null;n&&(this.isSystemManager||this.isBranchManager||this.isSupervisor)?(this.reportForm.get("managerId")?.enable({emitEvent:!1}),this.reportForm.get("managerId")?.setValue(n,{emitEvent:!1}),this.loadTeachersForManager(n,{preselectTeacherId:r,preselectCircleId:s,preselectStudentId:o})):r&&(this.isTeacher||this.isSupervisor||this.isSystemManager||this.isBranchManager)&&(this.reportForm.get("teacherId")?.enable({emitEvent:!1}),this.reportForm.get("teacherId")?.setValue(r,{emitEvent:!1}),this.loadCirclesForTeacher(r,{preselectCircleId:s,preselectStudentId:o})),s&&!r&&(this.reportForm.get("circleId")?.setValue(s,{emitEvent:!1}),this.loadStudentsForCircle(s,o)),this.reportForm.patchValue({...t,creationTime:this.toDateTimeLocalString(t.creationTime)},{emitEvent:!1}),null!=t.attendStatueId&&this.applyStatusRules(t.attendStatueId,{preserveValues:!0}),"update"===this.mode&&this.lockEditSelectors()}captureReadonlyLabels(t){const n=r=>r?.fullName??r?.name??r?.title??r?.email??r?.studentName??"";this.readonlyLabels={manager:n(t.manager)??t.managerName??"",teacher:n(t.teacher)??t.teacherName??"",circle:n(t.circle)??t.circleName??"",student:n(t.student)??t.studentName??""}}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-report-add"]],decls:42,vars:21,consts:[["managerReadonly",""],["teacherReadonly",""],["circleReadonly",""],["studentReadonly",""],[1,"page"],[1,"page__header"],[1,"eyebrow"],[1,"title"],[1,"subtitle"],["class","pill",4,"ngIf"],[1,"card",3,"ngSubmit","formGroup"],[1,"grid"],[4,"ngIf","ngIfElse"],[1,"field"],[1,"lbl"],["type","datetime-local","formControlName","creationTime",1,"inp",3,"max"],[1,"hint"],["formControlName","attendStatueId","bindLabel","label","bindValue","value","placeholder","\u0627\u062e\u062a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0636\u0648\u0631",3,"items","searchable","clearable"],["class","err",4,"ngIf"],["class","field",4,"ngIf"],[4,"ngIf"],[1,"actions"],["type","button","routerLink","../",1,"btn","ghost"],["type","submit",1,"btn",3,"disabled"],[1,"pill"],["formControlName","managerId","bindLabel","displayName","bindValue","id","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0634\u0631\u0641",3,"items","loading","searchable","clearable","trackByFn","disabled"],[1,"err"],[1,"static-value"],["formControlName","teacherId","bindLabel","displayName","bindValue","id","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0639\u0644\u0645",3,"items","loading","searchable","clearable","trackByFn","disabled"],["formControlName","circleId","bindLabel","name","bindValue","id","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u062d\u0644\u0642\u0629",3,"items","loading","searchable","clearable","trackByFn","disabled"],["formControlName","studentId","bindLabel","name","bindValue","id","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0637\u0627\u0644\u0628",3,"items","loading","searchable","clearable","trackByFn","disabled"],["type","number","formControlName","minutes",1,"inp"],["formControlName","newId","bindLabel","name","bindValue","id","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0648\u0631\u0629",3,"items","searchable","clearable"],["formControlName","newFrom",1,"inp"],["formControlName","newTo",1,"inp"],["formControlName","newRate",1,"inp"],["formControlName","recentPast",1,"inp"],["formControlName","recentPastRate",1,"inp"],["formControlName","distantPast",1,"inp"],["formControlName","distantPastRate",1,"inp"],["formControlName","farthestPast",1,"inp"],["formControlName","farthestPastRate",1,"inp"],["formControlName","theWordsQuranStranger",1,"inp"],["formControlName","intonation",1,"inp"],[1,"field","span-2"],["formControlName","other",1,"inp","ta"]],template:function(n,r){if(1&n){const s=e.RV6();e.j41(0,"section",4)(1,"header",5)(2,"div")(3,"p",6),e.EFF(4),e.k0s(),e.j41(5,"h1",7),e.EFF(6),e.k0s(),e.j41(7,"p",8),e.EFF(8," \u0627\u0645\u0644\u0623 \u0627\u0644\u062d\u0642\u0648\u0644 \u0623\u062f\u0646\u0627\u0647 \u0644\u062a\u0633\u062c\u064a\u0644 \u062d\u0636\u0648\u0631 \u0627\u0644\u0637\u0627\u0644\u0628 \u0648\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0627\u0644\u062d\u0641\u0638 \u0628\u0643\u0644 \u0633\u0647\u0648\u0644\u0629 "),e.k0s()(),e.DNE(9,D,2,0,"div",9),e.k0s(),e.j41(10,"form",10),e.bIt("ngSubmit",function(){return p.eBV(s),p.Njj(r.onSubmit())}),e.j41(11,"div",11),e.DNE(12,V,2,1,"ng-container",12)(13,j,5,1,"ng-template",null,0,e.C5r)(15,U,2,1,"ng-container",12)(16,G,5,1,"ng-template",null,1,e.C5r)(18,Q,6,7,"ng-container",12)(19,Y,5,1,"ng-template",null,2,e.C5r)(21,z,6,7,"ng-container",12)(22,J,5,1,"ng-template",null,3,e.C5r),e.j41(24,"div",13)(25,"label",14),e.EFF(26,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0642\u0631\u064a\u0631 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"),e.k0s(),e.nrm(27,"input",15),e.j41(28,"p",16),e.EFF(29," \u0627\u062a\u0631\u0643 \u0627\u0644\u062d\u0642\u0644 \u0641\u0627\u0631\u063a\u064b\u0627 \u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0648\u0642\u062a \u0631\u0641\u0639 \u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u062a\u0644\u0642\u0627\u0626\u064a\u064b\u0627 "),e.k0s()(),e.j41(30,"div",13)(31,"label",14),e.EFF(32,"\u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0636\u0648\u0631"),e.k0s(),e.nrm(33,"ng-select",17),e.DNE(34,H,2,1,"div",18),e.k0s(),e.DNE(35,q,5,1,"div",19)(36,ee,53,3,"ng-container",20),e.k0s(),e.j41(37,"div",21)(38,"button",22),e.EFF(39," \u0625\u0644\u063a\u0627\u0621 "),e.k0s(),e.j41(40,"button",23),e.EFF(41),e.k0s()()()()}if(2&n){const s=e.sdS(14),o=e.sdS(17),u=e.sdS(20),i=e.sdS(23);e.R7$(4),e.SpI(" ","update"===r.mode?"\u062a\u0639\u062f\u064a\u0644 \u062a\u0642\u0631\u064a\u0631":"\u0625\u0646\u0634\u0627\u0621 \u062a\u0642\u0631\u064a\u0631 \u062c\u062f\u064a\u062f"," "),e.R7$(2),e.SpI(" ","update"===r.mode?"\u062a\u0639\u062f\u064a\u0644 \u062a\u0642\u0631\u064a\u0631":"\u0625\u0646\u0634\u0627\u0621 \u062a\u0642\u0631\u064a\u0631 \u062c\u062f\u064a\u062f"," "),e.R7$(3),e.Y8G("ngIf","update"===r.mode),e.R7$(),e.Y8G("formGroup",r.reportForm),e.R7$(2),e.Y8G("ngIf","add"===r.mode)("ngIfElse",s),e.R7$(3),e.Y8G("ngIf","add"===r.mode)("ngIfElse",o),e.R7$(3),e.Y8G("ngIf","add"===r.mode)("ngIfElse",u),e.R7$(3),e.Y8G("ngIf","add"===r.mode)("ngIfElse",i),e.R7$(6),e.Y8G("max",r.creationTimeMax),e.R7$(6),e.Y8G("items",r.attendStatusOptions)("searchable",!1)("clearable",!0),e.R7$(),e.Y8G("ngIf",r.isInvalid("attendStatueId")),e.R7$(),e.Y8G("ngIf",r.selectedStatus!==r.AttendStatusEnum.ExcusedAbsence),e.R7$(),e.Y8G("ngIf",r.selectedStatus===r.AttendStatusEnum.Attended),e.R7$(4),e.Y8G("disabled",r.isSubmitting),e.R7$(),e.SpI(" ","update"===r.mode?"\u062a\u062d\u062f\u064a\u062b":"\u0625\u0646\u0634\u0627\u0621"," ")}},dependencies:[C.MD,C.bT,d.X1,d.qT,d.me,d.Q0,d.BC,d.cb,d.j4,d.JD,P.MQ,P.vr,I.iI,I.Wk,b.l,F.Hl],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;direction:rtl;text-align:right;--page-title-color: #0f172a;--page-eyebrow-color: #6b7280;--page-subtitle-color: #4b5563;--pill-bg: rgba(59, 130, 246, .08);--pill-border: rgba(59, 130, 246, .25);--pill-text: #1d4ed8;--card-bg: #ffffff;--card-border: rgba(15, 23, 42, .08);--card-shadow: 0 18px 40px rgba(15, 23, 42, .08);--label-color: #374151;--input-bg: #f9fafb;--input-border: rgba(148, 163, 184, .7);--input-text: #111827;--input-placeholder: #9ca3af;--hint-color: #6b7280;--static-bg: #f9fafb;--static-border: rgba(148, 163, 184, .8);--static-text: #111827;--btn-bg: #2563eb;--btn-border: rgba(37, 99, 235, .8);--btn-text: #ffffff;--ghost-border: rgba(148, 163, 184, .9);--ghost-text: #111827;--error-color: #dc2626;--ng-dropdown-bg: #ffffff;--ng-dropdown-text: #111827;--ng-dropdown-border: rgba(148, 163, 184, .8);--ng-option-hover-bg: rgba(37, 99, 235, .04);--ng-option-selected-bg: rgba(37, 99, 235, .08);--ng-option-selected-text: #1d4ed8}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%], [data-theme=dark][_nghost-%COMP%], [data-theme=dark]   [_nghost-%COMP%]{--page-title-color: #ffffff;--page-eyebrow-color: rgba(255, 255, 255, .7);--page-subtitle-color: rgba(255, 255, 255, .75);--pill-bg: rgba(59, 130, 246, .16);--pill-border: rgba(59, 130, 246, .35);--pill-text: #9dc6ff;--card-bg: rgba(10, 14, 18, .9);--card-border: rgba(255, 255, 255, .06);--card-shadow: 0 20px 45px rgba(0, 0, 0, .35);--label-color: rgba(255, 255, 255, .75);--input-bg: linear-gradient(145deg, rgba(255, 255, 255, .04), rgba(255, 255, 255, .02));--input-border: rgba(255, 255, 255, .1);--input-text: #ffffff;--input-placeholder: rgba(209, 213, 219, .9);--hint-color: rgba(255, 255, 255, .65);--static-bg: rgba(255, 255, 255, .03);--static-border: rgba(255, 255, 255, .18);--static-text: rgba(255, 255, 255, .9);--btn-bg: rgba(59, 130, 246, .9);--btn-border: rgba(255, 255, 255, .1);--btn-text: #ffffff;--ghost-border: rgba(255, 255, 255, .18);--ghost-text: rgba(255, 255, 255, .9);--error-color: #ff6b6b;--ng-dropdown-bg: #0b1017;--ng-dropdown-text: #e5e7eb;--ng-dropdown-border: rgba(255, 255, 255, .1);--ng-option-hover-bg: rgba(255, 255, 255, .06);--ng-option-selected-bg: rgba(59, 130, 246, .16);--ng-option-selected-text: #ffffff}.page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.page__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}.title[_ngcontent-%COMP%]{margin:2px 0 4px;font-size:24px;font-weight:700;color:var(--page-title-color)}.eyebrow[_ngcontent-%COMP%]{margin:0;text-transform:uppercase;letter-spacing:1.2px;font-size:12px;color:var(--page-eyebrow-color)}.subtitle[_ngcontent-%COMP%]{margin:0;color:var(--page-subtitle-color);font-size:14px}.pill[_ngcontent-%COMP%]{padding:10px 14px;border-radius:999px;background:var(--pill-bg);color:var(--pill-text);border:1px solid var(--pill-border);font-weight:600}.card[_ngcontent-%COMP%]{background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;padding:16px;box-shadow:var(--card-shadow)}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px 18px}.field[_ngcontent-%COMP%]{min-width:0}.span-2[_ngcontent-%COMP%]{grid-column:span 2}.lbl[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin:0 0 6px;font-size:13px;color:var(--label-color)}.inp[_ngcontent-%COMP%]{width:100%;height:44px;border-radius:10px;border:1px solid var(--input-border);background:var(--input-bg);color:var(--input-text);padding:0 12px;outline:none;transition:border-color .15s ease,box-shadow .15s ease}.inp[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder)}.inp[_ngcontent-%COMP%]:focus{border-color:#3b82f680;box-shadow:0 0 0 3px #3b82f626}.ta[_ngcontent-%COMP%]{height:110px;padding:10px 12px;resize:vertical}.err[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:var(--error-color)}.hint[_ngcontent-%COMP%]{margin:6px 0 0;font-size:12px;color:var(--hint-color)}.static-value[_ngcontent-%COMP%]{min-height:44px;display:flex;align-items:center;padding:0 12px;border-radius:10px;background:var(--static-bg);border:1px dashed var(--static-border);color:var(--static-text);font-weight:600}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:18px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{height:44px;padding:0 18px;border-radius:10px;border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);font-weight:600;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease,opacity .2s ease}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 10px 25px #3b82f640}.btn.ghost[_ngcontent-%COMP%]{background:transparent;border-color:var(--ghost-border);color:var(--ghost-text)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 1024px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.span-2[_ngcontent-%COMP%]{grid-column:auto}}@media (max-width: 768px){.page__header[_ngcontent-%COMP%]{align-items:flex-start}.card[_ngcontent-%COMP%]{padding:14px}.actions[_ngcontent-%COMP%]{position:sticky;bottom:0;background:linear-gradient(180deg,#fffffff5,#fffffffa);padding:12px 0 4px}.dark[_nghost-%COMP%]   .actions[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0a0e12e6,#0a0e12d9)}.btn[_ngcontent-%COMP%]{flex:1;text-align:center}}[_nghost-%COMP%]     .ng-select .ng-select-container{min-height:44px;border-radius:10px;border:1px solid var(--input-border);background:var(--input-bg);color:var(--input-text);font-family:inherit}[_nghost-%COMP%]     .ng-select .ng-select-container .ng-value-container .ng-input>input{color:var(--input-text)}[_nghost-%COMP%]     .ng-select .ng-arrow{border-color:var(--input-text) transparent transparent}[_nghost-%COMP%]     .ng-dropdown-panel{border-radius:12px;overflow:hidden;background:var(--ng-dropdown-bg);border:1px solid var(--ng-dropdown-border);color:var(--ng-dropdown-text);box-shadow:0 18px 45px #00000040;font-family:inherit}[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items{background:var(--ng-dropdown-bg)}[_nghost-%COMP%]     .ng-option{color:var(--ng-dropdown-text);background:transparent;font-family:inherit}[_nghost-%COMP%]     .ng-option:hover{background:var(--ng-option-hover-bg)}[_nghost-%COMP%]     .ng-option-selected, [_nghost-%COMP%]     .ng-option.ng-option-marked{background:var(--ng-option-selected-bg);color:var(--ng-option-selected-text)}.blue-theme.dark[_nghost-%COMP%]     .user-form .ng-select .ng-select-container, .blue-theme.dark   [_nghost-%COMP%]     .user-form .ng-select .ng-select-container, .dark[_nghost-%COMP%]     .user-form .ng-select .ng-select-container, .dark   [_nghost-%COMP%]     .user-form .ng-select .ng-select-container{background:#0f172ad9!important;border-color:#94a3b873!important;color:#f9fafb!important}.blue-theme.dark[_nghost-%COMP%]     .user-form .ng-select .ng-value-label, .blue-theme.dark   [_nghost-%COMP%]     .user-form .ng-select .ng-value-label, .blue-theme.dark[_nghost-%COMP%]     .user-form .ng-select .ng-input>input, .blue-theme.dark   [_nghost-%COMP%]     .user-form .ng-select .ng-input>input, .blue-theme.dark[_nghost-%COMP%]     .user-form .ng-select .ng-placeholder, .blue-theme.dark   [_nghost-%COMP%]     .user-form .ng-select .ng-placeholder, .dark[_nghost-%COMP%]     .user-form .ng-select .ng-value-label, .dark   [_nghost-%COMP%]     .user-form .ng-select .ng-value-label, .dark[_nghost-%COMP%]     .user-form .ng-select .ng-input>input, .dark   [_nghost-%COMP%]     .user-form .ng-select .ng-input>input, .dark[_nghost-%COMP%]     .user-form .ng-select .ng-placeholder, .dark   [_nghost-%COMP%]     .user-form .ng-select .ng-placeholder{color:#f8fafce0!important}.blue-theme.dark[_nghost-%COMP%]     .user-form .ng-select .ng-arrow, .blue-theme.dark   [_nghost-%COMP%]     .user-form .ng-select .ng-arrow, .dark[_nghost-%COMP%]     .user-form .ng-select .ng-arrow, .dark   [_nghost-%COMP%]     .user-form .ng-select .ng-arrow{border-top-color:#f8fafcbf!important}.blue-theme.dark[_nghost-%COMP%]     .user-form .ng-select .ng-clear-wrapper, .blue-theme.dark   [_nghost-%COMP%]     .user-form .ng-select .ng-clear-wrapper, .dark[_nghost-%COMP%]     .user-form .ng-select .ng-clear-wrapper, .dark   [_nghost-%COMP%]     .user-form .ng-select .ng-clear-wrapper{color:#f8fafcbf!important}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel, .dark[_nghost-%COMP%]     .ng-dropdown-panel, .dark   [_nghost-%COMP%]     .ng-dropdown-panel{background:#0b1220!important;border:1px solid rgba(148,163,184,.35)!important;box-shadow:0 24px 48px #020617bf!important}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items{background:transparent!important}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option{background:transparent!important;color:#f8fafce6!important}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option:hover, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option:hover, .blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-marked, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-marked, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option:hover, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option:hover, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-marked, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-marked{background:#60a5fa38!important}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-selected, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-selected, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-selected, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-option.ng-option-selected{background:#3b82f647!important;color:#fff!important}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar{width:10px}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-thumb, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-thumb, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-thumb, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-thumb{background:#94a3b859;border-radius:10px}.blue-theme.dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-track, .blue-theme.dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-track, .dark[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-track, .dark   [_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items::-webkit-scrollbar-track{background:#02061759}']})}return a})(),A=(()=>{class a{constructor(){this.dialogRef=(0,p.WQX)(b.k),this.data=(0,p.WQX)(b.e)}onCancel(){this.dialogRef.close(null)}onSend(){this.dialogRef.close(!0)}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-report-whatsapp-dialog"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","button",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"h2",0),e.EFF(1,"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u0639\u0628\u0631 \u0648\u0627\u062a\u0633\u0627\u0628"),e.k0s(),e.j41(2,"mat-dialog-content")(3,"p"),e.EFF(4,"\u0633\u064a\u062a\u0645 \u0641\u062a\u062d \u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0627\u062e\u062a\u064a\u0627\u0631 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0627\u0644\u0637\u0627\u0644\u0628 "),e.j41(5,"strong"),e.EFF(6),e.k0s(),e.EFF(7,"."),e.k0s()(),e.j41(8,"mat-dialog-actions",1)(9,"button",2),e.bIt("click",function(){return r.onCancel()}),e.EFF(10,"\u0625\u0644\u063a\u0627\u0621"),e.k0s(),e.j41(11,"button",3),e.bIt("click",function(){return r.onSend()}),e.EFF(12," \u0625\u0631\u0633\u0627\u0644 \u0648\u0627\u062a\u0633\u0627\u0628 "),e.k0s()()),2&n&&(e.R7$(6),e.JRh(r.data.studentName))},dependencies:[C.MD,b.l,b.b,b.M,b.c,F.Hl,F.$z],encapsulation:2})}return a})()}}]);